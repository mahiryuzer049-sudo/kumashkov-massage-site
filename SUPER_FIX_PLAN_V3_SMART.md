# SUPER FIX PLAN V3 (SMART)

Дата подготовки: 2026-02-13  
Проект: `pavelkumashkov.ru`  
Подготовил: Codex (технический аудит + план исправлений)  
Статус: `in-progress`

## 1. Основание для плана

План собран после аудита кода, документации и сборки проекта на 2026-02-13.

Факты из аудита:

1. `npm run check` проходит, но не покрывает ряд пользовательских регрессий.
2. На `landing-*` и `privacy` есть нерабочие якоря из общего `header/footer/sticky`.
3. В `head-core` прописаны фавиконы, которых нет в `public/assets` (404 на всех страницах).
4. В проекте есть незакрытые TODO/placeholder по SEO и визуалам.
5. 24 изображения в `public/assets/images` идентичны (временные заглушки).
6. На старте V3 был рассинхрон `QUALITY_GATES.md` и budget-скрипта (`65 KiB` vs `70 KiB`), в текущем состоянии контур синхронизирован и откалиброван до `73 KiB`.
7. `README.md` частично устарел (например, `vite.config.js` вместо `vite.config.mjs`, неактуальные указания по ссылкам WhatsApp).
8. `src/partials/master.html` и `src/partials/proof-filter.html` не подключены (orphan partials).
9. В разметке много микрошрифтов (`text-[10px]`: 155 вхождений, `text-[9px]`: 27) — риск читабельности.
10. `src/privacy.html` выбивается по доступности (нет skip-link, в отличие от остальных entry pages).

## 2. Ключевая цель V3

Привести проект к состоянию, где:

1. Нет критичных UX-дефектов на всех страницах, а не только на главной.
2. Нет битых локальных ссылок/ассетов.
3. Все quality-документы синхронизированы с фактическими скриптами и пайплайном.
4. Визуал и контент готовы к продакшену (без placeholder/TODO в пользовательском интерфейсе).
5. Проверки в CI ловят реальные регрессии до релиза.
6. Навигация современная и быстрая: любой раздел доступен с любой страницы за 1–2 действия.
7. Сайт воспринимается как единая бесшовная презентация с уникальной подачей каждого блока.

## 3. Приоритезация

- `P0` (блокирует качество релиза): нерабочие якоря на secondary pages, scanner не открывает popup/смещает экран, визуальные швы между секциями, missing favicon assets, QA gaps.
- `P1` (влияет на доверие и конверсию): модернизация навигации, возврат private-access card, расширение медиа, уникальные механики блоков, незакрытые SEO/analytics TODO, типографика и доступность.
- `P2` (масштабирование и устойчивость): cleanup orphan partials, расширение perf-модели, release/hypercare контур, документная синхронизация.

## 4. План реализации (16 эпиков, каждый с 5 SMART-подзадачами)

Поле `[T]` в SMART-подзадачах трактуется как порядок/этап выполнения, а не как жесткая календарная дата.

### 4.0 Входящие правки владельца (обязательные)

1. Убрать `Политика` из блока быстрых страниц, вернуть ее в подвал/legal-зону.
2. Исправить нерабочие переходы в блоках `Classic / Relax / Lymph / Posture` и общий сценарий перехода к разделам (`Формат`, `Услуги`, `Сканер`, `Маршруты`, `Результат`, `Блог`, `Запись`) с любых страниц.
3. Провести глубокую модернизацию навигации: быстрее доступ к любой части сайта, современная и трендовая подача.
4. Вернуть и улучшить 3D-карту приватного доступа (отдельный блок или встроенный акцентный блок).
5. Придать каждому блоку уникальную креативную механику (не однотипные карточки/колонки).
6. Починить scanner: popup, зоны, клики по кнопкам быстрых зон, убрать смещение вверх при клике.
7. Убрать визуальные швы/полосы и собрать сайт как единую «живую презентацию».
8. Расширить медиаслой: больше фонов/иллюстраций/фото + отдельный файл-карта для загрузки изображений.

## Эпик 1. Baseline Reset и управление исправлениями

Цель эпика: зафиксировать единый реалистичный backlog и убрать конфликт между отчетами "completed" и фактическим состоянием.

Критерий готовности эпика: единый V3-backlog, приоритизированный по `P0/P1/P2`, утвержденный чек-лист приемки.

1.1 `[S]` Создать реестр дефектов V3 с привязкой к файлам и сценариям. `[M]` Не менее 30 верифицированных пунктов. `[A]` Основание: текущие md-отчеты + фактический аудит кода. `[R]` Убирает хаос и дубли. `[T]` До 2026-02-14.
1.2 `[S]` Проставить severity (`critical/high/medium/low`) для каждого дефекта. `[M]` 100% пунктов имеют severity и owner. `[A]` Делается в одном документе без доп.инструментов. `[R]` Нужна прозрачная очередь фиксов. `[T]` До 2026-02-14.
1.3 `[S]` Определить Definition of Done для P0/P1/P2. `[M]` 1 DoD-блок на каждый уровень приоритета. `[A]` На базе `QUALITY_GATES.md` + UX-чеклистов. `[R]` Исключает споры "починили/не починили". `[T]` До 2026-02-15.
1.4 `[S]` Зафиксировать контрольные метрики старта (anchors/assets/docs/placeholders). `[M]` 1 baseline-таблица с 8+ метриками. `[A]` Метрики снимаются скриптами и grep. `[R]` Нужна точка сравнения before/after. `[T]` До 2026-02-15.
1.5 `[S]` Создать рабочий cadence: daily triage + weekly QA review. `[M]` Добавлены 2 регламентных ритуала с шаблоном отчета. `[A]` Без внедрения новых платформ. `[R]` Снижает риск повторных регрессий. `[T]` До 2026-02-16.

## Эпик 2. Навигация и шаблоны по типам страниц

Цель эпика: убрать битые якоря на `landing-*` и `privacy`, разделив навигацию по контексту страницы.

Критерий готовности эпика: на каждой HTML-странице все `href="#..."` ведут в существующие `id` текущей страницы.

2.1 `[S]` Ввести `pageType` в контекст шаблонов (`home`, `landing`, `legal`). `[M]` 6/6 entry pages получают корректный `pageType`. `[A]` Изменение локальное в `site.config.mjs` и рендер-контексте. `[R]` Основа для условного UI. `[T]` До 2026-02-17.
2.2 `[S]` Разделить `header` на варианты по `pageType` (якоря главной только на home). `[M]` 0 битых якорей в header на всех страницах. `[A]` Через условные блоки/partial variants. `[R]` Критичный UX/P0. `[T]` До 2026-02-18.
2.3 `[S]` Разделить `footer` и `sticky` по `pageType` (для secondary pages — только валидные переходы). `[M]` 0 битых якорей из footer/sticky. `[A]` Используем текущие partials, без смены стека. `[R]` Убирает массовый дефект навигации. `[T]` До 2026-02-19.
2.4 `[S]` Добавить автопроверку якорей на все `dist/*.html`. `[M]` Скрипт падает при любой missing hash target. `[A]` Реализуем как node-скрипт 1 файл. `[R]` Регрессии ловятся до релиза. `[T]` До 2026-02-20.
2.5 `[S]` Провести manual smoke навигации (desktop/mobile) на 6 страницах. `[M]` 6/6 страниц в статусе PASS, чек-лист сохранен. `[A]` Без внешних сервисов. `[R]` Финальная валидация UX. `[T]` До 2026-02-20.

## Эпик 3. Целостность ассетов и favicon-контур

Цель эпика: закрыть 404 на системных иконках и гарантировать существование локальных ассетов, объявленных в HTML.

Критерий готовности эпика: нет missing local asset references в `dist/*.html`.

3.1 `[S]` Добавить реальные favicon-файлы: `favicon-16x16.png`, `favicon-32x32.png`, `apple-touch-icon.png`. `[M]` 3/3 файла физически присутствуют в `public/assets/`. `[A]` Минимальный объем графики. `[R]` Убирает 404 и улучшает бренд-подачу. `[T]` До 2026-02-18.
3.2 `[S]` Проверить и синхронизировать `site.webmanifest` и `head-core` по путям/размерам. `[M]` 100% ссылок из manifest/head валидны. `[A]` Локальная правка 2 файлов. `[R]` Стабильная PWA/иконки в браузере. `[T]` До 2026-02-19.
3.3 `[S]` Добавить скрипт проверки существования всех локальных `src/href` в собранных html. `[M]` Скрипт покрывает 6 html-файлов, fail-fast при ошибке. `[A]` Простая regex+fs проверка. `[R]` Закрывает класс дефектов, который не ловит текущий check. `[T]` До 2026-02-20.
3.4 `[S]` Встроить проверку ассетов в `npm run check`. `[M]` Новый шаг добавлен и работает в CI. `[A]` Изменения в `package.json` и workflow минимальны. `[R]` Защита от повторного пропуска 404. `[T]` До 2026-02-21.
3.5 `[S]` Провести браузерный smoke по favicon на Chrome/Safari/Firefox. `[M]` 3/3 браузера показывают корректную иконку вкладки. `[A]` Ручной прогон 15–20 минут. `[R]` Проверка реального пользовательского эффекта. `[T]` До 2026-02-21.

## Эпик 4. Медиа-слой и удаление placeholder-контента

Цель эпика: заменить временные заглушки реальными визуалами и убрать placeholder/TODO-тексты из пользовательских секций.

Критерий готовности эпика: в UI нет слов `TODO/placeholder/placeholders`, а ключевые зоны заполнены реальными материалами.

4.1 `[S]` Утвердить production image-pack по `IMAGE_BRIEF_PLACEHOLDERS.md`. `[M]` Закрыто минимум 24/24 требуемых файла. `[A]` Используются уже заданные пути и пропорции. `[R]` Без реальных фото премиальная подача не достигается. `[T]` До 2026-02-24.
4.2 `[S]` Заменить технические подписи в `professional-profile` и `space-gallery` на клиентский copy. `[M]` 0 пользовательских "placeholder" в этих блоках. `[A]` Точечные изменения в partials. `[R]` Повышает доверие и завершенность. `[T]` До 2026-02-25.
4.3 `[S]` Убрать/закрыть TODO-комментарии, влияющие на контентное восприятие (`hero`, профиль и др.). `[M]` 0 незакрытых TODO в клиентских partials. `[A]` Механическая зачистка + сверка. `[R]` Убирает ощущение незавершенного релиза. `[T]` До 2026-02-25.
4.4 `[S]` Внедрить responsive image strategy (`srcset/sizes`) для hero/services/gallery/certs/blog. `[M]` Не менее 80% контентных img имеют `srcset`. `[A]` Реализуем на существующей HTML-архитектуре. `[R]` Стабильность скорости после загрузки реальных фото. `[T]` До 2026-02-27.
4.5 `[S]` Провести визуальный QA медиаслоя (desktop/mobile, 100%/125%). `[M]` 0 критичных артефактов кадрирования, 0 растянутых изображений. `[A]` Скриншот-чеклист уже используется в проекте. `[R]` Контроль финального вида. `[T]` До 2026-02-28.

## Эпик 5. Типографика и читабельность на 100% масштабе

Цель эпика: убрать ощущение «мелко» на 100% и привести UI к устойчивому базовому размеру текста.

Критерий готовности эпика: все ключевые тексты и CTA читаются комфортно на 100% без необходимости zoom 125%.

5.1 `[S]` Провести инвентаризацию микрошрифтов (`text-[8px]..text-[10px]`) по секциям. `[M]` Таблица покрывает 100% вхождений (минимум 186 текущих). `[A]` Автоматический подсчет уже выполнен и воспроизводим. `[R]` Нужна точка для оптимизации. `[T]` До 2026-02-23.
5.2 `[S]` Ввести политику minimum legible sizes для desktop/mobile. `[M]` Утвержден 1 набор порогов (например, не ниже 12px desktop, 11px mobile для UI-лейблов). `[A]` Меняется только CSS-токенизация. `[R]` Снижает когнитивную нагрузку. `[T]` До 2026-02-24.
5.3 `[S]` Перевести критичные элементы (nav chips, captions, badges, sticky labels) на обновленную шкалу. `[M]` Снижение `text-[10px]` вхождений минимум на 40%. `[A]` Выполнимо без редизайна всей страницы. `[R]` Максимальный эффект за короткий срок. `[T]` До 2026-02-27.
5.4 `[S]` Проверить отсутствие layout break при 100%/125% (desktop) и 320–430px (mobile). `[M]` 0 overlap/overflow в чек-листе из 20+ кейсов. `[A]` Используем существующий QA формат. `[R]` Подтверждает устойчивость типографики. `[T]` До 2026-02-28.
5.5 `[S]` Собрать быструю пользовательскую валидацию читаемости (минимум 3 сценария). `[M]` 3/3 сценария без жалоб на «слишком мелко». `[A]` Достаточно короткого ручного UAT. `[R]` Проверка реального эффекта, а не только кода. `[T]` До 2026-03-01.

## Эпик 6. Доступность (A11y) и безопасные интерактивы

Цель эпика: довести критичные пользовательские сценарии до стабильного уровня accessibility.

Критерий готовности эпика: нет критичных a11y-ошибок в автоматическом аудите + пройден клавиатурный сценарий.

6.1 `[S]` Добавить `skip-link` в `privacy.html` и унифицировать entry-page шаблоны. `[M]` 6/6 страниц имеют рабочий skip-link. `[A]` Минимальная правка markup. `[R]` Базовый accessibility стандарт. `[T]` До 2026-02-24.
6.2 `[S]` Проверить tab-order и focus-visible для `header/menu/scanner/sticky` на всех типах страниц. `[M]` 0 focus traps и 0 потерянного фокуса по чек-листу. `[A]` Основа уже есть в JS, нужна доводка. `[R]` Критично для клавиатурной навигации. `[T]` До 2026-02-27.
6.3 `[S]` Выполнить авто-аудит (Lighthouse + axe/эквивалент) для главной и 1 landing. `[M]` Accessibility score >= 90 на 2 ключевых страницах. `[A]` Реально в рамках текущего стека. `[R]` Измеримый контроль качества. `[T]` До 2026-03-01.
6.4 `[S]` Исправить контраст проблемных текстов (`text-white/35`, `text-gray-*` на темных фонах). `[M]` 100% ключевых CTA/labels соответствуют WCAG AA для нормального текста. `[A]` Правится через палитру и opacity. `[R]` Влияет на восприятие и доступность. `[T]` До 2026-03-02.
6.5 `[S]` Добавить a11y smoke в release checklist. `[M]` В `RELEASE_CHECKLIST.md` есть отдельный блок из минимум 8 пунктов. `[A]` Док-изменение без зависимости от инфраструктуры. `[R]` Фиксируем практику на будущее. `[T]` До 2026-03-03.

## Эпик 7. SEO, аналитика и юридическая консистентность

Цель эпика: закрыть незавершенные SEO/analytics TODO и стабилизировать поисковую/правовую часть.

Критерий готовности эпика: `head-seo` без незакрытых TODO для production-конфигурации.

7.1 `[S]` Принять решение по `Yandex Webmaster` и `Yandex Metrika` (включить реально или выключить placeholders). `[M]` 0 TODO-комментариев в production `head-seo`. `[A]` Уже есть feature-flags в `site.config.mjs`. `[R]` Убирает полузавершенное состояние SEO-блока. `[T]` До 2026-02-26.
7.2 `[S]` Перепроверить `robots`/`canonical`/`privacy` индексируемость по бизнес-решению. `[M]` 100% страниц имеют согласованную `robots`-политику. `[A]` Локальная конфигурация в `site.config.mjs`. `[R]` Исключает SEO-конфликты. `[T]` До 2026-02-27.
7.3 `[S]` Обновить `sitemap.xml` (`lastmod`) и внедрить правило обновления при релизе. `[M]` Все URL в sitemap актуальны по дате релиза. `[A]` Механическая процедура, можно автоматизировать скриптом. `[R]` Улучшает crawl freshness. `[T]` До 2026-02-28.
7.4 `[S]` Провалидировать structured data (FAQ/Service/Person/Business) внешним валидатором. `[M]` 0 critical errors в schema validation. `[A]` Основано на уже существующих JSON-LD. `[R]` Усиливает SEO-базу без редизайна. `[T]` До 2026-03-02.
7.5 `[S]` Обновить SEO-runbook (что/где редактировать, как проверять после релиза). `[M]` 1 документ с шагами и чек-листом post-release SEO smoke. `[A]` Делается на базе текущего README/RUNBOOK. `[R]` Снижает операционные ошибки. `[T]` До 2026-03-03.

## Эпик 8. Производительность и устойчивость фронтенда

Цель эпика: удержать скорость и UX после замены заглушек на реальные тяжелые медиа.

Критерий готовности эпика: бюджеты и метрики обновлены, не превышаются на production-сборке.

8.1 `[S]` Синхронизировать docs и код по performance budget (65 vs 70). `[M]` 0 расхождений в `QUALITY_GATES.md`, `PHASE_7_QA_REPORT.md`, `scripts/perf-budget.mjs`. `[A]` Небольшие документные правки. `[R]` Восстанавливает доверие к quality-документации. `[T]` До 2026-02-22.
8.2 `[S]` Добавить вторичный budget-контур для изображений и шрифтов. `[M]` Введены лимиты минимум для 3 классов: hero image, total images, total fonts. `[A]` Реализуемо отдельным скриптом. `[R]` Текущий budget не видит реальную медианагруженность. `[T]` До 2026-03-04.
8.3 `[S]` Оптимизировать font-pipeline (минимизировать неиспользуемые веса/наборы). `[M]` Снижение суммарного веса font assets минимум на 20%. `[A]` Через сокращение импортов в `main.css`. `[R]` Улучшает LCP/TTFB на слабых сетях. `[T]` До 2026-03-06.
8.4 `[S]` Перепроверить тяжелые эффекты (cursor, spotlight, blur) и fallback для low-power. `[M]` 0 заметных фризов в ручном тесте на low-power сценарии. `[A]` Механизмы reduced-effects уже есть, нужна полировка. `[R]` Стабильность UX на реальных устройствах. `[T]` До 2026-03-07.
8.5 `[S]` Зафиксировать сравнительный perf-отчет before/after V3. `[M]` 1 таблица с минимум 6 метриками (LCP/CLS/INP/total payload/css/js/images). `[A]` Снимается локальными инструментами + Lighthouse. `[R]` Прозрачный результат внедрения. `[T]` До 2026-03-08.

## Эпик 9. Документация, архитектурная чистка и поддерживаемость

Цель эпика: синхронизировать документацию с фактическим состоянием проекта и убрать «мертвые» элементы.

Критерий готовности эпика: документация отражает реальный код; orphan-компоненты устранены или явно архивированы.

9.1 `[S]` Обновить `README.md` под текущую архитектуру (`vite.config.mjs`, partial-based layout, реальные пути редактирования). `[M]` 0 подтвержденных несоответствий README vs repo tree. `[A]` Точечная правка одного файла. `[R]` Снижает риск ошибок при поддержке. `[T]` До 2026-03-05.
9.2 `[S]` Обновить `QUALITY_GATES.md`, `RUNBOOK.md`, `RELEASE_CHECKLIST.md` под V3 пайплайн. `[M]` 3/3 документа синхронизированы и используют единый набор команд. `[A]` На базе уже существующего процесса. `[R]` Единый источник правды для команды. `[T]` До 2026-03-06.
9.3 `[S]` Ревизировать фазовые отчеты со статусом `completed` и отметить реальные open issues. `[M]` 100% затронутых фазовых md содержат актуальный статус/примечание. `[A]` Редактура markdown без техдолга в коде. `[R]` Убирает ложное ощущение готовности. `[T]` До 2026-03-07.
9.4 `[S]` Разобрать `master` и `proof-filter` partials: либо подключить по назначению, либо удалить/архивировать. `[M]` 0 orphan partials в `src/partials`. `[A]` Решение принимается быстро по продуктовой ценности. `[R]` Чистая кодовая база, меньше путаницы. `[T]` До 2026-03-08.
9.5 `[S]` Создать `PROJECT_STRUCTURE.md` с картой entry pages, partials, scripts, docs. `[M]` Документ покрывает 100% ключевых директорий и owner-зон. `[A]` Генерируется из текущего дерева файлов. `[R]` Ускоряет онбординг и future changes. `[T]` До 2026-03-09.

## Эпик 10. QA-автоматизация, релиз и hypercare

Цель эпика: довести процесс до состояния, где критичные регрессии блокируются автоматически.

Критерий готовности эпика: CI падает на broken anchors, missing assets и budget regressions; релиз проходит по обновленному чек-листу.

10.1 `[S]` Добавить `npm run qa:anchors` и `npm run qa:assets` в репозиторий. `[M]` 2 новые команды выполняются локально и в CI. `[A]` Реализуется простыми node-скриптами. `[R]` Закрывает текущие P0-дыры в проверках. `[T]` До 2026-03-10.
10.2 `[S]` Интегрировать новые QA-команды в `npm run check` и `.github/workflows/ci.yml`. `[M]` CI включает новые шаги и fail-fast при ошибке. `[A]` Без смены CI-провайдера. `[R]` Предотвращает повторные дефекты в main/master. `[T]` До 2026-03-11.
10.3 `[S]` Добавить минимальный визуальный regression-smoke (6 ключевых страниц, 1 viewport desktop + 1 mobile). `[M]` 12 эталонных скриншотов и чек процесса их сравнения. `[A]` Можно начать с ручного baseline + scripted capture. `[R]` Ловим визуальные откаты, которые не ловят линтеры. `[T]` До 2026-03-12.
10.4 `[S]` Выполнить релиз-кандидат V3 с полным прогоном чек-листа. `[M]` 100% пунктов checklist в статусе PASS, ни одного unresolved P0. `[A]` Основа уже есть, нужен строгий прогон. `[R]` Контролируемый выход в прод. `[T]` До 2026-03-13.
10.5 `[S]` Запустить hypercare на 7 дней после релиза. `[M]` 0 открытых P0, закрытие P1 <= 72 часа, финальный postmortem-отчет. `[A]` Реализуется без доп.инфраструктуры. `[R]` Фиксируем стабильность после выхода. `[T]` Период 2026-03-14 — 2026-03-20.

## Эпик 11. Навигация 4.0 (универсальный доступ с любой страницы)

Цель эпика: дать пользователю предсказуемый переход в любой раздел сайта независимо от того, находится он на главной, landing или legal-странице.

Критерий готовности эпика: все ключевые пункты меню работают на 100% страниц, включая переходы с `landing-*` в разделы главной.

11.1 `[S]` Убрать `Политика` из блока `Быстрые страницы` в шапке и закрепить ее только в legal-зоне подвала/служебного меню. `[M]` 0 появлений `Политика` в quick-pages row, 1 стабильный legal-вход в footer. `[A]` Точечная правка `header/footer`. `[R]` Чистая IA и меньше шума в верхней навигации. `[T]` Этап P0-Nav-1.
11.2 `[S]` Реализовать cross-page routing для якорей (`/#trust`, `/#services`, `/#scanner` и т.д.) при заходе с `landing-*` и `privacy`. `[M]` 0 нерабочих переходов для 7 ключевых пунктов меню на 6 страницах. `[A]` Через `pageType` + абсолютные hash-ссылки. `[R]` Закрывает основной UX-баг из обратной связи. `[T]` Этап P0-Nav-2.
11.3 `[S]` Синхронизировать desktop/mobile/sticky/footer-навигацию в единую карту разделов. `[M]` 100% одинаковый набор приоритетных входов в 4 навигационных зонах. `[A]` Основано на существующих partials. `[R]` Убирает рассинхрон между вариантами меню. `[T]` Этап P0-Nav-3.
11.4 `[S]` Добавить автотест сценариев «landing -> раздел главной» и «privacy -> запись/блог/услуги». `[M]` Минимум 14 e2e-сценариев PASS (7 пунктов x 2 типа страниц). `[A]` Реализуемо lightweight-скриптом проверки ссылок/редиректов. `[R]` Защищает от повторной поломки навигации. `[T]` Этап P0-Nav-4.
11.5 `[S]` Провести ручной smoke с user-path матрицей (desktop/mobile). `[M]` 20/20 маршрутов PASS, включая возврат на главную и прыжок в нужный блок. `[A]` По чек-листу без внешних систем. `[R]` Финальная гарантия работоспособности. `[T]` Этап P0-Nav-5.

## Эпик 12. Trend Navigation UX (современно, быстро, понятно)

Цель эпика: сделать навигацию не только рабочей, но и современной, быстрой в сканировании и «дорогой» по ощущению.

Критерий готовности эпика: пользователь за 1–2 действия попадает в нужный блок и понимает структуру страницы без перегруза.

12.1 `[S]` Ввести двухуровневую логику меню: `Разделы` (якоря) + `Страницы` (landing/legal). `[M]` 100% навпунктов отнесены к понятной группе. `[A]` Не требует нового роутера. `[R]` Улучшает когнитивную карту сайта. `[T]` Этап UX-Nav-1.
12.2 `[S]` Добавить компактный «Navigator rail»/быстрый jump-панель для длинной главной. `[M]` Не менее 8 основных блоков доступны из панели. `[A]` Реализуется в существующем UI-слое. `[R]` Быстрый доступ к любой части контента. `[T]` Этап UX-Nav-2.
12.3 `[S]` Добавить заметный индикатор текущего раздела (`active section`) в шапке и мобильном меню. `[M]` Активный пункт корректно отображается в >= 95% прокруток чек-листа. `[A]` Через IntersectionObserver. `[R]` Повышает ориентацию в длинной странице. `[T]` Этап UX-Nav-3.
12.4 `[S]` Пересобрать sticky-бар под сценарий «быстрый выбор действия»: `Запись`, `Сканер`, `Пакеты`, `Блог`. `[M]` 4 action-entry доступны постоянно и без перекрытий. `[A]` На базе текущего `sticky.html`. `[R]` Ускоряет конверсионный путь. `[T]` Этап UX-Nav-4.
12.5 `[S]` Провести UX-аудит «first-time visitor» на 10 сценариях поиска разделов. `[M]` Среднее число кликов до целевого блока <= 2. `[A]` Ручной сценарный тест. `[R]` Подтверждает реальную удобность, а не только визуал. `[T]` Этап UX-Nav-5.

## Эпик 13. Scanner Rescue 3.1 (починка + апгрейд)

Цель эпика: восстановить стабильную работу сканера и сделать popup-сценарий приятным, надежным и без смещений макета.

Критерий готовности эпика: клики по точкам и быстрым кнопкам всегда открывают корректный popup, без прыжков вверх и без «мертвых» зон.

13.1 `[S]` Выполнить root-cause диагностику неисправности scanner по сценариям владельца (точки, shortcuts, смещение вверх). `[M]` Зафиксированы минимум 3 конкретные причины и план фикса на уровне кода. `[A]` Диагностика через `main.js` + markup scanner. `[R]` Без RCA фиксы будут нестабильны. `[T]` Этап P0-Scanner-1.
13.2 `[S]` Исправить событийну́ю модель для точек SVG и shortcut-кнопок (click/keyboard/touch). `[M]` 5/5 зон корректно отрабатывают в desktop+mobile. `[A]` Точечная JS/HTML-правка. `[R]` Убирает главную функциональную регрессию блока. `[T]` Этап P0-Scanner-2.
13.3 `[S]` Убрать смещение сканера/вьюпорта при кликах (layout jump/scroll jump). `[M]` 0 непреднамеренных scroll-jump в 30 тест-кликах. `[A]` Через контроль focus/transform/overflow. `[R]` Критичный UX для восприятия качества. `[T]` Этап P0-Scanner-3.
13.4 `[S]` Обновить popup UX: мягкая анимация открытия, ясный заголовок, быстрый CTA, корректный close по Esc/outside/button. `[M]` 100% закрытие popup тремя способами, 0 зависших состояний. `[A]` Локальная доработка scanner UI. `[R]` Делает блок «живым» и приятным. `[T]` Этап P0-Scanner-4.
13.5 `[S]` Добавить scanner-smoke в обязательный quality gate. `[M]` Авто/полуавто чек фиксирует PASS для 5 зон и 5 shortcut-кнопок. `[A]` Реализуемо скриптом + чек-листом. `[R]` Не допускает повторной поломки после следующих правок. `[T]` Этап P0-Scanner-5.

## Эпик 14. Seamless Ecosystem Flow (без швов и полос)

Цель эпика: собрать весь сайт в единый визуальный поток, чтобы прокрутка ощущалась как цельная презентация без резких стыков.

Критерий готовности эпика: отсутствуют заметные горизонтальные швы/полосы между секциями в целевых viewport.

14.1 `[S]` Удалить остаточные border-границы и конфликтующие overlay-слои, формирующие полосы между секциями. `[M]` 0 активных визуальных «швов» в 12 контрольных переходах между блоками. `[A]` Доступно через refactor CSS/partials. `[R]` Закрывает прямой дефект со скриншотов 1,2,3,5. `[T]` Этап P0-Visual-1.
14.2 `[S]` Перейти на единую фоновую «канву» (global background system) и секционные вариации без разрыва. `[M]` 100% секций используют совместимую background-схему. `[A]` Через CSS variables + однообразный section-shell контракт. `[R]` Создает ощущение единой экосистемы. `[T]` Этап P0-Visual-2.
14.3 `[S]` Добавить переходные мотивы между блоками (световые градиенты/soft separators вместо hard-lines). `[M]` Минимум 8 межсекционных переходов с мягкой связкой. `[A]` Без тяжелой графики, на CSS-слоях. `[R]` Визуально «сшивает» историю страницы. `[T]` Этап P1-Visual-3.
14.4 `[S]` Провести pixel-QA по проблемным зонам из скриншотов владельца. `[M]` 5/5 контрольных скрин-зон устранены и подтверждены before/after. `[A]` Используем recovery-снимки как baseline. `[R]` Проверка по реальному источнику жалоб. `[T]` Этап P0-Visual-4.
14.5 `[S]` Добавить регрессионный чек «no seams» в визуальный smoke. `[M]` Чек-лист из минимум 15 переходов PASS в desktop/mobile. `[A]` Полуавтомат + ручной контроль. `[R]` Предотвращает возврат полос после новых редизайнов. `[T]` Этап P1-Visual-5.

## Эпик 15. Private Access Card Reborn (3D-блок доверия)

Цель эпика: вернуть «карту приватного доступа» как фирменный эффектный элемент и усилить ее роль в доверии/конверсии.

Критерий готовности эпика: блок карты присутствует, визуально премиален, интерактив стабилен и не мешает производительности.

15.1 `[S]` Восстановить блок private-access card в структуре главной (или выделить новый самостоятельный блок). `[M]` Блок отображается на desktop/mobile и логично встроен в сценарий чтения. `[A]` На базе существующих стилей `member-card`/3D-паттернов. `[R]` Возвращает узнаваемый фирменный элемент. `[T]` Этап P1-Card-1.
15.2 `[S]` Улучшить 3D-эффект: tilt, glare, depth, мягкая реакция на hover/pointer. `[M]` 3/3 эффектов активны и корректны на desktop. `[A]` CSS+JS без внешних библиотек. `[R]` Повышает wow-эффект и премиальность. `[T]` Этап P1-Card-2.
15.3 `[S]` Добавить безопасные fallback-сценарии для mobile/reduced-motion/low-power. `[M]` 0 артефактов и 0 деградации читабельности в fallback-режимах. `[A]` Используются существующие классы reduced-effects. `[R]` Стабильность на любых устройствах. `[T]` Этап P1-Card-3.
15.4 `[S]` Связать карту с действием (CTA на запись/конфиденциальный формат). `[M]` В блоке есть 1 primary CTA и 1 вторичный маршрут. `[A]` Встраивается в текущую CTA-систему. `[R]` Блок не только «красивый», но и конверсионный. `[T]` Этап P1-Card-4.
15.5 `[S]` Провести визуально-поведенческий QA блока карты. `[M]` PASS по 12 проверкам (анимация, hover, таб-фокус, mobile, perf). `[A]` По расширенному чек-листу. `[R]` Закрепляет качество перед релизом. `[T]` Этап P1-Card-5.

## Эпик 16. Creative Block DNA + Media Expansion Pack

Цель эпика: сделать каждый блок уникальным по подаче и одновременно расширить медиаслой с понятной картой загрузки изображений.

Критерий готовности эпика: у каждого ключевого блока есть своя «фишка», а для медиа подготовлен отдельный upload-map файл с именами, путями и описаниями.

16.1 `[S]` Сформировать матрицу `Block DNA` для всех ключевых секций (зачем, фишка, эмоция, следующий шаг). `[M]` Минимум 20 секций задокументированы в едином формате. `[A]` На основе текущего порядка partials. `[R]` Убирает «одинаковые столбики/квадратики». `[T]` Этап P1-Creative-1.
16.2 `[S]` Назначить и внедрить уникальные механики минимум для 8 приоритетных блоков (например: slider, compare, route-tabs, timeline, spotlight cards). `[M]` >= 8 блоков имеют неповторяющийся интерактивный паттерн. `[A]` Реализуемо инкрементально без ломки всей страницы. `[R]` Дает ту самую креативную подачу по запросу владельца. `[T]` Этап P1-Creative-2.
16.3 `[S]` Расширить количество медиа-слотов на главной и landing-страницах. `[M]` +18 новых осмысленных media-slot позиций с корректным layout. `[A]` Плейсхолдеры допустимы до загрузки финальных фото. `[R]` Решает проблему «мало иллюстраций и медиа». `[T]` Этап P1-Creative-3.
16.4 `[S]` Создать отдельный файл `IMAGE_UPLOAD_MAP_V3.md` с кратким описанием каждого изображения, именем файла и точным путем загрузки. `[M]` 100% новых и текущих ключевых медиа-слотов покрыты картой. `[A]` Документ формируется в репозитории рядом с планом. `[R]` Делает замену контента быстрой и без ошибок. `[T]` Этап P0-Creative-4.
16.5 `[S]` Провести креативный QA: «каждый блок отличается и запоминается». `[M]` 0 повторяющихся шаблонных паттернов на 8 приоритетных блоках по чек-листу уникальности. `[A]` Экспертный визуальный проход + фиксация скринов. `[R]` Контролирует соответствие твоему ключевому требованию по дизайну. `[T]` Этап P1-Creative-5.

## 5. Контрольные точки по этапам (без привязки к датам)

1. Milestone A (`P0 Core`): закрыты критичные баги навигации между страницами и блокирующие ассет-дефекты.
2. Milestone B (`Scanner + Flow`): scanner стабилен, popup работает, смещения устранены, визуальные швы закрыты.
3. Milestone C (`Creative UX`): возвращена 3D private-access card, внедрены уникальные механики по ключевым блокам.
4. Milestone D (`Media Expansion`): расширены media-slots, создан и применен `IMAGE_UPLOAD_MAP_V3.md`.
5. Milestone E (`System Quality`): CI включает nav/scanner/assets checks, документация полностью синхронизирована.
6. Milestone F (`Release Ready`): все P0/P1 закрыты, релизный smoke PASS, план переведен в режим поддержки.

## 6. KPI V3 (измеримые целевые значения)

1. Broken hash links across all pages: `0`.
2. Доступность переходов в разделы главной с `landing-*` и `privacy`: `100%`.
3. Missing local assets in dist html: `0`.
4. Scanner interaction success (5 зон + 5 shortcut-кнопок): `100% PASS`.
5. Непреднамеренный scroll/layout jump в scanner: `0`.
6. Видимые межсекционные швы в контрольных зонах: `0`.
7. Placeholder/TODO в пользовательском UI: `0`.
8. Уникальные механики внедрены минимум в `8` приоритетных блоках.
9. Accessibility score (главная + 1 landing): `>= 90`.
10. Сходимость документов с кодом (quality/perf/readme/plan): `100%`.
11. P0 дефекты после релиза: `0`.

## 7. Риски и превентивные меры

1. Риск: задержка по получению реальных фото.  
   Мера: двухэтапный rollout (сначала техническое исправление + качественные временные стоки, затем финальная замена).
2. Риск: рост веса после замены изображений.  
   Мера: внедрить image budget и responsive formats до загрузки финального пакета.
3. Риск: новые якоря/partials снова сломают secondary pages.  
   Мера: page-type aware navigation + автоматический `qa:anchors` в CI.
4. Риск: документация снова уйдет в рассинхрон.  
   Мера: обязательный update-docs пункт в release checklist.
5. Риск: "completed"-отчеты снова будут расходиться с фактом.  
   Мера: phase reports привязывать только к проверяемым KPI и артефактам.
6. Риск: после креативной модернизации навигация станет красивой, но сложной.  
   Мера: правило «2 клика до целевого блока» и UX-smoke по user-path матрице.
7. Риск: scanner снова сломается при последующих JS-изменениях.  
   Мера: выделенный `qa:scanner` smoke + обязательный прогон в `npm run check`.
8. Риск: чрезмерные визуальные эффекты ухудшат скорость и читаемость.  
   Мера: budgets + fallback для reduced-motion/low-power + блокировка merge при регрессе.
9. Риск: медиа-файлы будут загружаться под неверными именами/путями.  
   Мера: централизованная карта `IMAGE_UPLOAD_MAP_V3.md` и проверка путей перед релизом.

## 8. Формат внутреннего трекинга (без привязки ко времени)

Принцип: статус фиксируется не по календарю, а по каждому рабочему проходу (каждый новый цикл работы по проекту).

В каждом рабочем проходе фиксируем:

1. Что закрыто: ID задач, результат и чем подтверждено (проверка/артефакт).
2. Что в работе: один активный эпик/задача и следующий конкретный шаг.
3. Что заблокировано: блокер, причина, условие разблокировки.
4. Что перенесено: какие задачи отложены и почему.
5. Что изменилось в плане: обновление приоритетов, KPI, scope (если было) с краткой причиной.

Статусы задач:

1. `todo` — не начато.
2. `in_progress` — выполняется сейчас.
3. `blocked` — есть внешний/технический блокер.
4. `done` — завершено и проверено по критерию готовности.

## 9. Актуальный остаток (на 2026-02-14)

### 9.1 Не закрыто (код/контент)

1. `4.1` Production image-pack по `IMAGE_BRIEF_PLACEHOLDERS.md` (реальные фото от владельца/контент-потока).

### 9.2 Заблокировано (только manual проверки)

См. `MANUAL_CHECKLIST_V3.md`:

1. `2.5`, `3.5`, `4.5`, `5.4`, `5.5`, `6.2`, `6.3`, `7.4`, `8.4`, `8.5`, `10.3`, `10.4`, `10.5`, `11.5`, `12.5`, `14.5`, `15.5`, `16.5`.

### 9.3 Следующая последовательность выполнения (без тестов)

1. Дождаться/получить production image-pack и закрыть `4.1`.
2. Пройти manual-пакет по `MANUAL_CHECKLIST_V3.md` в приоритете P0-сценариев (`2.5`, `6.2`, `8.4`, `11.5`).
3. Выполнить release-кандидат (`10.4`) после закрытия ручных блокеров.

## 10. Internal Status (ведет Codex)

Pass 1:

1. Done: `11.1`, `11.2`, `11.3` (cross-page anchors + очистка quick pages).
2. Done: `13.2` (клики/shortcuts стабилизированы), `13.3` (preventScroll на фокусе).
3. Done: `14.1` (удаление швов/полос — отключение border-y через CSS + удаление border-классов в секциях).

Pass 2:

1. Done: `14.2` (единая фоновая канва — добавлен global background на `main`, расширен overlay секций).
2. Done: `14.3` (мягкие переходы — линейные фейды в overlay секций).

Pass 3:

1. Done: `13.4` (popup UX — добавлены более мягкие анимации, aria-modal и визуальный акцент).

Pass 4:

1. Done: `12.3` (active section — добавлены data-nav-section и подсветка активного пункта).
2. Done: `12.4` (sticky-бар — добавлен быстрый вход в «Пакеты», убран Telegram).
3. Done: `12.1` (двухуровневая логика меню — «Разделы» + «Страницы»).
4. Done: `12.2` (добавлен Navigator rail для быстрого jump-доступа).

Pass 5:

1. Done: `14.4` (pixel-QA по контрольным зонам — убраны верх/низ градиентные «швы», добавлен единый vignette на `main`).

Pass 6:

1. Done: `15.1` (добавлен новый блок private-access).
2. Done: `15.2` (3D tilt и glare-эффекты).
3. Done: `15.3` (fallback для mobile/reduced-motion/low-power).

Pass 7:

1. Done: `15.4` (primary/secondary CTA для private-access блока).

Pass 8:

1. Done: `16.2` (добавлены уникальные паттерны для Space Gallery, Goal Routes, Frequency, Blog layout + compare slider в Results + tabs в Services + accordion в Trust + carousel в Request Scenarios + switcher в Expectations).
2. Done: `16.3` (+22 media-slots: Packages + Goal Routes + Blog 07/08 + Results detail + Scanner zone imagery + Profile portrait + landing hero images).

Pass 9:

1. Done: `3.1` (добавлены favicon-ассеты 16/32 + apple-touch).
2. Done: `6.1` (skip-link добавлен в privacy).

Pass 10:

1. Done: `2.4` (добавлен `qa:anchors` скрипт).
2. Done: `3.3` (добавлен `qa:assets` скрипт).

Pass 11:

1. Done: `10.1` (npm-скрипты `qa:anchors` и `qa:assets` добавлены).
2. Done: `3.4` + `10.2` (qa-команды включены в `npm run check` и CI цепочку).

Pass 12:

1. Done: `9.4` (orphan partials `master` и `proof-filter` архивированы в `src/partials/_archive`).

Pass 13:

1. Done: `4.2` (убраны технические подписи и placeholder-лейблы в `professional-profile` и `space-gallery`).

Pass 14:

1. Done: `4.3` (убраны TODO-комментарии в клиентских partials; TODO остались только в архиве).
2. Done: `7.1` (placeholder-блоки Yandex удалены из `head-seo`, конфиг очищен).

Pass 15:

1. Done: `8.1` (QUALITY_GATES синхронизирован с perf-budget, QA шаги актуализированы под V3).

Pass 16:

1. Done: `9.2` (обновлены `QUALITY_GATES.md`, `RUNBOOK.md`, `RELEASE_CHECKLIST.md` под V3 пайплайн).

Pass 17:

1. Done: `9.1` (README синхронизирован с текущей архитектурой и QA-командами).

Pass 18:

1. Done: `9.5` (создан `PROJECT_STRUCTURE.md` с картой ключевых директорий).

Pass 19:

1. Done: `3.2` (manifest и `head-core` синхронизированы с реальными favicon-ассетами).

Pass 20:

1. Done: `7.3` (обновлен `sitemap.xml` с актуальным `lastmod`).

Pass 21:

1. Done: `7.2` (privacy переведена на `noindex,follow`; из sitemap удалена).

Pass 22:

1. Done: `8.3` (оптимизирован font-pipeline: удалены латинские сабсеты).

Pass 23:

1. Done: `7.5` (создан SEO_RUNBOOK.md).

Pass 24:

1. Done: `13.5` (добавлен `qa:scanner` и включен в `npm run check`).

Pass 25:

1. Done: `6.5` (A11y smoke добавлен в RELEASE_CHECKLIST).

Pass 26:

1. Done: `8.2` (добавлены лимиты для изображений и шрифтов в perf-budget + обновлен QUALITY_GATES).

Pass 27:

1. Done: `6.4` (усилен контраст слабых текстов через локальные override-классы).

Pass 28:

1. Done: `9.3` (фазовые отчеты помечены как требующие повторной валидации после V3).

Pass 29:

1. Done: `5.1` (создан `TYPOGRAPHY_AUDIT.md` с инвентаризацией).
2. Done: `5.2` (минимальные размеры закреплены через overrides).

Pass 30:

1. Done: `11.4` (добавлен `qa:nav` для cross-page якорей).
---

Pass 31:

1. Done: `13.1` (RCA по scanner зафиксирован в `SCANNER_RCA_V3.md`).
2. Done: `16.1` (Block DNA матрица собрана в `BLOCK_DNA_V3.md`).
3. Done: `16.4` (карта загрузки изображений подтверждена в `IMAGE_UPLOAD_MAP_V3.md`).
---

Pass 32:

1. Done: `5.3` (снижение `text-[10px]` до 90 вхождений: обновлены nav, blog, expectations, transparent-rules, pricing, landing-*).
---

Pass 33:

1. Blocked (manual): `8.4` (low-power fallback добавлены в `main.js` и `custom.css`, требуется ручной smoke).
---

Pass 34:

1. Done: `4.4` (добавлены `srcset/sizes` для hero, services, space gallery, certs, blog, landing hero).
---

Pass 35:

1. In progress: `5.3` (дальнейшее снижение `text-[10px]` до 54 вхождений: footer, booking, how-to-book, goal-routes, results, request-scenarios, voices).
---

Pass 36:

1. Done: `5.3` (снижение `text-[10px]` до 8 вхождений, остаток только в `src/partials/_archive/*`).
---

Pass 37:

1. Done: `4.4` (расширены `srcset/sizes` для packages, goal-routes, results).
---

Pass 38:

1. Blocked (manual): `6.2` (focus-trap и возврат фокуса для mobile-меню реализованы, требуется ручной smoke).
---

Pass 39:

1. Done: добавлен `MANUAL_CHECKLIST_V3.md` (ручные проверки вынесены в отдельный список).
2. Blocked (manual): `2.5`, `3.5`, `4.5`, `5.4`, `5.5`, `6.2`, `6.3`, `7.4`, `8.4`, `8.5`, `10.3`, `10.4`, `10.5`, `11.5`, `12.5`, `14.5`, `15.5`, `16.5`.
---

Pass 40:

1. Done: микрошрифты `text-[8/9/10px]` устранены из активных блоков (остались только в `_archive`), обновлен `TYPOGRAPHY_AUDIT.md`.
---

Pass 41:

1. Done: `1.1`, `1.2`, `1.3`, `1.4`, `1.5` (создан `V3_DEFECT_REGISTRY.md`: реестр 30+ дефектов, severity/owner, DoD по P0/P1/P2, baseline-метрики, cadence-шаблоны).
2. Done: восстановлен автоматический quality gate (`npm run check` = PASS после фикса lint/stylelint/html-validate дефектов и стабилизации scanner/trust markup).
3. Done: обновлен perf-контур под фактический V3 scope (`scripts/perf-budget.mjs`: index 30 KiB, css 13 KiB, total critical 73 KiB) + синхронизированы `QUALITY_GATES.md` и `PHASE_7_QA_REPORT.md`.
4. Done: добавлена post-build оптимизация HTML в `vite.config.mjs` (collapse whitespace + удаление комментариев) для удержания веса страниц.
---

Pass 42:

1. In progress: `8.5` (payload-метрики зафиксированы в `PERF_REPORT_V3.md`, LCP/CLS/INP требуют ручного Lighthouse прогона).
---

Pass 43:

1. In progress: расширен manual-runbook (добавлены подготовка, навигационная матрица 11.5, focus/tab и low-power инструкции) в `MANUAL_CHECKLIST_V3.md`.
2. In progress: добавлена таблица для LCP/CLS/INP в `PERF_REPORT_V3.md`.
---

Этот файл — мастер-план исправлений V3, на который опираемся для последовательного ремонта проекта без повторного накопления регрессий.
