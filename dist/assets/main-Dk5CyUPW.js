(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const L=document.body,ae=(L.dataset.phone||"79260899019").replace(/\D/g,""),ce="Переход в чат...",pe=window.matchMedia("(prefers-reduced-motion: reduce)"),ye=pe.matches,he=!!(navigator.connection&&navigator.connection.saveData),ve=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,Ae=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,y=ve||Ae,h=ye||he,le=window.matchMedia("(pointer: fine)").matches;h&&L.classList.add("reduced-effects");y&&L.classList.add("low-power-effects");const g=document.getElementById("mobile-menu-toggle"),m=document.getElementById("mobile-menu");let S=null;const de=()=>m?Array.from(m.querySelectorAll('a,button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],$=()=>{if(!(!g||!m)){if(g.setAttribute("aria-expanded","false"),m.classList.add("hidden"),m.setAttribute("aria-hidden","true"),L.classList.remove("menu-open"),S&&typeof S.focus=="function")try{S.focus({preventScroll:!0})}catch{S.focus()}S=null}},Ee=()=>{if(!g||!m)return;S=document.activeElement,g.setAttribute("aria-expanded","true"),m.classList.remove("hidden"),m.setAttribute("aria-hidden","false"),L.classList.add("menu-open");const e=de();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})};g&&m&&(g.addEventListener("click",()=>{g.getAttribute("aria-expanded")==="true"?$():Ee()}),m.querySelectorAll("a").forEach(e=>{e.addEventListener("click",$)}),document.addEventListener("click",e=>{if(!(g.getAttribute("aria-expanded")==="true"))return;const n=e.target.closest("#mobile-menu"),s=e.target.closest("#mobile-menu-toggle");!n&&!s&&$()}),document.addEventListener("keydown",e=>{if(e.key==="Escape"&&$(),!(g.getAttribute("aria-expanded")==="true")||e.key!=="Tab")return;const n=de();if(!n.length)return;const s=n[0],r=n[n.length-1],i=document.activeElement;e.shiftKey&&i===s?(e.preventDefault(),r.focus()):!e.shiftKey&&i===r&&(e.preventDefault(),s.focus())}));window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),ze(),Be()});const V=document.querySelector(".cursor-dot"),K=document.querySelector(".cursor-circle"),k=document.getElementById("spotlight");let w=window.innerWidth/2,T=window.innerHeight/2,X=w,j=T,P=!1,ue=0;const fe=()=>{if(!P)return;const e=.16;if(X+=(w-X)*e,j+=(T-j)*e,K&&(K.style.transform=`translate3d(${X}px, ${j}px, 0) translate(-50%, -50%)`),Date.now()-ue>1200){P=!1;return}requestAnimationFrame(fe)};!h&&!y&&le&&V&&K&&k&&(k.style.setProperty("--x",`${w}px`),k.style.setProperty("--y",`${T}px`),document.addEventListener("mousemove",e=>{w=e.clientX,T=e.clientY,ue=Date.now(),V.style.transform=`translate3d(${w}px, ${T}px, 0) translate(-50%, -50%)`,k.style.setProperty("--x",`${w}px`),k.style.setProperty("--y",`${T}px`),P||(P=!0,requestAnimationFrame(fe))}));document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>L.classList.add("hovering")),e.addEventListener("mouseleave",()=>L.classList.remove("hovering"))});const J=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&n.target.classList.add("visible")})},{threshold:y?.06:.12});J.forEach((t,n)=>{if(t.dataset.revealDelay&&!y)t.style.transitionDelay=t.dataset.revealDelay;else if(!y){const s=n%4;t.style.transitionDelay=`${s*60}ms`}e.observe(t)})}else J.forEach(e=>e.classList.add("visible"));const H=Array.from(document.querySelectorAll("[data-nav-section]"));if(H.length&&"IntersectionObserver"in window){const e=new Map;H.forEach(s=>{const r=s.dataset.navSection||"";!r||!document.getElementById(r)||(e.has(r)||e.set(r,[]),e.get(r).push(s))});const t=Array.from(e.keys()).map(s=>document.getElementById(s)).filter(Boolean),n=s=>{H.forEach(r=>{const i=r.dataset.navSection===s;r.classList.toggle("is-active",i),r.setAttribute("aria-current",i?"true":"false")})};if(t.length){const s=new IntersectionObserver(r=>{r.forEach(i=>{if(!i.isIntersecting)return;const o=i.target.id;n(o)})},{rootMargin:"-35% 0px -55% 0px",threshold:.01});t.forEach(r=>s.observe(r))}}const q=document.getElementById("scan-line"),_=document.getElementById("scanner")||document.getElementById("scanner-section");q&&_&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&!h&&!y?q.classList.add("animate-scan"):q.classList.remove("animate-scan")})},{threshold:.22}).observe(_):q&&!h&&!y&&q.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(h||y)return;const t=e.target.closest(".ripple-container");if(!t)return;const n=document.createElement("span"),s=Math.max(t.clientWidth,t.clientHeight),r=s/2,i=t.getBoundingClientRect();n.style.width=n.style.height=`${s}px`,n.style.left=`${e.clientX-i.left-r}px`,n.style.top=`${e.clientY-i.top-r}px`,n.classList.add("ripple");const o=t.querySelector(".ripple");o&&o.remove(),t.appendChild(n)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;e.preventDefault();const n=t.innerText,s=t.offsetWidth;t.style.width=`${s}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=ce,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=n,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const be={head:{title:"Перегрузка головы",med:"Ментальное напряжение",image:"/assets/images/scanner/zone-head.jpg",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",image:"/assets/images/scanner/zone-neck.jpg",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",image:"/assets/images/scanner/zone-shoulders.jpg",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общую напряженность.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины/поясницы",image:"/assets/images/scanner/zone-back.jpg",desc:"Зажим в спине и пояснице влияет на осанку, сон и энергию. В протокол включим мягкую глубинную проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина и поясница, хочу подобрать индивидуальный сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",image:"/assets/images/scanner/zone-legs.jpg",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},Le={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",legs:"legs"};let me="",W,M=!1,l=null,z=null,C=null,R=null,Y=null,p=null,E=null,D=[],O=[],x=null,ee=!1;const Se=(e,t)=>{if(clearTimeout(W),e.innerText="",h){e.innerText=t;return}let n=0;const s=()=>{e.innerText+=t.charAt(n),n+=1,n<t.length&&(W=setTimeout(s,14))};s()},ge=e=>{D.forEach(t=>{const n=t.dataset.point===e;t.classList.toggle("selected",n),t.setAttribute("aria-pressed",String(n))}),O.forEach(t=>{const n=t.dataset.zoneShortcut===e;t.classList.toggle("is-active",n),t.setAttribute("aria-pressed",String(n))})},N=(e,t,n=!1)=>{if(!l||!C||!R||!Y||!p)return;const s=l.dataset.active||"";if(l.classList.contains("open")&&s===e){Z();return}const r=be[e];if(!r)return;navigator.vibrate&&navigator.vibrate(10),ge(e),x=t||document.activeElement,me=r.msg,C.innerText=r.title,R.innerText=r.med,Se(Y,r.desc),r.image?l.style.setProperty("--zone-image",`url("${r.image}")`):l.style.removeProperty("--zone-image"),l.dataset.active=e,l.classList.add("open"),l.setAttribute("aria-hidden","false"),z&&(z.dataset.activeZone=e),n&&requestAnimationFrame(()=>{if(E&&typeof E.focus=="function")try{E.focus({preventScroll:!0})}catch{E.focus()}});const i=Le[e];if(i){const o=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${i}"]`);o&&o.click()}},Z=()=>{if(l){if(clearTimeout(W),l.classList.remove("open"),l.dataset.active="",l.setAttribute("aria-hidden","true"),l.style.removeProperty("--zone-image"),z&&(z.dataset.activeZone=""),ge(""),x&&typeof x.focus=="function")try{x.focus({preventScroll:!0})}catch{x.focus()}x=null}},xe=()=>{if(!p)return;navigator.vibrate&&navigator.vibrate(18);const e=p.innerText;p.innerText=ce;const t=encodeURIComponent(me||"Здравствуйте! Хочу записаться на массаж.");setTimeout(()=>{window.location.href=`https://wa.me/${ae}?text=${t}`,setTimeout(()=>{p.innerText=e},900)},550)},I=()=>ee?!0:(l=document.getElementById("zone-popup"),z=document.getElementById("scanner-container"),C=document.getElementById("zone-title"),R=document.getElementById("zone-med"),Y=document.getElementById("zone-desc"),p=document.getElementById("zone-cta"),E=document.getElementById("zone-close"),D=Array.from(document.querySelectorAll(".active-point")),O=Array.from(document.querySelectorAll("[data-zone-shortcut]")),!l||!C||!R||!Y||!p||!D.length&&!O.length?!1:(D.forEach(e=>{e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup")}),O.forEach(e=>{e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup")}),p&&p.addEventListener("click",xe),E&&E.addEventListener("click",Z),ee=!0,!0)),F=e=>{if(!(e instanceof Element))return null;const t=e.closest(".active-point");if(t)return{zone:t.getAttribute("data-point"),trigger:t};const n=e.closest("[data-zone-shortcut]");return n?{zone:n.getAttribute("data-zone-shortcut"),trigger:n}:null};document.addEventListener("pointerdown",e=>{const t=F(e.target);t&&I()&&(M=!0,e.preventDefault(),N(t.zone,t.trigger,!1))});document.addEventListener("touchstart",e=>{const t=F(e.target);t&&I()&&(M=!0,e.preventDefault(),N(t.zone,t.trigger,!1))},{passive:!1});document.addEventListener("click",e=>{const t=F(e.target);if(t){if(!I())return;if(e.preventDefault(),M){M=!1;return}N(t.zone,t.trigger,!1);return}if(!l||!l.classList.contains("open"))return;const n=e.target.closest("#zone-popup"),s=e.target.closest(".active-point"),r=e.target.closest("[data-zone-shortcut]");!n&&!s&&!r&&Z()});document.addEventListener("keydown",e=>{if(e.key==="Enter"||e.key===" "){const o=F(e.target);if(!o||!I())return;e.preventDefault(),N(o.zone,o.trigger,!0);return}if(!l||!l.classList.contains("open"))return;if(e.key==="Escape"){e.preventDefault(),Z();return}if(e.key!=="Tab")return;const n=Array.from(l.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(o=>!o.hasAttribute("disabled"));if(!n.length)return;const s=n[0],r=n[n.length-1],i=document.activeElement;e.shiftKey&&i===s?(e.preventDefault(),r.focus()):!e.shiftKey&&i===r&&(e.preventDefault(),s.focus())});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I,{once:!0}):I();const we=Array.from(document.querySelectorAll("[data-compare]"));we.forEach(e=>{const t=e.querySelector(".compare-range");if(!t)return;const n=()=>{e.style.setProperty("--compare",`${t.value}%`)};t.addEventListener("input",n),t.addEventListener("change",n),n()});const Te=Array.from(document.querySelectorAll("[data-service-tabs]"));Te.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-service-tab]")),n=Array.from(e.querySelectorAll("[data-service-panel]"));if(!t.length||!n.length)return;const s=(i,o=!1)=>{t.forEach(a=>{const c=a.dataset.serviceTab===i;a.classList.toggle("is-active",c),a.setAttribute("aria-selected",String(c)),c&&o&&a.focus()}),n.forEach(a=>{const c=a.dataset.servicePanel===i;a.classList.toggle("is-active",c),a.setAttribute("aria-hidden",String(!c))})},r=t.find(i=>i.classList.contains("is-active"))||t[0];r&&s(r.dataset.serviceTab),t.forEach((i,o)=>{i.addEventListener("click",()=>s(i.dataset.serviceTab)),i.addEventListener("keydown",a=>{if(a.key==="ArrowRight"||a.key==="ArrowDown"){a.preventDefault();const c=t[o+1]||t[0];s(c.dataset.serviceTab,!0)}if(a.key==="ArrowLeft"||a.key==="ArrowUp"){a.preventDefault();const c=t[o-1]||t[t.length-1];s(c.dataset.serviceTab,!0)}})})});const Ie=Array.from(document.querySelectorAll("[data-accordion]"));Ie.forEach(e=>{const t=Array.from(e.querySelectorAll(".trust-accordion-item"));if(!t.length)return;const n=(s,r)=>{s&&(r?(s.style.height=`${s.scrollHeight}px`,setTimeout(()=>{s.style.height="auto"},260)):(s.style.height==="auto"&&(s.style.height=`${s.scrollHeight}px`),requestAnimationFrame(()=>{s.style.height="0px"})))};t.forEach(s=>{const r=s.querySelector(".trust-accordion-trigger"),i=s.querySelector(".trust-accordion-panel");if(!r||!i)return;const o=s.classList.contains("is-open");r.setAttribute("aria-expanded",String(o)),i.setAttribute("aria-hidden",String(!o)),n(i,o),r.addEventListener("click",()=>{const a=!s.classList.contains("is-open");t.forEach(c=>{const u=c.querySelector(".trust-accordion-trigger"),d=c.querySelector(".trust-accordion-panel"),f=c===s?a:!1;c.classList.toggle("is-open",f),u&&u.setAttribute("aria-expanded",String(f)),d&&(d.setAttribute("aria-hidden",String(!f)),n(d,f))})})})});const ke=Array.from(document.querySelectorAll("[data-scenario-carousel]"));ke.forEach(e=>{const t=e.querySelector(".scenario-track"),n=e.querySelector(".scenario-prev"),s=e.querySelector(".scenario-next");if(!t)return;const r=i=>{const o=t.querySelector(".scenario-card"),a=o?o.getBoundingClientRect().width:260;t.scrollBy({left:i*(a+20),behavior:"smooth"})};n&&n.addEventListener("click",()=>r(-1)),s&&s.addEventListener("click",()=>r(1))});const qe=Array.from(document.querySelectorAll("[data-expectation-switch]"));qe.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-expectation-tab]")),n=e.closest("section")||document,s=Array.from(n.querySelectorAll("[data-expectation-panel]"));if(!t.length||!s.length)return;const r=o=>{t.forEach(a=>{const c=a.dataset.expectationTab===o;a.classList.toggle("is-active",c),a.setAttribute("aria-selected",String(c))}),s.forEach(a=>{const c=a.dataset.expectationPanel===o;a.classList.toggle("is-active",c),a.setAttribute("aria-hidden",String(!c))})},i=t.find(o=>o.classList.contains("is-active"))||t[0];i&&r(i.dataset.expectationTab),t.forEach(o=>{o.addEventListener("click",()=>r(o.dataset.expectationTab))})});const b=Array.from(document.querySelectorAll(".step-btn[data-step]")),te=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),re=document.getElementById("ritual-progress"),ne=document.getElementById("ritual-prev"),se=document.getElementById("ritual-next");let A=1;const v=(e,t=!1)=>{if(!b.length||!te.length)return;const n=b.length,s=Math.min(Math.max(e,1),n);A=s,b.forEach(r=>{const o=Number(r.dataset.step)===s;r.classList.toggle("active",o),r.setAttribute("aria-selected",String(o)),o&&t&&r.focus()}),te.forEach(r=>{const o=Number(r.id.replace("ritual-step-",""))===s;r.classList.toggle("is-active",o),r.setAttribute("aria-hidden",String(!o))}),re&&(re.style.width=`${s/n*100}%`)};if(b.length){const e=b.find(n=>n.classList.contains("active")),t=e?Number(e.dataset.step):1;if(v(t),b.forEach(n=>{const s=Number(n.dataset.step);n.addEventListener("click",()=>v(s)),n.addEventListener("keydown",r=>{r.key==="ArrowRight"&&(r.preventDefault(),v(A+1,!0)),r.key==="ArrowLeft"&&(r.preventDefault(),v(A-1,!0))})}),ne&&ne.addEventListener("click",()=>v(A-1)),se&&se.addEventListener("click",()=>v(A+1)),!h){const n=document.getElementById("ritual");let s;const r=()=>{s||(s=setInterval(()=>{const o=A>=b.length?1:A+1;v(o)},5200))},i=()=>{clearInterval(s),s=null};n&&"IntersectionObserver"in window&&new IntersectionObserver(a=>{a.forEach(c=>{c.isIntersecting?r():i()})},{threshold:.4}).observe(n)}}const B={};let oe=!1;function Be(){if(oe)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),n=document.getElementById("protocol-note"),s=document.getElementById("protocol-cta");if(!e.length||!t||!n||!s)return;const r=(o,a)=>{const c=a.closest("[data-protocol-group]");c&&(c.querySelectorAll(".protocol-chip").forEach(u=>{const d=u===a;u.classList.toggle("is-active",d),u.setAttribute("aria-pressed",String(d))}),B[o]={value:a.dataset.value||"",label:a.dataset.label||a.innerText.trim()},i())},i=()=>{var f,U,G,Q;const o=((f=B.goal)==null?void 0:f.label)||"Восстановление",a=((U=B.zone)==null?void 0:U.label)||"Спина и плечевой пояс",c=((G=B.tempo)==null?void 0:G.label)||"Мягкая интенсивность",u=((Q=B.duration)==null?void 0:Q.label)||"60 минут";t.innerText=`${o} · ${a} · ${c} · ${u}.`,n.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const d=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${o}, ${a}, интенсивность: ${c}, длительность: ${u}.`);s.href=`https://wa.me/${ae}?text=${d}`};e.forEach(o=>{const a=o.dataset.protocolGroup,c=Array.from(o.querySelectorAll(".protocol-chip"));c.forEach(d=>{d.setAttribute("aria-pressed","false"),d.addEventListener("click",()=>r(a,d)),d.addEventListener("keydown",f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),r(a,d))})});const u=c.find(d=>d.classList.contains("is-active"))||c[0];u&&r(a,u)}),oe=!0}function ze(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const n=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(s,2300+Math.random()*1200)},s=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&n()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});const ie=Array.from(document.querySelectorAll("[data-tilt-card]"));ie.length&&!h&&le&&ie.forEach(n=>{n.addEventListener("mousemove",s=>{const r=n.getBoundingClientRect(),i=(s.clientX-r.left)/r.width-.5,o=(s.clientY-r.top)/r.height-.5,a=i*8,c=-o*8,u=i*12,d=o*12;n.style.transform=`translate3d(${u}px, ${d}px, 0) rotateX(${c}deg) rotateY(${a}deg)`}),n.addEventListener("mouseleave",()=>{n.style.transform=""})});
