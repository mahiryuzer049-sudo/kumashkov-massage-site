(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const b=document.body,ne=(b.dataset.phone||"79260899019").replace(/\D/g,""),re="Переход в чат...",fe=window.matchMedia("(prefers-reduced-motion: reduce)"),me=fe.matches,pe=!!(navigator.connection&&navigator.connection.saveData),ge=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,ye=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,g=ge||ye,y=me||pe,se=window.matchMedia("(pointer: fine)").matches;y&&b.classList.add("reduced-effects");g&&b.classList.add("low-power-effects");const p=document.getElementById("mobile-menu-toggle"),m=document.getElementById("mobile-menu");let L=null;const oe=()=>m?Array.from(m.querySelectorAll('a,button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],P=()=>{if(!(!p||!m)){if(p.setAttribute("aria-expanded","false"),m.classList.add("hidden"),m.setAttribute("aria-hidden","true"),b.classList.remove("menu-open"),L&&typeof L.focus=="function")try{L.focus({preventScroll:!0})}catch{L.focus()}L=null}},he=()=>{if(!p||!m)return;L=document.activeElement,p.setAttribute("aria-expanded","true"),m.classList.remove("hidden"),m.setAttribute("aria-hidden","false"),b.classList.add("menu-open");const e=oe();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})};p&&m&&(p.addEventListener("click",()=>{p.getAttribute("aria-expanded")==="true"?P():he()}),m.querySelectorAll("a").forEach(e=>{e.addEventListener("click",P)}),document.addEventListener("click",e=>{if(!(p.getAttribute("aria-expanded")==="true"))return;const n=e.target.closest("#mobile-menu"),r=e.target.closest("#mobile-menu-toggle");!n&&!r&&P()}),document.addEventListener("keydown",e=>{if(e.key==="Escape"&&P(),!(p.getAttribute("aria-expanded")==="true")||e.key!=="Tab")return;const n=oe();if(!n.length)return;const r=n[0],s=n[n.length-1],o=document.activeElement;e.shiftKey&&o===r?(e.preventDefault(),s.focus()):!e.shiftKey&&o===s&&(e.preventDefault(),r.focus())}));window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),Ie(),ke()});const j=document.querySelector(".cursor-dot"),Y=document.querySelector(".cursor-circle"),I=document.getElementById("spotlight");let x=window.innerWidth/2,w=window.innerHeight/2,C=x,M=w,D=!1,ie=0;const ae=()=>{if(!D)return;const e=.16;if(C+=(x-C)*e,M+=(w-M)*e,Y&&(Y.style.transform=`translate3d(${C}px, ${M}px, 0) translate(-50%, -50%)`),Date.now()-ie>1200){D=!1;return}requestAnimationFrame(ae)};!y&&!g&&se&&j&&Y&&I&&(I.style.setProperty("--x",`${x}px`),I.style.setProperty("--y",`${w}px`),document.addEventListener("mousemove",e=>{x=e.clientX,w=e.clientY,ie=Date.now(),j.style.transform=`translate3d(${x}px, ${w}px, 0) translate(-50%, -50%)`,I.style.setProperty("--x",`${x}px`),I.style.setProperty("--y",`${w}px`),D||(D=!0,requestAnimationFrame(ae))}));document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>b.classList.add("hovering")),e.addEventListener("mouseleave",()=>b.classList.remove("hovering"))});const H=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&n.target.classList.add("visible")})},{threshold:g?.06:.12});H.forEach((t,n)=>{if(t.dataset.revealDelay&&!g)t.style.transitionDelay=t.dataset.revealDelay;else if(!g){const r=n%4;t.style.transitionDelay=`${r*60}ms`}e.observe(t)})}else H.forEach(e=>e.classList.add("visible"));const R=Array.from(document.querySelectorAll("[data-nav-section]"));if(R.length&&"IntersectionObserver"in window){const e=new Map;R.forEach(r=>{const s=r.dataset.navSection||"";!s||!document.getElementById(s)||(e.has(s)||e.set(s,[]),e.get(s).push(r))});const t=Array.from(e.keys()).map(r=>document.getElementById(r)).filter(Boolean),n=r=>{R.forEach(s=>{const o=s.dataset.navSection===r;s.classList.toggle("is-active",o),s.setAttribute("aria-current",o?"true":"false")})};if(t.length){const r=new IntersectionObserver(s=>{s.forEach(o=>{if(!o.isIntersecting)return;const i=o.target.id;n(i)})},{rootMargin:"-35% 0px -55% 0px",threshold:.01});t.forEach(s=>r.observe(s))}}const q=document.getElementById("scan-line"),K=document.getElementById("scanner")||document.getElementById("scanner-section");q&&K&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&!y&&!g?q.classList.add("animate-scan"):q.classList.remove("animate-scan")})},{threshold:.22}).observe(K):q&&!y&&!g&&q.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(y||g)return;const t=e.target.closest(".ripple-container");if(!t)return;const n=document.createElement("span"),r=Math.max(t.clientWidth,t.clientHeight),s=r/2,o=t.getBoundingClientRect();n.style.width=n.style.height=`${r}px`,n.style.left=`${e.clientX-o.left-s}px`,n.style.top=`${e.clientY-o.top-s}px`,n.classList.add("ripple");const i=t.querySelector(".ripple");i&&i.remove(),t.appendChild(n)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;e.preventDefault();const n=t.innerText,r=t.offsetWidth;t.style.width=`${r}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=re,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=n,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const ve={head:{title:"Перегрузка головы",med:"Ментальное напряжение",image:"/assets/images/scanner/zone-head.jpg",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",image:"/assets/images/scanner/zone-neck.jpg",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",image:"/assets/images/scanner/zone-shoulders.jpg",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общую напряженность.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины/поясницы",image:"/assets/images/scanner/zone-back.jpg",desc:"Зажим в спине и пояснице влияет на осанку, сон и энергию. В протокол включим мягкую глубинную проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина и поясница, хочу подобрать индивидуальный сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",image:"/assets/images/scanner/zone-legs.jpg",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},Ee={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",legs:"legs"};let ce="",N,k=!1;const l=document.getElementById("zone-popup"),z=document.getElementById("scanner-container"),V=document.getElementById("zone-title"),W=document.getElementById("zone-med"),U=document.getElementById("zone-desc"),E=document.getElementById("zone-cta"),T=document.getElementById("zone-close"),Ae=(e,t)=>{if(clearTimeout(N),e.innerText="",y){e.innerText=t;return}let n=0;const r=()=>{e.innerText+=t.charAt(n),n+=1,n<t.length&&(N=setTimeout(r,14))};r()},le=Array.from(document.querySelectorAll(".active-point")),de=Array.from(document.querySelectorAll("[data-zone-shortcut]"));let S=null;const ue=e=>{le.forEach(t=>{const n=t.dataset.point===e;t.classList.toggle("selected",n),t.setAttribute("aria-pressed",String(n))}),de.forEach(t=>{const n=t.dataset.zoneShortcut===e;t.classList.toggle("is-active",n),t.setAttribute("aria-pressed",String(n))})},$=(e,t)=>{if(!l||!V||!W||!U||!E)return;const n=l.dataset.active||"";if(l.classList.contains("open")&&n===e){O();return}const r=ve[e];if(!r)return;if(navigator.vibrate&&navigator.vibrate(10),ue(e),S=t||document.activeElement,ce=r.msg,V.innerText=r.title,W.innerText=r.med,Ae(U,r.desc),r.image?l.style.setProperty("--zone-image",`url("${r.image}")`):l.style.removeProperty("--zone-image"),l.dataset.active=e,l.classList.add("open"),l.setAttribute("aria-hidden","false"),z&&(z.dataset.activeZone=e),l&&typeof l.getBoundingClientRect=="function"){const o=l.getBoundingClientRect();!(o.top>=0&&o.bottom<=window.innerHeight)&&typeof l.scrollIntoView=="function"&&l.scrollIntoView({behavior:"smooth",block:"center"})}requestAnimationFrame(()=>{if(T&&typeof T.focus=="function")try{T.focus({preventScroll:!0})}catch{T.focus()}});const s=Ee[e];if(s){const o=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${s}"]`);o&&o.click()}},O=()=>{if(l){if(clearTimeout(N),l.classList.remove("open"),l.dataset.active="",l.setAttribute("aria-hidden","true"),l.style.removeProperty("--zone-image"),z&&(z.dataset.activeZone=""),ue(""),S&&typeof S.focus=="function")try{S.focus({preventScroll:!0})}catch{S.focus()}S=null}},be=()=>{if(!E)return;navigator.vibrate&&navigator.vibrate(18);const e=E.innerText;E.innerText=re;const t=encodeURIComponent(ce||"Здравствуйте! Хочу записаться на массаж.");setTimeout(()=>{window.location.href=`https://wa.me/${ne}?text=${t}`,setTimeout(()=>{E.innerText=e},900)},550)};le.forEach(e=>{const t=e.getAttribute("data-point");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("pointerdown",n=>{k=!0,n.preventDefault(),n.stopPropagation(),$(t,e)}),e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),k){k=!1;return}$(t,e)}),e.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),n.stopPropagation(),$(t,e))})});de.forEach(e=>{const t=e.getAttribute("data-zone-shortcut");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("pointerdown",n=>{k=!0,n.preventDefault(),n.stopPropagation(),$(t,e)}),e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),k){k=!1;return}$(t,e)})});E&&E.addEventListener("click",be);T&&T.addEventListener("click",O);document.addEventListener("click",e=>{if(!l||!l.classList.contains("open"))return;const t=e.target.closest("#zone-popup"),n=e.target.closest(".active-point"),r=e.target.closest("[data-zone-shortcut]");!t&&!n&&!r&&O()});document.addEventListener("keydown",e=>{if(!l||!l.classList.contains("open"))return;if(e.key==="Escape"){e.preventDefault(),O();return}if(e.key!=="Tab")return;const t=Array.from(l.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(o=>!o.hasAttribute("disabled"));if(!t.length)return;const n=t[0],r=t[t.length-1],s=document.activeElement;e.shiftKey&&s===n?(e.preventDefault(),r.focus()):!e.shiftKey&&s===r&&(e.preventDefault(),n.focus())});const Le=Array.from(document.querySelectorAll("[data-compare]"));Le.forEach(e=>{const t=e.querySelector(".compare-range");if(!t)return;const n=()=>{e.style.setProperty("--compare",`${t.value}%`)};t.addEventListener("input",n),t.addEventListener("change",n),n()});const Se=Array.from(document.querySelectorAll("[data-service-tabs]"));Se.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-service-tab]")),n=Array.from(e.querySelectorAll("[data-service-panel]"));if(!t.length||!n.length)return;const r=(o,i=!1)=>{t.forEach(a=>{const c=a.dataset.serviceTab===o;a.classList.toggle("is-active",c),a.setAttribute("aria-selected",String(c)),c&&i&&a.focus()}),n.forEach(a=>{const c=a.dataset.servicePanel===o;a.classList.toggle("is-active",c),a.setAttribute("aria-hidden",String(!c))})},s=t.find(o=>o.classList.contains("is-active"))||t[0];s&&r(s.dataset.serviceTab),t.forEach((o,i)=>{o.addEventListener("click",()=>r(o.dataset.serviceTab)),o.addEventListener("keydown",a=>{if(a.key==="ArrowRight"||a.key==="ArrowDown"){a.preventDefault();const c=t[i+1]||t[0];r(c.dataset.serviceTab,!0)}if(a.key==="ArrowLeft"||a.key==="ArrowUp"){a.preventDefault();const c=t[i-1]||t[t.length-1];r(c.dataset.serviceTab,!0)}})})});const xe=Array.from(document.querySelectorAll("[data-accordion]"));xe.forEach(e=>{const t=Array.from(e.querySelectorAll(".trust-accordion-item"));if(!t.length)return;const n=(r,s)=>{r&&(s?(r.style.height=`${r.scrollHeight}px`,setTimeout(()=>{r.style.height="auto"},260)):(r.style.height==="auto"&&(r.style.height=`${r.scrollHeight}px`),requestAnimationFrame(()=>{r.style.height="0px"})))};t.forEach(r=>{const s=r.querySelector(".trust-accordion-trigger"),o=r.querySelector(".trust-accordion-panel");if(!s||!o)return;const i=r.classList.contains("is-open");s.setAttribute("aria-expanded",String(i)),o.setAttribute("aria-hidden",String(!i)),n(o,i),s.addEventListener("click",()=>{const a=!r.classList.contains("is-open");t.forEach(c=>{const u=c.querySelector(".trust-accordion-trigger"),d=c.querySelector(".trust-accordion-panel"),f=c===r?a:!1;c.classList.toggle("is-open",f),u&&u.setAttribute("aria-expanded",String(f)),d&&(d.setAttribute("aria-hidden",String(!f)),n(d,f))})})})});const we=Array.from(document.querySelectorAll("[data-scenario-carousel]"));we.forEach(e=>{const t=e.querySelector(".scenario-track"),n=e.querySelector(".scenario-prev"),r=e.querySelector(".scenario-next");if(!t)return;const s=o=>{const i=t.querySelector(".scenario-card"),a=i?i.getBoundingClientRect().width:260;t.scrollBy({left:o*(a+20),behavior:"smooth"})};n&&n.addEventListener("click",()=>s(-1)),r&&r.addEventListener("click",()=>s(1))});const Te=Array.from(document.querySelectorAll("[data-expectation-switch]"));Te.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-expectation-tab]")),n=e.closest("section")||document,r=Array.from(n.querySelectorAll("[data-expectation-panel]"));if(!t.length||!r.length)return;const s=i=>{t.forEach(a=>{const c=a.dataset.expectationTab===i;a.classList.toggle("is-active",c),a.setAttribute("aria-selected",String(c))}),r.forEach(a=>{const c=a.dataset.expectationPanel===i;a.classList.toggle("is-active",c),a.setAttribute("aria-hidden",String(!c))})},o=t.find(i=>i.classList.contains("is-active"))||t[0];o&&s(o.dataset.expectationTab),t.forEach(i=>{i.addEventListener("click",()=>s(i.dataset.expectationTab))})});const A=Array.from(document.querySelectorAll(".step-btn[data-step]")),G=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),Q=document.getElementById("ritual-progress"),J=document.getElementById("ritual-prev"),_=document.getElementById("ritual-next");let v=1;const h=(e,t=!1)=>{if(!A.length||!G.length)return;const n=A.length,r=Math.min(Math.max(e,1),n);v=r,A.forEach(s=>{const i=Number(s.dataset.step)===r;s.classList.toggle("active",i),s.setAttribute("aria-selected",String(i)),i&&t&&s.focus()}),G.forEach(s=>{const i=Number(s.id.replace("ritual-step-",""))===r;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))}),Q&&(Q.style.width=`${r/n*100}%`)};if(A.length){const e=A.find(n=>n.classList.contains("active")),t=e?Number(e.dataset.step):1;if(h(t),A.forEach(n=>{const r=Number(n.dataset.step);n.addEventListener("click",()=>h(r)),n.addEventListener("keydown",s=>{s.key==="ArrowRight"&&(s.preventDefault(),h(v+1,!0)),s.key==="ArrowLeft"&&(s.preventDefault(),h(v-1,!0))})}),J&&J.addEventListener("click",()=>h(v-1)),_&&_.addEventListener("click",()=>h(v+1)),!y){const n=document.getElementById("ritual");let r;const s=()=>{r||(r=setInterval(()=>{const i=v>=A.length?1:v+1;h(i)},5200))},o=()=>{clearInterval(r),r=null};n&&"IntersectionObserver"in window&&new IntersectionObserver(a=>{a.forEach(c=>{c.isIntersecting?s():o()})},{threshold:.4}).observe(n)}}const B={};let ee=!1;function ke(){if(ee)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),n=document.getElementById("protocol-note"),r=document.getElementById("protocol-cta");if(!e.length||!t||!n||!r)return;const s=(i,a)=>{const c=a.closest("[data-protocol-group]");c&&(c.querySelectorAll(".protocol-chip").forEach(u=>{const d=u===a;u.classList.toggle("is-active",d),u.setAttribute("aria-pressed",String(d))}),B[i]={value:a.dataset.value||"",label:a.dataset.label||a.innerText.trim()},o())},o=()=>{var f,Z,F,X;const i=((f=B.goal)==null?void 0:f.label)||"Восстановление",a=((Z=B.zone)==null?void 0:Z.label)||"Спина и плечевой пояс",c=((F=B.tempo)==null?void 0:F.label)||"Мягкая интенсивность",u=((X=B.duration)==null?void 0:X.label)||"60 минут";t.innerText=`${i} · ${a} · ${c} · ${u}.`,n.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const d=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${i}, ${a}, интенсивность: ${c}, длительность: ${u}.`);r.href=`https://wa.me/${ne}?text=${d}`};e.forEach(i=>{const a=i.dataset.protocolGroup,c=Array.from(i.querySelectorAll(".protocol-chip"));c.forEach(d=>{d.setAttribute("aria-pressed","false"),d.addEventListener("click",()=>s(a,d)),d.addEventListener("keydown",f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),s(a,d))})});const u=c.find(d=>d.classList.contains("is-active"))||c[0];u&&s(a,u)}),ee=!0}function Ie(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const n=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(r,2300+Math.random()*1200)},r=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&n()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});const te=Array.from(document.querySelectorAll("[data-tilt-card]"));te.length&&!y&&se&&te.forEach(n=>{n.addEventListener("mousemove",r=>{const s=n.getBoundingClientRect(),o=(r.clientX-s.left)/s.width-.5,i=(r.clientY-s.top)/s.height-.5,a=o*8,c=-i*8,u=o*12,d=i*12;n.style.transform=`translate3d(${u}px, ${d}px, 0) rotateX(${c}deg) rotateY(${a}deg)`}),n.addEventListener("mouseleave",()=>{n.style.transform=""})});
