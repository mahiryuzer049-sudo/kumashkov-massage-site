(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const v=document.body,J=(v.dataset.phone||"79260899019").replace(/\D/g,""),_="Переход в чат...",ie=window.matchMedia("(prefers-reduced-motion: reduce)"),ae=ie.matches,ce=!!(navigator.connection&&navigator.connection.saveData),le=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,de=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,k=le||de,E=ae||ce,ue=window.matchMedia("(pointer: fine)").matches;E&&v.classList.add("reduced-effects");k&&v.classList.add("low-power-effects");const m=document.getElementById("mobile-menu-toggle"),f=document.getElementById("mobile-menu"),T=()=>{!m||!f||(m.setAttribute("aria-expanded","false"),f.classList.add("hidden"),f.setAttribute("aria-hidden","true"),v.classList.remove("menu-open"))},me=()=>{!m||!f||(m.setAttribute("aria-expanded","true"),f.classList.remove("hidden"),f.setAttribute("aria-hidden","false"),v.classList.add("menu-open"))};m&&f&&(m.addEventListener("click",()=>{m.getAttribute("aria-expanded")==="true"?T():me()}),f.querySelectorAll("a").forEach(e=>{e.addEventListener("click",T)}),document.addEventListener("click",e=>{if(!(m.getAttribute("aria-expanded")==="true"))return;const n=e.target.closest("#mobile-menu"),o=e.target.closest("#mobile-menu-toggle");!n&&!o&&T()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&T()}));window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),ve(),he()});const Y=document.querySelector(".cursor-dot"),O=document.querySelector(".cursor-circle"),w=document.getElementById("spotlight");let L=window.innerWidth/2,A=window.innerHeight/2,D=L,M=A,B=!1,ee=0;const te=()=>{if(!B)return;const e=.16;if(D+=(L-D)*e,M+=(A-M)*e,O&&(O.style.transform=`translate3d(${D}px, ${M}px, 0) translate(-50%, -50%)`),Date.now()-ee>1200){B=!1;return}requestAnimationFrame(te)};!E&&ue&&Y&&O&&w&&(w.style.setProperty("--x",`${L}px`),w.style.setProperty("--y",`${A}px`),document.addEventListener("mousemove",e=>{L=e.clientX,A=e.clientY,ee=Date.now(),Y.style.transform=`translate3d(${L}px, ${A}px, 0) translate(-50%, -50%)`,w.style.setProperty("--x",`${L}px`),w.style.setProperty("--y",`${A}px`),B||(B=!0,requestAnimationFrame(te))}));document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>v.classList.add("hovering")),e.addEventListener("mouseleave",()=>v.classList.remove("hovering"))});const F=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&n.target.classList.add("visible")})},{threshold:k?.06:.12});F.forEach((t,n)=>{if(t.dataset.revealDelay&&!k)t.style.transitionDelay=t.dataset.revealDelay;else if(!k){const o=n%4;t.style.transitionDelay=`${o*60}ms`}e.observe(t)})}else F.forEach(e=>e.classList.add("visible"));const x=document.getElementById("scan-line"),W=document.getElementById("scanner")||document.getElementById("scanner-section");x&&W&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&!E?x.classList.add("animate-scan"):x.classList.remove("animate-scan")})},{threshold:.22}).observe(W):x&&!E&&x.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(E)return;const t=e.target.closest(".ripple-container");if(!t)return;const n=document.createElement("span"),o=Math.max(t.clientWidth,t.clientHeight),s=o/2,r=t.getBoundingClientRect();n.style.width=n.style.height=`${o}px`,n.style.left=`${e.clientX-r.left-s}px`,n.style.top=`${e.clientY-r.top-s}px`,n.classList.add("ripple");const i=t.querySelector(".ripple");i&&i.remove(),t.appendChild(n)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;e.preventDefault();const n=t.innerText,o=t.offsetWidth;t.style.width=`${o}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=_,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=n,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const fe={head:{title:"Перегрузка головы",med:"Ментальное напряжение",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общую напряженность.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины/поясницы",desc:"Зажим в спине и пояснице влияет на осанку, сон и энергию. В протокол включим мягкую глубинную проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина и поясница, хочу подобрать индивидуальный сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},pe={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",legs:"legs"};let ne="",P;const a=document.getElementById("zone-popup"),$=document.getElementById("scanner-container"),X=document.getElementById("zone-title"),K=document.getElementById("zone-med"),j=document.getElementById("zone-desc"),y=document.getElementById("zone-cta"),q=document.getElementById("zone-close"),ge=(e,t)=>{if(clearTimeout(P),e.innerText="",E){e.innerText=t;return}let n=0;const o=()=>{e.innerText+=t.charAt(n),n+=1,n<t.length&&(P=setTimeout(o,14))};o()},se=Array.from(document.querySelectorAll(".active-point")),oe=Array.from(document.querySelectorAll("[data-zone-shortcut]"));let S=null;const re=e=>{se.forEach(t=>{const n=t.dataset.point===e;t.classList.toggle("selected",n),t.setAttribute("aria-pressed",String(n))}),oe.forEach(t=>{const n=t.dataset.zoneShortcut===e;t.classList.toggle("is-active",n),t.setAttribute("aria-pressed",String(n))})},C=(e,t)=>{if(!a||!X||!K||!j||!y)return;const n=a.dataset.active||"";if(a.classList.contains("open")&&n===e){z();return}const o=fe[e];if(!o)return;navigator.vibrate&&navigator.vibrate(10),re(e),S=t||document.activeElement,ne=o.msg,X.innerText=o.title,K.innerText=o.med,ge(j,o.desc),a.dataset.active=e,a.classList.add("open"),a.setAttribute("aria-hidden","false"),$&&($.dataset.activeZone=e),requestAnimationFrame(()=>{q&&q.focus()});const s=pe[e];if(s){const r=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${s}"]`);r&&r.click()}},z=()=>{a&&(clearTimeout(P),a.classList.remove("open"),a.dataset.active="",a.setAttribute("aria-hidden","true"),$&&($.dataset.activeZone=""),re(""),S&&typeof S.focus=="function"&&S.focus(),S=null)},ye=()=>{if(!y)return;navigator.vibrate&&navigator.vibrate(18);const e=y.innerText;y.innerText=_;const t=encodeURIComponent(ne||"Здравствуйте! Хочу записаться на массаж.");setTimeout(()=>{window.location.href=`https://wa.me/${J}?text=${t}`,setTimeout(()=>{y.innerText=e},900)},550)};se.forEach(e=>{const t=e.getAttribute("data-point");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("click",()=>C(t,e)),e.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),C(t,e))})});oe.forEach(e=>{const t=e.getAttribute("data-zone-shortcut");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("click",()=>{C(t,e)})});y&&y.addEventListener("click",ye);q&&q.addEventListener("click",z);document.addEventListener("click",e=>{if(!a||!a.classList.contains("open"))return;const t=e.target.closest("#zone-popup"),n=e.target.closest(".active-point"),o=e.target.closest("[data-zone-shortcut]");!t&&!n&&!o&&z()});document.addEventListener("keydown",e=>{if(!a||!a.classList.contains("open"))return;if(e.key==="Escape"){e.preventDefault(),z();return}if(e.key!=="Tab")return;const t=Array.from(a.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(r=>!r.hasAttribute("disabled"));if(!t.length)return;const n=t[0],o=t[t.length-1],s=document.activeElement;e.shiftKey&&s===n?(e.preventDefault(),o.focus()):!e.shiftKey&&s===o&&(e.preventDefault(),n.focus())});const h=Array.from(document.querySelectorAll(".step-btn[data-step]")),H=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),U=document.getElementById("ritual-progress"),G=document.getElementById("ritual-prev"),Q=document.getElementById("ritual-next");let g=1;const p=(e,t=!1)=>{if(!h.length||!H.length)return;const n=h.length,o=Math.min(Math.max(e,1),n);g=o,h.forEach(s=>{const i=Number(s.dataset.step)===o;s.classList.toggle("active",i),s.setAttribute("aria-selected",String(i)),i&&t&&s.focus()}),H.forEach(s=>{const i=Number(s.id.replace("ritual-step-",""))===o;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))}),U&&(U.style.width=`${o/n*100}%`)};if(h.length){const e=h.find(n=>n.classList.contains("active")),t=e?Number(e.dataset.step):1;if(p(t),h.forEach(n=>{const o=Number(n.dataset.step);n.addEventListener("click",()=>p(o)),n.addEventListener("keydown",s=>{s.key==="ArrowRight"&&(s.preventDefault(),p(g+1,!0)),s.key==="ArrowLeft"&&(s.preventDefault(),p(g-1,!0))})}),G&&G.addEventListener("click",()=>p(g-1)),Q&&Q.addEventListener("click",()=>p(g+1)),!E){const n=document.getElementById("ritual");let o;const s=()=>{o||(o=setInterval(()=>{const i=g>=h.length?1:g+1;p(i)},5200))},r=()=>{clearInterval(o),o=null};n&&"IntersectionObserver"in window&&new IntersectionObserver(c=>{c.forEach(d=>{d.isIntersecting?s():r()})},{threshold:.4}).observe(n)}}const I={};let V=!1;function he(){if(V)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),n=document.getElementById("protocol-note"),o=document.getElementById("protocol-cta");if(!e.length||!t||!n||!o)return;const s=(i,c)=>{const d=c.closest("[data-protocol-group]");d&&(d.querySelectorAll(".protocol-chip").forEach(u=>{const l=u===c;u.classList.toggle("is-active",l),u.setAttribute("aria-pressed",String(l))}),I[i]={value:c.dataset.value||"",label:c.dataset.label||c.innerText.trim()},r())},r=()=>{var b,N,Z,R;const i=((b=I.goal)==null?void 0:b.label)||"Восстановление",c=((N=I.zone)==null?void 0:N.label)||"Спина и плечевой пояс",d=((Z=I.tempo)==null?void 0:Z.label)||"Мягкая интенсивность",u=((R=I.duration)==null?void 0:R.label)||"60 минут";t.innerText=`${i} · ${c} · ${d} · ${u}.`,n.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const l=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${i}, ${c}, интенсивность: ${d}, длительность: ${u}.`);o.href=`https://wa.me/${J}?text=${l}`};e.forEach(i=>{const c=i.dataset.protocolGroup,d=Array.from(i.querySelectorAll(".protocol-chip"));d.forEach(l=>{l.setAttribute("aria-pressed","false"),l.addEventListener("click",()=>s(c,l)),l.addEventListener("keydown",b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),s(c,l))})});const u=d.find(l=>l.classList.contains("is-active"))||d[0];u&&s(c,u)}),V=!0}function ve(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const n=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(o,2300+Math.random()*1200)},o=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&n()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});
