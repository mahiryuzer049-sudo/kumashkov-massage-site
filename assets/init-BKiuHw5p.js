import{s as $}from"./scheduler-BbdbjHoP.js";import{g as k}from"./runtime-env-BTGPA9v1.js";import{b as L}from"./wa-link-builder-CZFtJDu3.js";const I=b=>{const{sitePhone:E}=b,{win:c}=k();if(!c)return;const s={};let i=!1;const A=()=>{if(i)return;const u=Array.from(document.querySelectorAll("[data-protocol-group]")),d=document.getElementById("protocol-output"),p=document.getElementById("protocol-note"),m=document.getElementById("protocol-cta");if(!u.length||!d||!p||!m)return;const v=()=>{var l,f,g,y;const n=((l=s.goal)==null?void 0:l.label)||"Восстановление",t=((f=s.zone)==null?void 0:f.label)||"Спина и плечевой пояс",e=((g=s.tempo)==null?void 0:g.label)||"Мягкая интенсивность",r=((y=s.duration)==null?void 0:y.label)||"60 минут";d.innerText=`${n} В· ${t} В· ${e} В· ${r}.`,p.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const o=["Здравствуйте! Хочу записаться.",`Мой запрос: ${n}, ${t}, интенсивность: ${e}, длительность: ${r}.`,"","Источник: Protocol: Builder","utm_source=site&utm_medium=whatsapp&utm_campaign=protocol-builder"].join(`
`);m.href=L(E,o)},a=(n,t)=>{const e=t.closest("[data-protocol-group]");e&&(e.querySelectorAll(".protocol-chip").forEach(r=>{const o=r===t;r.classList.toggle("is-active",o),r.setAttribute("aria-pressed",String(o))}),s[n]={value:t.dataset.value||"",label:t.dataset.label||t.innerText.trim()},v())};u.forEach(n=>{const t=n.dataset.protocolGroup,e=Array.from(n.querySelectorAll(".protocol-chip"));e.forEach(o=>{o.setAttribute("aria-pressed","false"),o.addEventListener("click",()=>a(t,o)),o.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),a(t,o))})});const r=e.find(o=>o.classList.contains("is-active"))||e[0];r&&a(t,r)}),i=!0};c.addEventListener("load",()=>{$(A,600)})};export{I as initProtocolBuilder};
