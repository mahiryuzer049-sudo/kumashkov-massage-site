(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const x=document.body,ae=(x.dataset.phone||"79260899019").replace(/\D/g,""),ie="Переход в чат...",pe=window.matchMedia("(prefers-reduced-motion: reduce)"),ge=pe.matches,ye=!!(navigator.connection&&navigator.connection.saveData),he=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,ve=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,h=he||ve,v=ge||ye,ce=window.matchMedia("(pointer: fine)").matches;v&&x.classList.add("reduced-effects");h&&x.classList.add("low-power-effects");const p=document.getElementById("mobile-menu-toggle"),m=document.getElementById("mobile-menu");let w=null;const le=()=>m?Array.from(m.querySelectorAll('a,button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],D=()=>{if(!(!p||!m)){if(p.setAttribute("aria-expanded","false"),m.classList.add("hidden"),m.setAttribute("aria-hidden","true"),x.classList.remove("menu-open"),w&&typeof w.focus=="function")try{w.focus({preventScroll:!0})}catch{w.focus()}w=null}},Ee=()=>{if(!p||!m)return;w=document.activeElement,p.setAttribute("aria-expanded","true"),m.classList.remove("hidden"),m.setAttribute("aria-hidden","false"),x.classList.add("menu-open");const e=le();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})};p&&m&&(p.addEventListener("click",()=>{p.getAttribute("aria-expanded")==="true"?D():Ee()}),m.querySelectorAll("a").forEach(e=>{e.addEventListener("click",D)}),document.addEventListener("click",e=>{if(!(p.getAttribute("aria-expanded")==="true"))return;const r=e.target.closest("#mobile-menu"),s=e.target.closest("#mobile-menu-toggle");!r&&!s&&D()}),document.addEventListener("keydown",e=>{if(e.key==="Escape"&&D(),!(p.getAttribute("aria-expanded")==="true")||e.key!=="Tab")return;const r=le();if(!r.length)return;const s=r[0],n=r[r.length-1],o=document.activeElement;e.shiftKey&&o===s?(e.preventDefault(),n.focus()):!e.shiftKey&&o===n&&(e.preventDefault(),s.focus())}));window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),Be(),qe()});const G=document.querySelector(".cursor-dot"),j=document.querySelector(".cursor-circle"),q=document.getElementById("spotlight");let k=window.innerWidth/2,I=window.innerHeight/2,Z=k,F=I,C=!1,de=0;const ue=()=>{if(!C)return;const e=.16;if(Z+=(k-Z)*e,F+=(I-F)*e,j&&(j.style.transform=`translate3d(${Z}px, ${F}px, 0) translate(-50%, -50%)`),Date.now()-de>1200){C=!1;return}requestAnimationFrame(ue)};!v&&!h&&ce&&G&&j&&q&&(q.style.setProperty("--x",`${k}px`),q.style.setProperty("--y",`${I}px`),document.addEventListener("mousemove",e=>{k=e.clientX,I=e.clientY,de=Date.now(),G.style.transform=`translate3d(${k}px, ${I}px, 0) translate(-50%, -50%)`,q.style.setProperty("--x",`${k}px`),q.style.setProperty("--y",`${I}px`),C||(C=!0,requestAnimationFrame(ue))}));document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>x.classList.add("hovering")),e.addEventListener("mouseleave",()=>x.classList.remove("hovering"))});const Q=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&r.target.classList.add("visible")})},{threshold:h?.06:.12});Q.forEach((t,r)=>{if(t.dataset.revealDelay&&!h)t.style.transitionDelay=t.dataset.revealDelay;else if(!h){const s=r%4;t.style.transitionDelay=`${s*60}ms`}e.observe(t)})}else Q.forEach(e=>e.classList.add("visible"));const X=Array.from(document.querySelectorAll("[data-nav-section]"));if(X.length&&"IntersectionObserver"in window){const e=new Map;X.forEach(s=>{const n=s.dataset.navSection||"";!n||!document.getElementById(n)||(e.has(n)||e.set(n,[]),e.get(n).push(s))});const t=Array.from(e.keys()).map(s=>document.getElementById(s)).filter(Boolean),r=s=>{X.forEach(n=>{const o=n.dataset.navSection===s;n.classList.toggle("is-active",o),n.setAttribute("aria-current",o?"true":"false")})};if(t.length){const s=new IntersectionObserver(n=>{n.forEach(o=>{if(!o.isIntersecting)return;const a=o.target.id;r(a)})},{rootMargin:"-35% 0px -55% 0px",threshold:.01});t.forEach(n=>s.observe(n))}}const B=document.getElementById("scan-line"),V=document.getElementById("scanner")||document.getElementById("scanner-section");B&&V&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&!v&&!h?B.classList.add("animate-scan"):B.classList.remove("animate-scan")})},{threshold:.22}).observe(V):B&&!v&&!h&&B.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(v||h)return;const t=e.target.closest(".ripple-container");if(!t)return;const r=document.createElement("span"),s=Math.max(t.clientWidth,t.clientHeight),n=s/2,o=t.getBoundingClientRect();r.style.width=r.style.height=`${s}px`,r.style.left=`${e.clientX-o.left-n}px`,r.style.top=`${e.clientY-o.top-n}px`,r.classList.add("ripple");const a=t.querySelector(".ripple");a&&a.remove(),t.appendChild(r)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;e.preventDefault();const r=t.innerText,s=t.offsetWidth;t.style.width=`${s}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=ie,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=r,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const Ae={head:{title:"Перегрузка головы",med:"Ментальное напряжение",image:"/assets/images/scanner/zone-head.jpg",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",image:"/assets/images/scanner/zone-neck.jpg",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",image:"/assets/images/scanner/zone-shoulders.jpg",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общую напряженность.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины/поясницы",image:"/assets/images/scanner/zone-back.jpg",desc:"Зажим в спине и пояснице влияет на осанку, сон и энергию. В протокол включим мягкую глубинную проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина и поясница, хочу подобрать индивидуальный сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",image:"/assets/images/scanner/zone-legs.jpg",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},be={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",legs:"legs"};let fe="",H,y=!1,l=null,$=null,R=null,Y=null,N=null,g=null,L=null,z=[],O=[],T=null,J=!1;const Le=(e,t)=>{if(clearTimeout(H),e.innerText="",v){e.innerText=t;return}let r=0;const s=()=>{e.innerText+=t.charAt(r),r+=1,r<t.length&&(H=setTimeout(s,14))};s()},me=e=>{z.forEach(t=>{const r=t.dataset.point===e;t.classList.toggle("selected",r),t.setAttribute("aria-pressed",String(r))}),O.forEach(t=>{const r=t.dataset.zoneShortcut===e;t.classList.toggle("is-active",r),t.setAttribute("aria-pressed",String(r))})},E=(e,t,r=!1)=>{if(!l||!R||!Y||!N||!g)return;const s=l.dataset.active||"";if(l.classList.contains("open")&&s===e){M();return}const n=Ae[e];if(!n)return;navigator.vibrate&&navigator.vibrate(10),me(e),T=t||document.activeElement,fe=n.msg,R.innerText=n.title,Y.innerText=n.med,Le(N,n.desc),n.image?l.style.setProperty("--zone-image",`url("${n.image}")`):l.style.removeProperty("--zone-image"),l.dataset.active=e,l.classList.add("open"),l.setAttribute("aria-hidden","false"),$&&($.dataset.activeZone=e),r&&requestAnimationFrame(()=>{if(L&&typeof L.focus=="function")try{L.focus({preventScroll:!0})}catch{L.focus()}});const o=be[e];if(o){const a=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${o}"]`);a&&a.click()}},M=()=>{if(l){if(clearTimeout(H),l.classList.remove("open"),l.dataset.active="",l.setAttribute("aria-hidden","true"),l.style.removeProperty("--zone-image"),$&&($.dataset.activeZone=""),me(""),T&&typeof T.focus=="function")try{T.focus({preventScroll:!0})}catch{T.focus()}T=null}},Se=()=>{if(!g)return;navigator.vibrate&&navigator.vibrate(18);const e=g.innerText;g.innerText=ie;const t=encodeURIComponent(fe||"Здравствуйте! Хочу записаться на массаж.");setTimeout(()=>{window.location.href=`https://wa.me/${ae}?text=${t}`,setTimeout(()=>{g.innerText=e},900)},550)},_=()=>{J||(l=document.getElementById("zone-popup"),$=document.getElementById("scanner-container"),R=document.getElementById("zone-title"),Y=document.getElementById("zone-med"),N=document.getElementById("zone-desc"),g=document.getElementById("zone-cta"),L=document.getElementById("zone-close"),z=Array.from(document.querySelectorAll(".active-point")),O=Array.from(document.querySelectorAll("[data-zone-shortcut]")),!(!l||!R||!Y||!N||!g)&&(!z.length&&!O.length||(J=!0,z.forEach(e=>{const t=e.getAttribute("data-point");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("pointerdown",r=>{y=!0,r.preventDefault(),r.stopPropagation(),E(t,e,!1)}),e.addEventListener("touchstart",r=>{y=!0,r.preventDefault(),r.stopPropagation(),E(t,e,!1)},{passive:!1}),e.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),y){y=!1;return}E(t,e,!1)}),e.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),r.stopPropagation(),E(t,e,!0))})}),O.forEach(e=>{const t=e.getAttribute("data-zone-shortcut");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("pointerdown",r=>{y=!0,r.preventDefault(),r.stopPropagation(),E(t,e,!1)}),e.addEventListener("touchstart",r=>{y=!0,r.preventDefault(),r.stopPropagation(),E(t,e,!1)},{passive:!1}),e.addEventListener("click",r=>{if(r.preventDefault(),r.stopPropagation(),y){y=!1;return}E(t,e,!1)})}),g&&g.addEventListener("click",Se),L&&L.addEventListener("click",M),document.addEventListener("click",e=>{if(!l||!l.classList.contains("open"))return;const t=e.target.closest("#zone-popup"),r=e.target.closest(".active-point"),s=e.target.closest("[data-zone-shortcut]");!t&&!r&&!s&&M()}),document.addEventListener("keydown",e=>{if(!l||!l.classList.contains("open"))return;if(e.key==="Escape"){e.preventDefault(),M();return}if(e.key!=="Tab")return;const t=Array.from(l.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(o=>!o.hasAttribute("disabled"));if(!t.length)return;const r=t[0],s=t[t.length-1],n=document.activeElement;e.shiftKey&&n===r?(e.preventDefault(),s.focus()):!e.shiftKey&&n===s&&(e.preventDefault(),r.focus())}))))};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_,{once:!0}):_();const xe=Array.from(document.querySelectorAll("[data-compare]"));xe.forEach(e=>{const t=e.querySelector(".compare-range");if(!t)return;const r=()=>{e.style.setProperty("--compare",`${t.value}%`)};t.addEventListener("input",r),t.addEventListener("change",r),r()});const we=Array.from(document.querySelectorAll("[data-service-tabs]"));we.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-service-tab]")),r=Array.from(e.querySelectorAll("[data-service-panel]"));if(!t.length||!r.length)return;const s=(o,a=!1)=>{t.forEach(i=>{const c=i.dataset.serviceTab===o;i.classList.toggle("is-active",c),i.setAttribute("aria-selected",String(c)),c&&a&&i.focus()}),r.forEach(i=>{const c=i.dataset.servicePanel===o;i.classList.toggle("is-active",c),i.setAttribute("aria-hidden",String(!c))})},n=t.find(o=>o.classList.contains("is-active"))||t[0];n&&s(n.dataset.serviceTab),t.forEach((o,a)=>{o.addEventListener("click",()=>s(o.dataset.serviceTab)),o.addEventListener("keydown",i=>{if(i.key==="ArrowRight"||i.key==="ArrowDown"){i.preventDefault();const c=t[a+1]||t[0];s(c.dataset.serviceTab,!0)}if(i.key==="ArrowLeft"||i.key==="ArrowUp"){i.preventDefault();const c=t[a-1]||t[t.length-1];s(c.dataset.serviceTab,!0)}})})});const Te=Array.from(document.querySelectorAll("[data-accordion]"));Te.forEach(e=>{const t=Array.from(e.querySelectorAll(".trust-accordion-item"));if(!t.length)return;const r=(s,n)=>{s&&(n?(s.style.height=`${s.scrollHeight}px`,setTimeout(()=>{s.style.height="auto"},260)):(s.style.height==="auto"&&(s.style.height=`${s.scrollHeight}px`),requestAnimationFrame(()=>{s.style.height="0px"})))};t.forEach(s=>{const n=s.querySelector(".trust-accordion-trigger"),o=s.querySelector(".trust-accordion-panel");if(!n||!o)return;const a=s.classList.contains("is-open");n.setAttribute("aria-expanded",String(a)),o.setAttribute("aria-hidden",String(!a)),r(o,a),n.addEventListener("click",()=>{const i=!s.classList.contains("is-open");t.forEach(c=>{const u=c.querySelector(".trust-accordion-trigger"),d=c.querySelector(".trust-accordion-panel"),f=c===s?i:!1;c.classList.toggle("is-open",f),u&&u.setAttribute("aria-expanded",String(f)),d&&(d.setAttribute("aria-hidden",String(!f)),r(d,f))})})})});const ke=Array.from(document.querySelectorAll("[data-scenario-carousel]"));ke.forEach(e=>{const t=e.querySelector(".scenario-track"),r=e.querySelector(".scenario-prev"),s=e.querySelector(".scenario-next");if(!t)return;const n=o=>{const a=t.querySelector(".scenario-card"),i=a?a.getBoundingClientRect().width:260;t.scrollBy({left:o*(i+20),behavior:"smooth"})};r&&r.addEventListener("click",()=>n(-1)),s&&s.addEventListener("click",()=>n(1))});const Ie=Array.from(document.querySelectorAll("[data-expectation-switch]"));Ie.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-expectation-tab]")),r=e.closest("section")||document,s=Array.from(r.querySelectorAll("[data-expectation-panel]"));if(!t.length||!s.length)return;const n=a=>{t.forEach(i=>{const c=i.dataset.expectationTab===a;i.classList.toggle("is-active",c),i.setAttribute("aria-selected",String(c))}),s.forEach(i=>{const c=i.dataset.expectationPanel===a;i.classList.toggle("is-active",c),i.setAttribute("aria-hidden",String(!c))})},o=t.find(a=>a.classList.contains("is-active"))||t[0];o&&n(o.dataset.expectationTab),t.forEach(a=>{a.addEventListener("click",()=>n(a.dataset.expectationTab))})});const S=Array.from(document.querySelectorAll(".step-btn[data-step]")),ee=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),te=document.getElementById("ritual-progress"),re=document.getElementById("ritual-prev"),ne=document.getElementById("ritual-next");let b=1;const A=(e,t=!1)=>{if(!S.length||!ee.length)return;const r=S.length,s=Math.min(Math.max(e,1),r);b=s,S.forEach(n=>{const a=Number(n.dataset.step)===s;n.classList.toggle("active",a),n.setAttribute("aria-selected",String(a)),a&&t&&n.focus()}),ee.forEach(n=>{const a=Number(n.id.replace("ritual-step-",""))===s;n.classList.toggle("is-active",a),n.setAttribute("aria-hidden",String(!a))}),te&&(te.style.width=`${s/r*100}%`)};if(S.length){const e=S.find(r=>r.classList.contains("active")),t=e?Number(e.dataset.step):1;if(A(t),S.forEach(r=>{const s=Number(r.dataset.step);r.addEventListener("click",()=>A(s)),r.addEventListener("keydown",n=>{n.key==="ArrowRight"&&(n.preventDefault(),A(b+1,!0)),n.key==="ArrowLeft"&&(n.preventDefault(),A(b-1,!0))})}),re&&re.addEventListener("click",()=>A(b-1)),ne&&ne.addEventListener("click",()=>A(b+1)),!v){const r=document.getElementById("ritual");let s;const n=()=>{s||(s=setInterval(()=>{const a=b>=S.length?1:b+1;A(a)},5200))},o=()=>{clearInterval(s),s=null};r&&"IntersectionObserver"in window&&new IntersectionObserver(i=>{i.forEach(c=>{c.isIntersecting?n():o()})},{threshold:.4}).observe(r)}}const P={};let se=!1;function qe(){if(se)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),r=document.getElementById("protocol-note"),s=document.getElementById("protocol-cta");if(!e.length||!t||!r||!s)return;const n=(a,i)=>{const c=i.closest("[data-protocol-group]");c&&(c.querySelectorAll(".protocol-chip").forEach(u=>{const d=u===i;u.classList.toggle("is-active",d),u.setAttribute("aria-pressed",String(d))}),P[a]={value:i.dataset.value||"",label:i.dataset.label||i.innerText.trim()},o())},o=()=>{var f,K,W,U;const a=((f=P.goal)==null?void 0:f.label)||"Восстановление",i=((K=P.zone)==null?void 0:K.label)||"Спина и плечевой пояс",c=((W=P.tempo)==null?void 0:W.label)||"Мягкая интенсивность",u=((U=P.duration)==null?void 0:U.label)||"60 минут";t.innerText=`${a} · ${i} · ${c} · ${u}.`,r.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const d=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${a}, ${i}, интенсивность: ${c}, длительность: ${u}.`);s.href=`https://wa.me/${ae}?text=${d}`};e.forEach(a=>{const i=a.dataset.protocolGroup,c=Array.from(a.querySelectorAll(".protocol-chip"));c.forEach(d=>{d.setAttribute("aria-pressed","false"),d.addEventListener("click",()=>n(i,d)),d.addEventListener("keydown",f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),n(i,d))})});const u=c.find(d=>d.classList.contains("is-active"))||c[0];u&&n(i,u)}),se=!0}function Be(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const r=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(s,2300+Math.random()*1200)},s=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&r()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});const oe=Array.from(document.querySelectorAll("[data-tilt-card]"));oe.length&&!v&&ce&&oe.forEach(r=>{r.addEventListener("mousemove",s=>{const n=r.getBoundingClientRect(),o=(s.clientX-n.left)/n.width-.5,a=(s.clientY-n.top)/n.height-.5,i=o*8,c=-a*8,u=o*12,d=a*12;r.style.transform=`translate3d(${u}px, ${d}px, 0) rotateX(${c}deg) rotateY(${i}deg)`}),r.addEventListener("mouseleave",()=>{r.style.transform=""})});
