import{g as v}from"./runtime-env-BTGPA9v1.js";const f=a=>{const{lowPowerEffects:n}=a,{win:t,doc:l}=v();if(!t||!l)return;const i=Array.from(l.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in t){const s=new t.IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting&&r.target.classList.add("visible")})},{threshold:n?.06:.12});i.forEach((e,r)=>{if(e.dataset.revealDelay&&!n)e.style.transitionDelay=e.dataset.revealDelay;else if(!n){const c=r%4;e.style.transitionDelay=`${c*60}ms`}s.observe(e)})}else i.forEach(s=>s.classList.add("visible"));const o=()=>{if(!i.length)return;const s=t.innerHeight||l.documentElement.clientHeight||0;i.forEach(e=>{if(e.classList.contains("visible"))return;const r=e.getBoundingClientRect();r.bottom<=0||r.top>=s*1.2||e.classList.add("visible")})};if(i.length){let s=null;const e=()=>{s&&t.clearTimeout(s),s=t.setTimeout(o,120)};t.addEventListener("scroll",e,{passive:!0}),t.addEventListener("resize",e),t.addEventListener("load",e),e()}};export{f as initScrollReveal};
