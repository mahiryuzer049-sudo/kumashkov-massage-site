(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const v=document.body,V=(v.dataset.phone||"79260899019").replace(/\D/g,""),J="Переход в чат...",re=window.matchMedia("(prefers-reduced-motion: reduce)"),ie=re.matches,ae=!!(navigator.connection&&navigator.connection.saveData),ce=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,le=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,k=ce||le,E=ie||ae,de=window.matchMedia("(pointer: fine)").matches;E&&v.classList.add("reduced-effects");k&&v.classList.add("low-power-effects");const m=document.getElementById("mobile-menu-toggle"),f=document.getElementById("mobile-menu"),T=()=>{!m||!f||(m.setAttribute("aria-expanded","false"),f.classList.add("hidden"),f.setAttribute("aria-hidden","true"),v.classList.remove("menu-open"))},ue=()=>{!m||!f||(m.setAttribute("aria-expanded","true"),f.classList.remove("hidden"),f.setAttribute("aria-hidden","false"),v.classList.add("menu-open"))};m&&f&&(m.addEventListener("click",()=>{m.getAttribute("aria-expanded")==="true"?T():ue()}),f.querySelectorAll("a").forEach(e=>{e.addEventListener("click",T)}),document.addEventListener("click",e=>{if(!(m.getAttribute("aria-expanded")==="true"))return;const n=e.target.closest("#mobile-menu"),o=e.target.closest("#mobile-menu-toggle");!n&&!o&&T()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&T()}));window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),he(),ye()});const Y=document.querySelector(".cursor-dot"),D=document.querySelector(".cursor-circle"),w=document.getElementById("spotlight");let L=window.innerWidth/2,A=window.innerHeight/2,z=L,q=A,B=!1,_=0;const ee=()=>{if(!B)return;const e=.16;if(z+=(L-z)*e,q+=(A-q)*e,D&&(D.style.transform=`translate3d(${z}px, ${q}px, 0) translate(-50%, -50%)`),Date.now()-_>1200){B=!1;return}requestAnimationFrame(ee)};!E&&de&&Y&&D&&w&&(w.style.setProperty("--x",`${L}px`),w.style.setProperty("--y",`${A}px`),document.addEventListener("mousemove",e=>{L=e.clientX,A=e.clientY,_=Date.now(),Y.style.transform=`translate3d(${L}px, ${A}px, 0) translate(-50%, -50%)`,w.style.setProperty("--x",`${L}px`),w.style.setProperty("--y",`${A}px`),B||(B=!0,requestAnimationFrame(ee))}));document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>v.classList.add("hovering")),e.addEventListener("mouseleave",()=>v.classList.remove("hovering"))});const F=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&n.target.classList.add("visible")})},{threshold:k?.06:.12});F.forEach((t,n)=>{if(t.dataset.revealDelay&&!k)t.style.transitionDelay=t.dataset.revealDelay;else if(!k){const o=n%4;t.style.transitionDelay=`${o*60}ms`}e.observe(t)})}else F.forEach(e=>e.classList.add("visible"));const x=document.getElementById("scan-line"),Z=document.getElementById("scanner-section");x&&Z&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&!E?x.classList.add("animate-scan"):x.classList.remove("animate-scan")})},{threshold:.22}).observe(Z):x&&!E&&x.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(E)return;const t=e.target.closest(".ripple-container");if(!t)return;const n=document.createElement("span"),o=Math.max(t.clientWidth,t.clientHeight),s=o/2,i=t.getBoundingClientRect();n.style.width=n.style.height=`${o}px`,n.style.left=`${e.clientX-i.left-s}px`,n.style.top=`${e.clientY-i.top-s}px`,n.classList.add("ripple");const r=t.querySelector(".ripple");r&&r.remove(),t.appendChild(n)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;e.preventDefault();const n=t.innerText,o=t.offsetWidth;t.style.width=`${o}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=J,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=n,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const me={head:{title:"Перегрузка головы",med:"Ментальное напряжение",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общую напряженность.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины/поясницы",desc:"Зажим в спине и пояснице влияет на осанку, сон и энергию. В протокол включим мягкую глубинную проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина и поясница, хочу подобрать индивидуальный сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},fe={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",legs:"legs"};let te="",M;const c=document.getElementById("zone-popup"),W=document.getElementById("zone-title"),X=document.getElementById("zone-med"),K=document.getElementById("zone-desc"),y=document.getElementById("zone-cta"),$=document.getElementById("zone-close"),pe=(e,t)=>{if(clearTimeout(M),e.innerText="",E){e.innerText=t;return}let n=0;const o=()=>{e.innerText+=t.charAt(n),n+=1,n<t.length&&(M=setTimeout(o,14))};o()},ne=Array.from(document.querySelectorAll(".active-point")),se=Array.from(document.querySelectorAll("[data-zone-shortcut]"));let S=null;const oe=e=>{ne.forEach(t=>{const n=t.dataset.point===e;t.classList.toggle("selected",n),t.setAttribute("aria-pressed",String(n))}),se.forEach(t=>{const n=t.dataset.zoneShortcut===e;t.classList.toggle("is-active",n),t.setAttribute("aria-pressed",String(n))})},O=(e,t)=>{if(!c||!W||!X||!K||!y)return;const n=me[e];if(!n)return;navigator.vibrate&&navigator.vibrate(10),oe(e),S=t||document.activeElement,te=n.msg,W.innerText=n.title,X.innerText=n.med,pe(K,n.desc),c.dataset.active=e,c.classList.add("open"),c.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{$&&$.focus()});const o=fe[e];if(o){const s=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${o}"]`);s&&s.click()}},P=()=>{c&&(clearTimeout(M),c.classList.remove("open"),c.dataset.active="",c.setAttribute("aria-hidden","true"),oe(""),S&&typeof S.focus=="function"&&S.focus(),S=null)},ge=()=>{if(!y)return;navigator.vibrate&&navigator.vibrate(18);const e=y.innerText;y.innerText=J;const t=encodeURIComponent(te||"Здравствуйте! Хочу записаться на массаж.");setTimeout(()=>{window.location.href=`https://wa.me/${V}?text=${t}`,setTimeout(()=>{y.innerText=e},900)},550)};ne.forEach(e=>{const t=e.getAttribute("data-point");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("click",()=>O(t,e)),e.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),O(t,e))})});se.forEach(e=>{const t=e.getAttribute("data-zone-shortcut");e.setAttribute("aria-pressed","false"),e.setAttribute("aria-controls","zone-popup"),e.addEventListener("click",()=>{O(t,e)})});y&&y.addEventListener("click",ge);$&&$.addEventListener("click",P);document.addEventListener("click",e=>{if(!c||!c.classList.contains("open"))return;const t=e.target.closest("#zone-popup"),n=e.target.closest(".active-point"),o=e.target.closest("[data-zone-shortcut]");!t&&!n&&!o&&P()});document.addEventListener("keydown",e=>{if(!c||!c.classList.contains("open"))return;if(e.key==="Escape"){e.preventDefault(),P();return}if(e.key!=="Tab")return;const t=Array.from(c.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(i=>!i.hasAttribute("disabled"));if(!t.length)return;const n=t[0],o=t[t.length-1],s=document.activeElement;e.shiftKey&&s===n?(e.preventDefault(),o.focus()):!e.shiftKey&&s===o&&(e.preventDefault(),n.focus())});const h=Array.from(document.querySelectorAll(".step-btn[data-step]")),j=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),H=document.getElementById("ritual-progress"),U=document.getElementById("ritual-prev"),G=document.getElementById("ritual-next");let g=1;const p=(e,t=!1)=>{if(!h.length||!j.length)return;const n=h.length,o=Math.min(Math.max(e,1),n);g=o,h.forEach(s=>{const r=Number(s.dataset.step)===o;s.classList.toggle("active",r),s.setAttribute("aria-selected",String(r)),r&&t&&s.focus()}),j.forEach(s=>{const r=Number(s.id.replace("ritual-step-",""))===o;s.classList.toggle("is-active",r),s.setAttribute("aria-hidden",String(!r))}),H&&(H.style.width=`${o/n*100}%`)};if(h.length){const e=h.find(n=>n.classList.contains("active")),t=e?Number(e.dataset.step):1;if(p(t),h.forEach(n=>{const o=Number(n.dataset.step);n.addEventListener("click",()=>p(o)),n.addEventListener("keydown",s=>{s.key==="ArrowRight"&&(s.preventDefault(),p(g+1,!0)),s.key==="ArrowLeft"&&(s.preventDefault(),p(g-1,!0))})}),U&&U.addEventListener("click",()=>p(g-1)),G&&G.addEventListener("click",()=>p(g+1)),!E){const n=document.getElementById("ritual");let o;const s=()=>{o||(o=setInterval(()=>{const r=g>=h.length?1:g+1;p(r)},5200))},i=()=>{clearInterval(o),o=null};n&&"IntersectionObserver"in window&&new IntersectionObserver(a=>{a.forEach(d=>{d.isIntersecting?s():i()})},{threshold:.4}).observe(n)}}const I={};let Q=!1;function ye(){if(Q)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),n=document.getElementById("protocol-note"),o=document.getElementById("protocol-cta");if(!e.length||!t||!n||!o)return;const s=(r,a)=>{const d=a.closest("[data-protocol-group]");d&&(d.querySelectorAll(".protocol-chip").forEach(u=>{const l=u===a;u.classList.toggle("is-active",l),u.setAttribute("aria-pressed",String(l))}),I[r]={value:a.dataset.value||"",label:a.dataset.label||a.innerText.trim()},i())},i=()=>{var b,C,N,R;const r=((b=I.goal)==null?void 0:b.label)||"Восстановление",a=((C=I.zone)==null?void 0:C.label)||"Спина и плечевой пояс",d=((N=I.tempo)==null?void 0:N.label)||"Мягкая интенсивность",u=((R=I.duration)==null?void 0:R.label)||"60 минут";t.innerText=`${r} · ${a} · ${d} · ${u}.`,n.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const l=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${r}, ${a}, интенсивность: ${d}, длительность: ${u}.`);o.href=`https://wa.me/${V}?text=${l}`};e.forEach(r=>{const a=r.dataset.protocolGroup,d=Array.from(r.querySelectorAll(".protocol-chip"));d.forEach(l=>{l.setAttribute("aria-pressed","false"),l.addEventListener("click",()=>s(a,l)),l.addEventListener("keydown",b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),s(a,l))})});const u=d.find(l=>l.classList.contains("is-active"))||d[0];u&&s(a,u)}),Q=!0}function he(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const n=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(o,2300+Math.random()*1200)},o=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&n()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});
