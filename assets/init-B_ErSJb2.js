import{g as x}from"./runtime-env-BTGPA9v1.js";const m={"hero-cta":"a","pricing-title":"a","packages-title":"a"},p=new Set(["a","b","c"]),E=(t,r="a")=>{const s=String(t||"").trim().toLowerCase();if(p.has(s))return s;const n=s[0];return p.has(n)?n:r},f=t=>{const r={};return t&&String(t).split(/[;,]/).map(s=>s.trim()).filter(Boolean).forEach(s=>{const n=s.split(/[=:]/),e=(n[0]||"").trim(),a=(n[1]||"").trim();e&&(r[e]=a)}),r},d=t=>{if(!t)return{};if(typeof t=="object")return t;const r=String(t).trim();if(!r)return{};if(r.startsWith("{"))try{return JSON.parse(r)}catch{return f(r)}return f(r)},h=t=>{const r={};return t&&new URLSearchParams(t).forEach((n,e)=>{n&&(e.startsWith("exp-")||e.startsWith("exp_")?r[e.slice(4)]=n:r[e]=n)}),r},g=(...t)=>{const r={...m};return t.forEach(s=>{s&&Object.entries(s).forEach(([n,e])=>{n&&(r[n]=E(e,r[n]||"a"))})}),r},l=(t,r)=>!t||!t.dataset?null:Object.prototype.hasOwnProperty.call(t.dataset,r)?t.dataset[r]:null,S=(t,r)=>{const s=r.toUpperCase(),n=l(t,`expText${s}`),e=l(t,`expHtml${s}`),a=l(t,`expClass${s}`),u=l(t,`expHref${s}`),i=l(t,`expSrc${s}`),o=l(t,`expTitle${s}`);n!==null&&(t.textContent=n),e!==null&&(t.innerHTML=e),a!==null&&a.split(" ").map(c=>c.trim()).filter(Boolean).forEach(c=>t.classList.add(c)),u!==null&&t.setAttribute("href",u),i!==null&&t.setAttribute("src",i),o!==null&&t.setAttribute("title",o),t.dataset.expActive=r},b=()=>{const{win:t,doc:r}=x();if(!r)return{assignments:{}};const s=t&&t.__EXPERIMENTS__?t.__EXPERIMENTS__:null,n=r.body&&r.body.dataset?r.body.dataset.experiments:null,e=t?h(t.location?t.location.search:""):{},a=g(d(s),d(n),e);if(r.documentElement){const i=Object.entries(a).map(([o,c])=>`${o}:${c}`);r.documentElement.dataset.experiments=i.join(";")}return Array.from(r.querySelectorAll("[data-exp]")).forEach(i=>{const o=i.dataset.exp||"";if(!o)return;const c=a[o]||"a";S(i,E(c))}),{assignments:a}},V=()=>b();export{V as initExperiments};
