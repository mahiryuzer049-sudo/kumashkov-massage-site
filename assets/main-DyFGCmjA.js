(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const gt={head:{title:"Перегрузка головы",med:"Ментальное напряжение",image:"/assets/images/scanner/zone-head.jpg",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",image:"/assets/images/scanner/zone-neck.jpg",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",image:"/assets/images/scanner/zone-shoulders.jpg",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общее напряжение.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины/поясницы",image:"/assets/images/scanner/zone-back.jpg",desc:"Зажим в спине и пояснице влияет на осанку, сон и энергию. В протокол включим мягкую глубокую проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина и поясница, хочу подобрать индивидуальный сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",image:"/assets/images/scanner/zone-legs.jpg",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},ht={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",legs:"legs"},yt="Здравствуйте! Хочу записаться на массаж.",vt=e=>String(e).replace(/\D/g,""),Me=e=>String(e||"").trim().toLowerCase(),le=(e,t)=>{if(!e)return"";if(e.dataset&&e.dataset[t])return e.dataset[t];const r=t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`);return typeof e.getAttribute=="function"&&e.getAttribute(`data-${r}`)||""},Ce=e=>le(e,"point")||le(e,"zoneShortcut"),bt=e=>Array.from(e.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(t=>!t.hasAttribute("disabled")),Et=e=>{const t=e.querySelector("#zone-popup"),r=e.querySelector("#zone-title"),n=e.querySelector("#zone-med"),o=e.querySelector("#zone-desc"),a=e.querySelector("#zone-cta"),c=e.querySelector("#zone-close"),s=e.querySelector("#scanner-container"),i=Array.from(e.querySelectorAll(".active-point")),f=Array.from(e.querySelectorAll("[data-zone-shortcut]"));return!t||!r||!n||!o||!s?null:{popup:t,title:r,med:n,desc:o,cta:a,close:c,container:s,points:i,shortcuts:f}},At=(e={})=>{const t=e.root||document.getElementById("scanner")||document.getElementById("scanner-section");if(!t)return null;const r=e.zoneData||gt,n=e.protocolZoneMap||ht,o=typeof e.reducedEffects=="boolean"?e.reducedEffects:window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=e.phoneDigits||vt(document.body.dataset.phone||"79260899019"),c=e.whatsappLoadingText||"Переход в чат...",s=Et(t);if(!s)return null;const i={isOpen:!1,activeZone:null,lastTrigger:null,typeTimer:null,currentMsg:""};let f=!1;const m=l=>{s.points.forEach(u=>{const d=le(u,"point")===l;u.classList.toggle("selected",d),u.setAttribute("aria-pressed",String(d))}),s.shortcuts.forEach(u=>{const d=le(u,"zoneShortcut")===l;u.classList.toggle("is-active",d),u.setAttribute("aria-pressed",String(d))}),s.container.dataset.activeZone=l||""},b=l=>{if(clearTimeout(i.typeTimer),s.desc.innerText="",o){s.desc.innerText=l;return}let u=0;const d=()=>{s.desc.innerText+=l.charAt(u),u+=1,u<l.length&&(i.typeTimer=setTimeout(d,14))};d()},R=l=>{s.popup.dataset.open=l?"true":"false",s.popup.classList.toggle("open",l),s.popup.setAttribute("aria-hidden",l?"false":"true")},V=(l,u={})=>{const d=Me(l),p=r[d];if(!p)return!1;const mt=u.trigger||null,pt=!!u.focus;navigator.vibrate&&navigator.vibrate(10),i.isOpen=!0,i.activeZone=d,i.lastTrigger=mt||document.activeElement,i.currentMsg=p.msg||"",s.popup.dataset.active=d,s.title.innerText=p.title,s.med.innerText=p.med,b(p.desc),p.image?s.popup.style.setProperty("--zone-image",`url("${p.image}")`):s.popup.style.removeProperty("--zone-image"),R(!0),m(d),ft(),pt&&s.close&&typeof s.close.focus=="function"&&requestAnimationFrame(()=>{try{s.close.focus({preventScroll:!0})}catch{s.close.focus()}});const Ie=n[d];if(Ie){const qe=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${Ie}"]`);qe&&qe.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))}return!0},T=()=>{if(i.isOpen){if(clearTimeout(i.typeTimer),i.isOpen=!1,i.activeZone=null,i.currentMsg="",s.popup.dataset.active="",s.popup.style.removeProperty("--zone-image"),R(!1),m(""),ke(),i.lastTrigger&&typeof i.lastTrigger.focus=="function")try{i.lastTrigger.focus({preventScroll:!0})}catch{i.lastTrigger.focus()}i.lastTrigger=null}},Le=(l,u,d=!1)=>{const p=Me(l);return i.isOpen&&i.activeZone===p?(T(),!1):V(p,{trigger:u,focus:d})},ae=l=>{l.preventDefault(),l.stopPropagation();const u=l.currentTarget;if(!(u instanceof Element))return;const d=Ce(u);d&&Le(d,u,!1)},ce=l=>{if(!(l.key==="Enter"||l.key===" "))return;l.preventDefault(),l.stopPropagation();const d=l.currentTarget;if(!(d instanceof Element))return;const p=Ce(d);p&&Le(p,d,!0)},we=l=>{if(!i.isOpen)return;const u=l.target;if(s.popup.contains(u))return;const d=u.closest(".active-point,[data-zone-shortcut]");d&&t.contains(d)||T()},Se=l=>{if(!i.isOpen)return;if(l.key==="Escape"){l.preventDefault(),T();return}if(l.key!=="Tab"||!s.popup.contains(document.activeElement))return;const u=bt(s.popup);if(!u.length)return;const d=u[0],p=u[u.length-1];l.shiftKey&&document.activeElement===d?(l.preventDefault(),p.focus()):!l.shiftKey&&document.activeElement===p&&(l.preventDefault(),d.focus())},ft=()=>{f||(document.addEventListener("click",we),document.addEventListener("keydown",Se),f=!0)},ke=()=>{f&&(document.removeEventListener("click",we),document.removeEventListener("keydown",Se),f=!1)},Te=()=>{var p;if(!s.cta)return;navigator.vibrate&&navigator.vibrate(18);const l=s.cta.innerText;s.cta.innerText=c;const u=i.currentMsg||((p=r[i.activeZone])==null?void 0:p.msg)||yt,d=encodeURIComponent(u);setTimeout(()=>{window.location.href=`https://wa.me/${a}?text=${d}`,setTimeout(()=>{s.cta.innerText=l},900)},550)};return s.points.forEach(l=>{l.setAttribute("aria-pressed","false"),l.setAttribute("aria-controls","zone-popup"),l.addEventListener("click",ae),l.addEventListener("keydown",ce)}),s.shortcuts.forEach(l=>{l.setAttribute("aria-pressed","false"),l.setAttribute("aria-controls","zone-popup"),l.addEventListener("click",ae),l.addEventListener("keydown",ce)}),s.popup.dataset.active="",R(!1),s.close&&s.close.addEventListener("click",T),s.cta&&s.cta.addEventListener("click",Te),{openZone:V,closeZone:T,destroy:()=>{ke(),s.points.forEach(l=>{l.removeEventListener("click",ae),l.removeEventListener("keydown",ce)}),s.shortcuts.forEach(l=>{l.removeEventListener("click",ae),l.removeEventListener("keydown",ce)}),s.close&&s.close.removeEventListener("click",T),s.cta&&s.cta.removeEventListener("click",Te)},debug:()=>({popup:!!s.popup,title:!!s.title,med:!!s.med,desc:!!s.desc,cta:!!s.cta,points:s.points.length,shortcuts:s.shortcuts.length,popupOpen:!!s.popup.classList.contains("open"),active:s.popup.dataset.active||""})}},v=document.body,Ge=(v.dataset.phone||"79260899019").replace(/\D/g,""),Je="Переход в чат...",xt=window.matchMedia("(prefers-reduced-motion: reduce)"),Lt=xt.matches,wt=!!(navigator.connection&&navigator.connection.saveData),St=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,kt=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,B=St||kt,x=Lt||wt,Qe=window.matchMedia("(pointer: fine)").matches;x&&v.classList.add("reduced-effects");B&&v.classList.add("low-power-effects");const A=document.getElementById("mobile-menu-toggle"),g=document.getElementById("mobile-menu"),k=document.getElementById("mobile-menu-overlay");let F=null;const G=document.getElementById("navbar"),O=document.querySelector("[data-nav-primary]"),J=O?O.querySelector(".nav-highlight"):null,ue=O?Array.from(O.querySelectorAll("[data-nav-section]")):[],he=document.getElementById("nav-progress"),w=document.querySelector("[data-sticky-cta]"),Y=document.getElementById("sticky-context"),Z=w?{text:w.textContent.trim(),href:w.getAttribute("href")||""}:null,De=Y?Y.textContent.trim():"",Be=Number(v.dataset.metrika||0),h=document.getElementById("nav-command"),U=document.getElementById("nav-command-input"),K=document.getElementById("nav-command-list"),Oe=document.getElementById("nav-command-close"),me=Array.from(document.querySelectorAll("[data-command-trigger]"));let _=null;const y=document.getElementById("nav-map"),ne=document.getElementById("nav-map-grid"),$e=document.getElementById("nav-map-close"),pe=Array.from(document.querySelectorAll("[data-nav-map-trigger]"));let H=null;const de=document.querySelector(".section-rail"),Pe=document.getElementById("rail-current"),ze=document.getElementById("rail-next"),et=de?Array.from(de.querySelectorAll("[data-nav-section]")):[],tt=()=>{const e=window.innerWidth||document.documentElement.clientWidth||0;return e>=1280?"desktop":e>=768?"tablet":"mobile"},E={currentSectionId:"",scrollProgress:0,viewportMode:tt(),menuOpen:!1,contextIntent:"explore",reducedMotion:x};me.forEach(e=>{e.hasAttribute("aria-controls")||e.setAttribute("aria-controls","nav-command"),e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false")});pe.forEach(e=>{e.hasAttribute("aria-controls")||e.setAttribute("aria-controls","nav-map"),e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false")});const oe=e=>{Object.assign(E,e),E.currentSectionId&&(v.dataset.activeSection=E.currentSectionId),E.contextIntent&&(v.dataset.navIntent=E.contextIntent),Number.isFinite(E.scrollProgress)&&v.style.setProperty("--nav-scroll",E.scrollProgress.toFixed(4))};window.addEventListener("resize",()=>{oe({viewportMode:tt()})});const L=(e,t={})=>{const r={name:e,...t,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("nav-event",{detail:r})),Array.isArray(window.dataLayer)&&window.dataLayer.push({event:e,...t}),Be&&typeof window.ym=="function"&&window.ym(Be,"reachGoal",e,t)},Tt=()=>h?Array.from(h.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],nt=()=>y?Array.from(y.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],rt=()=>g?Array.from(g.querySelectorAll('a,button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],M=()=>{if(!(!A||!g||!(A.getAttribute("aria-expanded")==="true"))){if(A.setAttribute("aria-expanded","false"),g.classList.add("hidden"),g.setAttribute("aria-hidden","true"),g.dataset.open="false",v.classList.remove("menu-open"),oe({menuOpen:!1}),L("menu_close",{source:"mobile"}),k&&(k.classList.remove("is-open"),k.setAttribute("aria-hidden","true"),k.classList.add("hidden")),F&&typeof F.focus=="function")try{F.focus({preventScroll:!0})}catch{F.focus()}F=null}},It=()=>{if(!A||!g)return;F=document.activeElement,A.setAttribute("aria-expanded","true"),g.classList.remove("hidden"),g.setAttribute("aria-hidden","false"),g.dataset.open="true",v.classList.add("menu-open"),oe({menuOpen:!0}),L("menu_open",{source:"mobile"}),k&&(k.classList.remove("hidden"),k.classList.add("is-open"),k.setAttribute("aria-hidden","false"));const e=rt();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})};if(A&&g){A.addEventListener("click",()=>{A.getAttribute("aria-expanded")==="true"?M():It()}),g.querySelectorAll("a").forEach(n=>{n.addEventListener("click",M)}),document.addEventListener("click",n=>{if(!(A.getAttribute("aria-expanded")==="true"))return;const a=n.target.closest("#mobile-menu"),c=n.target.closest("#mobile-menu-toggle");!a&&!c&&M()}),k&&k.addEventListener("click",M);let e=0,t=0,r=!1;g.addEventListener("touchstart",n=>{if(!(A.getAttribute("aria-expanded")==="true"))return;const a=n.touches[0];a&&(e=a.clientY,t=a.clientX,r=!0)},{passive:!0}),g.addEventListener("touchmove",n=>{if(!r)return;const o=n.touches[0];if(!o)return;const a=o.clientY-e,c=o.clientX-t;Math.abs(a)<60||Math.abs(a)<Math.abs(c)||a>0&&g.scrollTop<=0&&(r=!1,M())},{passive:!0}),g.addEventListener("touchend",()=>{r=!1}),document.addEventListener("keydown",n=>{if(n.key==="Escape"&&M(),!(A.getAttribute("aria-expanded")==="true")||n.key!=="Tab")return;const a=rt();if(!a.length)return;const c=a[0],s=a[a.length-1],i=document.activeElement;n.shiftKey&&i===c?(n.preventDefault(),s.focus()):!n.shiftKey&&i===s&&(n.preventDefault(),c.focus())})}window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),Wt(),Ut()});const Ne=document.querySelector(".cursor-dot"),Ee=document.querySelector(".cursor-circle"),Q=document.getElementById("spotlight");let X=window.innerWidth/2,j=window.innerHeight/2,ye=X,ve=j,fe=!1,ot=0;const st=()=>{if(!fe)return;const e=.16;if(ye+=(X-ye)*e,ve+=(j-ve)*e,Ee&&(Ee.style.transform=`translate3d(${ye}px, ${ve}px, 0) translate(-50%, -50%)`),Date.now()-ot>1200){fe=!1;return}requestAnimationFrame(st)};!x&&!B&&Qe&&Ne&&Ee&&Q&&(Q.style.setProperty("--x",`${X}px`),Q.style.setProperty("--y",`${j}px`),document.addEventListener("mousemove",e=>{X=e.clientX,j=e.clientY,ot=Date.now(),Ne.style.transform=`translate3d(${X}px, ${j}px, 0) translate(-50%, -50%)`,Q.style.setProperty("--x",`${X}px`),Q.style.setProperty("--y",`${j}px`),fe||(fe=!0,requestAnimationFrame(st))}));document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>v.classList.add("hovering")),e.addEventListener("mouseleave",()=>v.classList.remove("hovering"))});const Re=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&r.target.classList.add("visible")})},{threshold:B?.06:.12});Re.forEach((t,r)=>{if(t.dataset.revealDelay&&!B)t.style.transitionDelay=t.dataset.revealDelay;else if(!B){const n=r%4;t.style.transitionDelay=`${n*60}ms`}e.observe(t)})}else Re.forEach(e=>e.classList.add("visible"));const I=et.map(e=>e.dataset.navSection).filter(Boolean),Fe=new Map(et.map(e=>[e.dataset.navSection,e.dataset.label||e.getAttribute("aria-label")||(e.textContent||"").trim()||""])),at=e=>{if(!Pe||!ze||!I.length)return;const t=I.indexOf(e),r=t>=0?e:I[0],n=t>=0&&t<I.length-1?I[t+1]:I[I.length-1];Pe.textContent=Fe.get(r)||r,ze.textContent=Fe.get(n)||"Финал"},qt={trust:"explore",services:"compare",scanner:"explore","goal-routes":"compare",packages:"compare",results:"explore",blog:"explore","how-to-book":"book",booking:"book"},Mt=e=>qt[e]||"explore";let S=null,W=null;const Ct=()=>{S&&(W&&clearTimeout(W),W=setTimeout(()=>{S&&(L("nav_jump_miss",{id:S.id,source:S.source}),S=null)},2e3))},Dt=e=>{if(!e||typeof e.focus!="function")return;const t=e.hasAttribute("tabindex");t||e.setAttribute("tabindex","-1");try{e.focus({preventScroll:!0})}catch{e.focus()}t||setTimeout(()=>{e.removeAttribute("tabindex")},800)},ge=(e,t="nav")=>{if(!e||e==="#")return!1;let r;try{r=new URL(e,window.location.href)}catch{return!1}if(!r.hash||r.pathname!==window.location.pathname)return!1;const n=r.hash.replace("#","");if(!n)return!1;const o=document.getElementById(n);if(!o)return!1;S={id:n,source:t},Ct(),L("nav_click",{id:n,source:t,href:r.hash});const a=x?"auto":"smooth";return o.scrollIntoView({behavior:a,block:"start"}),M(),history.replaceState(null,"",`#${n}`),setTimeout(()=>Dt(o),x?0:240),!0},Bt=e=>e.dataset.analytics||e.dataset.navSection||e.getAttribute("aria-label")||"anchor",Ot=Array.from(document.querySelectorAll('a[href*="#"]'));Ot.forEach(e=>{const t=e.getAttribute("href")||"";!t.includes("#")||t==="#"||e.addEventListener("click",r=>{const n=Bt(e),o=ge(t,n);o&&r.preventDefault(),o||L("nav_click",{href:t,source:n})})});const re=Array.from(document.querySelectorAll("[data-nav-section]")),$t=()=>{const e=re.find(n=>(n.getAttribute("href")||"").includes("#"));if(!e)return"#";const t=e.getAttribute("href")||"#",r=t.indexOf("#");return t.slice(0,Math.max(r+1,1))},Pt=$t(),C=e=>`${Pt}${e}`,zt={trust:{text:"Выбрать формат",href:C("trust"),context:"Формат визита"},services:{text:"Выбрать услугу",href:C("services"),context:"Список услуг"},scanner:{text:"Открыть сканер",href:C("scanner-anchor"),context:"Диагностика зон"},"goal-routes":{text:"Сценарии",href:C("goal-routes"),context:"Маршруты запроса"},packages:{text:"Пакеты",href:C("packages"),context:"Сценарии и пакеты"},results:{text:"Результат",href:C("results"),context:"Ожидаемый эффект"},blog:{text:"Читать блог",href:C("blog"),context:"Гайды и заметки"},"how-to-book":{text:"Как записаться",href:C("how-to-book"),context:"Алгоритм записи"},booking:{text:"Записаться",href:Z?Z.href:"",context:"Старт диалога"}},Nt=e=>{if(!w||!Z)return;const t=zt[e];if(!t){w.textContent=Z.text,w.setAttribute("href",Z.href),Y&&(Y.textContent=De);return}w.textContent=t.text,w.setAttribute("href",t.href||Z.href),Y&&(Y.textContent=t.context||De)};w&&w.addEventListener("click",()=>{L("cta_from_section",{id:E.currentSectionId||"",intent:E.contextIntent||"explore"})});if(re.length&&"IntersectionObserver"in window){const e=new Map;re.forEach(n=>{const o=n.dataset.navSection||"";!o||!document.getElementById(o)||(e.has(o)||e.set(o,[]),e.get(o).push(n))});const t=Array.from(e.keys()).map(n=>document.getElementById(n)).filter(Boolean),r=n=>{re.forEach(o=>{const a=o.dataset.navSection===n;o.classList.toggle("is-active",a),o.setAttribute("aria-current",a?"true":"false")}),ie(),Nt(n),at(n),lt(n),oe({currentSectionId:n,contextIntent:Mt(n)}),S&&S.id===n&&(L("nav_jump_success",{id:n,source:S.source}),S=null,W&&(clearTimeout(W),W=null))};if(t.length){const n=new IntersectionObserver(o=>{o.forEach(a=>{if(!a.isIntersecting)return;const c=a.target.id;r(c)})},{rootMargin:"-35% 0px -55% 0px",threshold:.01});t.forEach(o=>n.observe(o))}}I.length&&at(I[0]);const Rt={trust:["формат","первый визит","ритуал"],services:["услуги","классика","релакс","лимфо","осанка"],scanner:["сканер","зоны","диагностика","точки"],"goal-routes":["маршруты","сценарии","цели"],packages:["пакеты","планы","форматы"],results:["результат","эффект","после"],blog:["блог","гайды","статьи"],"how-to-book":["запись","как записаться","инструкция"],booking:["контакт","записаться","диалог"]},Ft={trust:"Первый визит",services:"Выбор формата",scanner:"Сигналы тела","goal-routes":"Маршруты запроса",packages:"Пакеты и ритм",results:"Что изменится",blog:"Гайды и кейсы","how-to-book":"Шаги записи",booking:"Старт диалога"},ct=(()=>{const e=new Map;return re.forEach(t=>{const r=t.dataset.navSection||"";if(!r)return;const n=(t.textContent||"").trim()||t.dataset.label||t.getAttribute("aria-label")||r,o=t.getAttribute("href")||"";if(!(!o||!n)&&!e.has(r)){const a=Rt[r]||[],c=(t.dataset.search||"").trim(),s=[n,r,...a,c].join(" ").toLowerCase();e.set(r,{id:r,label:n,href:o,search:s})}}),Array.from(e.values())})(),_t=ct.map(e=>({id:e.id,label:e.label,href:e.href,hint:Ft[e.id]||"Раздел"}));let D=[],q=0;const it=(e="")=>{if(!K)return;const t=e.trim().toLowerCase();if(K.innerHTML="",D=ct.filter(r=>r.search.includes(t)),!D.length){const r=document.createElement("li");r.className="nav-command-empty",r.textContent="Ничего не найдено",K.appendChild(r);return}D.forEach((r,n)=>{const o=document.createElement("li"),a=document.createElement("button");a.type="button",a.className="nav-command-item",a.dataset.index=String(n),a.dataset.href=r.href,a.innerHTML=`${r.label}<span>${r.id}</span>`,a.addEventListener("click",()=>{ge(r.href,"command")||(window.location.href=r.href),N()}),o.appendChild(a),K.appendChild(o)}),q=0,Ae(q)};function Ae(e){if(!K)return;Array.from(K.querySelectorAll(".nav-command-item")).forEach((r,n)=>{r.classList.toggle("is-active",n===e)})}let _e=!1;const Ht=()=>{!ne||_e||(ne.innerHTML="",_t.forEach(e=>{const t=document.createElement("li"),r=document.createElement("button");r.type="button",r.className="nav-map-card",r.dataset.navMapId=e.id,r.dataset.href=e.href,r.innerHTML=`<span class="nav-map-card-title">${e.label}</span><span class="nav-map-card-desc">${e.hint}</span>`,r.addEventListener("click",()=>{ge(e.href,"map")||(window.location.href=e.href),se()}),t.appendChild(r),ne.appendChild(t)}),_e=!0,E.currentSectionId&&lt(E.currentSectionId))},lt=e=>{if(!ne)return;ne.querySelectorAll(".nav-map-card").forEach(r=>{r.classList.toggle("is-active",r.dataset.navMapId===e)})};function ut(){if(!y)return;H=document.activeElement,M(),N(),Ht(),y.classList.remove("hidden"),y.classList.add("is-open"),y.setAttribute("aria-hidden","false"),v.classList.add("nav-map-open"),pe.forEach(t=>t.setAttribute("aria-expanded","true")),L("menu_open",{source:"map"});const e=nt();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})}function se(){if(y&&y.classList.contains("is-open")){if(y.classList.remove("is-open"),y.classList.add("hidden"),y.setAttribute("aria-hidden","true"),v.classList.remove("nav-map-open"),pe.forEach(e=>e.setAttribute("aria-expanded","false")),L("menu_close",{source:"map"}),H&&typeof H.focus=="function")try{H.focus({preventScroll:!0})}catch{H.focus()}H=null}}function dt(){h&&(_=document.activeElement,M(),se(),h.classList.remove("hidden"),h.classList.add("is-open"),h.setAttribute("aria-hidden","false"),v.classList.add("command-open"),me.forEach(e=>e.setAttribute("aria-expanded","true")),L("menu_open",{source:"command"}),U&&(U.value="",it(""),requestAnimationFrame(()=>U.focus())))}function N(){if(h&&h.classList.contains("is-open")){if(h.classList.remove("is-open"),h.classList.add("hidden"),h.setAttribute("aria-hidden","true"),v.classList.remove("command-open"),me.forEach(e=>e.setAttribute("aria-expanded","false")),L("menu_close",{source:"command"}),_&&typeof _.focus=="function")try{_.focus({preventScroll:!0})}catch{_.focus()}_=null}}h&&h.addEventListener("click",e=>{e.target===h&&N()});Oe&&Oe.addEventListener("click",N);me.forEach(e=>e.addEventListener("click",dt));y&&y.addEventListener("click",e=>{e.target===y&&se()});$e&&$e.addEventListener("click",se);pe.forEach(e=>e.addEventListener("click",ut));U&&(U.addEventListener("input",e=>{it(e.target.value||"")}),U.addEventListener("keydown",e=>{if(e.key==="Escape"){e.preventDefault(),N();return}if(D.length&&(e.key==="ArrowDown"&&(e.preventDefault(),q=(q+1)%D.length,Ae(q)),e.key==="ArrowUp"&&(e.preventDefault(),q=(q-1+D.length)%D.length,Ae(q)),e.key==="Enter")){e.preventDefault();const t=D[q];t&&(ge(t.href,"command")||(window.location.href=t.href),N())}}));document.addEventListener("keydown",e=>{const t=h&&h.classList.contains("is-open"),r=y&&y.classList.contains("is-open");if(r&&e.key==="Tab"){const n=nt();if(!n.length)return;const o=n[0],a=n[n.length-1],c=document.activeElement;e.shiftKey&&c===o?(e.preventDefault(),a.focus()):!e.shiftKey&&c===a&&(e.preventDefault(),o.focus())}if(t&&e.key==="Tab"){const n=Tt();if(!n.length)return;const o=n[0],a=n[n.length-1],c=document.activeElement;e.shiftKey&&c===o?(e.preventDefault(),a.focus()):!e.shiftKey&&c===a&&(e.preventDefault(),o.focus())}if(t&&e.key==="Escape"){e.preventDefault(),N();return}if(r&&e.key==="Escape"){e.preventDefault(),se();return}(e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),dt()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key.toLowerCase()==="m"&&(e.preventDefault(),ut())});function xe(e){if(!O||!J)return;if(!e){J.style.opacity="0";return}const t=e.getBoundingClientRect(),r=O.getBoundingClientRect(),n=Math.max(t.left-r.left,0);J.style.width=`${t.width}px`,J.style.transform=`translateX(${n}px)`,J.style.opacity="1"}function ie(){if(!ue.length)return;const e=O.querySelector("[data-nav-section].is-active")||ue[0];xe(e)}ue.length&&(ue.forEach(e=>{e.addEventListener("mouseenter",()=>xe(e)),e.addEventListener("focus",()=>xe(e))}),O.addEventListener("mouseleave",ie),window.addEventListener("resize",()=>requestAnimationFrame(ie)),requestAnimationFrame(ie));let He=0;if(G||he){let e=!1;const t=()=>{e||(e=!0,requestAnimationFrame(()=>{const r=window.scrollY||0;if(G&&G.classList.toggle("nav-compact",r>12),he){const n=document.documentElement,o=n.scrollHeight-n.clientHeight,a=o>0?Math.min(r/o,1):0;he.style.transform=`scaleX(${a})`,de&&de.style.setProperty("--rail-progress",a.toFixed(4)),oe({scrollProgress:a})}if(G){const n=G.getBoundingClientRect().height;Math.abs(n-He)>1&&(document.documentElement.style.setProperty("--anchor-offset",`${Math.round(n+12)}px`),He=n)}e=!1}))};window.addEventListener("scroll",t,{passive:!0}),t()}const ee=document.getElementById("scan-line"),Ye=document.getElementById("scanner")||document.getElementById("scanner-section");ee&&Ye&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&!x&&!B?ee.classList.add("animate-scan"):ee.classList.remove("animate-scan")})},{threshold:.22}).observe(Ye):ee&&!x&&!B&&ee.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(x||B)return;const t=e.target.closest(".ripple-container");if(!t)return;const r=document.createElement("span"),n=Math.max(t.clientWidth,t.clientHeight),o=n/2,a=t.getBoundingClientRect();r.style.width=r.style.height=`${n}px`,r.style.left=`${e.clientX-a.left-o}px`,r.style.top=`${e.clientY-a.top-o}px`,r.classList.add("ripple");const c=t.querySelector(".ripple");c&&c.remove(),t.appendChild(r)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;const r=t.getAttribute("href")||"";if(!/wa\.me/.test(r))return;e.preventDefault();const n=t.innerText,o=t.offsetWidth;t.style.width=`${o}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=Je,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=n,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const Ze=document.getElementById("scanner")||document.getElementById("scanner-section"),be=Ze?At({root:Ze,phoneDigits:Ge,whatsappLoadingText:Je,reducedEffects:x}):null;be&&(window.__openZone=e=>be.openZone(e),window.__scannerDebug=be.debug);const Yt=Array.from(document.querySelectorAll("[data-compare]"));Yt.forEach(e=>{const t=e.querySelector(".compare-range");if(!t)return;const r=()=>{e.style.setProperty("--compare",`${t.value}%`)};t.addEventListener("input",r),t.addEventListener("change",r),r()});const Zt=Array.from(document.querySelectorAll("[data-service-tabs]"));Zt.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-service-tab]")),r=Array.from(e.querySelectorAll("[data-service-panel]"));if(!t.length||!r.length)return;const n=(a,c=!1)=>{t.forEach(s=>{const i=s.dataset.serviceTab===a;s.classList.toggle("is-active",i),s.setAttribute("aria-selected",String(i)),i&&c&&s.focus()}),r.forEach(s=>{const i=s.dataset.servicePanel===a;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))})},o=t.find(a=>a.classList.contains("is-active"))||t[0];o&&n(o.dataset.serviceTab),t.forEach((a,c)=>{a.addEventListener("click",()=>n(a.dataset.serviceTab)),a.addEventListener("keydown",s=>{if(s.key==="ArrowRight"||s.key==="ArrowDown"){s.preventDefault();const i=t[c+1]||t[0];n(i.dataset.serviceTab,!0)}if(s.key==="ArrowLeft"||s.key==="ArrowUp"){s.preventDefault();const i=t[c-1]||t[t.length-1];n(i.dataset.serviceTab,!0)}})})});const Kt=Array.from(document.querySelectorAll("[data-accordion]"));Kt.forEach(e=>{const t=Array.from(e.querySelectorAll(".trust-accordion-item"));if(!t.length)return;const r=(n,o)=>{n&&(o?(n.style.height=`${n.scrollHeight}px`,setTimeout(()=>{n.style.height="auto"},260)):(n.style.height==="auto"&&(n.style.height=`${n.scrollHeight}px`),requestAnimationFrame(()=>{n.style.height="0px"})))};t.forEach(n=>{const o=n.querySelector(".trust-accordion-trigger"),a=n.querySelector(".trust-accordion-panel");if(!o||!a)return;const c=n.classList.contains("is-open");o.setAttribute("aria-expanded",String(c)),a.setAttribute("aria-hidden",String(!c)),r(a,c),o.addEventListener("click",()=>{const s=!n.classList.contains("is-open");t.forEach(i=>{const f=i.querySelector(".trust-accordion-trigger"),m=i.querySelector(".trust-accordion-panel"),b=i===n?s:!1;i.classList.toggle("is-open",b),f&&f.setAttribute("aria-expanded",String(b)),m&&(m.setAttribute("aria-hidden",String(!b)),r(m,b))})})})});const Xt=Array.from(document.querySelectorAll("[data-scenario-carousel]"));Xt.forEach(e=>{const t=e.querySelector(".scenario-track"),r=e.querySelector(".scenario-prev"),n=e.querySelector(".scenario-next");if(!t)return;const o=a=>{const c=t.querySelector(".scenario-card"),s=c?c.getBoundingClientRect().width:260;t.scrollBy({left:a*(s+20),behavior:"smooth"})};r&&r.addEventListener("click",()=>o(-1)),n&&n.addEventListener("click",()=>o(1))});const jt=Array.from(document.querySelectorAll("[data-expectation-switch]"));jt.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-expectation-tab]")),r=e.closest("section")||document,n=Array.from(r.querySelectorAll("[data-expectation-panel]"));if(!t.length||!n.length)return;const o=c=>{t.forEach(s=>{const i=s.dataset.expectationTab===c;s.classList.toggle("is-active",i),s.setAttribute("aria-selected",String(i))}),n.forEach(s=>{const i=s.dataset.expectationPanel===c;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))})},a=t.find(c=>c.classList.contains("is-active"))||t[0];a&&o(a.dataset.expectationTab),t.forEach(c=>{c.addEventListener("click",()=>o(c.dataset.expectationTab))})});const z=Array.from(document.querySelectorAll(".step-btn[data-step]")),Ke=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),Xe=document.getElementById("ritual-progress"),je=document.getElementById("ritual-prev"),Ue=document.getElementById("ritual-next");let P=1;const $=(e,t=!1)=>{if(!z.length||!Ke.length)return;const r=z.length,n=Math.min(Math.max(e,1),r);P=n,z.forEach(o=>{const c=Number(o.dataset.step)===n;o.classList.toggle("active",c),o.setAttribute("aria-selected",String(c)),c&&t&&o.focus()}),Ke.forEach(o=>{const c=Number(o.id.replace("ritual-step-",""))===n;o.classList.toggle("is-active",c),o.setAttribute("aria-hidden",String(!c))}),Xe&&(Xe.style.width=`${n/r*100}%`)};if(z.length){const e=z.find(r=>r.classList.contains("active")),t=e?Number(e.dataset.step):1;if($(t),z.forEach(r=>{const n=Number(r.dataset.step);r.addEventListener("click",()=>$(n)),r.addEventListener("keydown",o=>{o.key==="ArrowRight"&&(o.preventDefault(),$(P+1,!0)),o.key==="ArrowLeft"&&(o.preventDefault(),$(P-1,!0))})}),je&&je.addEventListener("click",()=>$(P-1)),Ue&&Ue.addEventListener("click",()=>$(P+1)),!x){const r=document.getElementById("ritual");let n;const o=()=>{n||(n=setInterval(()=>{const c=P>=z.length?1:P+1;$(c)},5200))},a=()=>{clearInterval(n),n=null};r&&"IntersectionObserver"in window&&new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting?o():a()})},{threshold:.4}).observe(r)}}const te={};let We=!1;function Ut(){if(We)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),r=document.getElementById("protocol-note"),n=document.getElementById("protocol-cta");if(!e.length||!t||!r||!n)return;const o=(c,s)=>{const i=s.closest("[data-protocol-group]");i&&(i.querySelectorAll(".protocol-chip").forEach(f=>{const m=f===s;f.classList.toggle("is-active",m),f.setAttribute("aria-pressed",String(m))}),te[c]={value:s.dataset.value||"",label:s.dataset.label||s.innerText.trim()},a())},a=()=>{var b,R,V,T;const c=((b=te.goal)==null?void 0:b.label)||"Восстановление",s=((R=te.zone)==null?void 0:R.label)||"Спина и плечевой пояс",i=((V=te.tempo)==null?void 0:V.label)||"Мягкая интенсивность",f=((T=te.duration)==null?void 0:T.label)||"60 минут";t.innerText=`${c} · ${s} · ${i} · ${f}.`,r.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const m=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${c}, ${s}, интенсивность: ${i}, длительность: ${f}.`);n.href=`https://wa.me/${Ge}?text=${m}`};e.forEach(c=>{const s=c.dataset.protocolGroup,i=Array.from(c.querySelectorAll(".protocol-chip"));i.forEach(m=>{m.setAttribute("aria-pressed","false"),m.addEventListener("click",()=>o(s,m)),m.addEventListener("keydown",b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),o(s,m))})});const f=i.find(m=>m.classList.contains("is-active"))||i[0];f&&o(s,f)}),We=!0}function Wt(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const r=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(n,2300+Math.random()*1200)},n=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&r()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});const Ve=Array.from(document.querySelectorAll("[data-tilt-card]"));Ve.length&&!x&&Qe&&Ve.forEach(r=>{r.addEventListener("mousemove",n=>{const o=r.getBoundingClientRect(),a=(n.clientX-o.left)/o.width-.5,c=(n.clientY-o.top)/o.height-.5,s=a*8,i=-c*8,f=a*12,m=c*12;r.style.transform=`translate3d(${f}px, ${m}px, 0) rotateX(${i}deg) rotateY(${s}deg)`}),r.addEventListener("mouseleave",()=>{r.style.transform=""})});
