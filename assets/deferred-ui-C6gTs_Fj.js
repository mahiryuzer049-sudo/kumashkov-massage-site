import{g as L}from"./runtime-env-BTGPA9v1.js";const $=()=>{const{win:n,doc:u}=L();if(!u)return Promise.resolve();const c=Array.from(u.querySelectorAll("[data-ds]"));if(!c.length)return Promise.resolve();const e=n&&typeof n.fetch=="function"?n.fetch.bind(n):fetch;return Promise.all(c.map(t=>{const a=t.dataset.ds;return a?(t.setAttribute("aria-busy","true"),e(a,{credentials:"same-origin"}).then(l=>l.ok?l.text():"").then(l=>{l&&(t.outerHTML=l)}).catch(()=>{}).finally(()=>{t&&t.setAttribute&&t.setAttribute("aria-busy","false")})):Promise.resolve()}))},P=()=>{const{doc:n}=L();if(!n)return;Array.from(n.querySelectorAll(".media-frame")).forEach(c=>{const e=c.querySelector("img");if(!e||e.complete&&e.naturalWidth>0)return;c.classList.add("is-loading");const t=()=>{c.classList.remove("is-loading")};e.addEventListener("load",t,{once:!0}),e.addEventListener("error",t,{once:!0})})},I=({reducedEffects:n,lowPowerEffects:u,hasFinePointer:c})=>{const{win:e,doc:t}=L();if(!e||!t)return;const a=t.querySelector(".cursor-dot"),l=t.querySelector(".cursor-circle"),i=t.getElementById("spotlight"),o=t.getElementById("home"),r=t.querySelector(".hero-reveal");let s=e.innerWidth/2,g=e.innerHeight/2,S=s,d=g,f=!1,p=0;if(!a||!l||!i||!o||!r||n||u||!c)return;const v=A=>typeof e.requestAnimationFrame=="function"?e.requestAnimationFrame(A):e.setTimeout(()=>A(Date.now()),16),h=()=>{if(!f)return;const A=.16;if(S+=(s-S)*A,d+=(g-d)*A,l.style.transform=`translate3d(${S}px, ${d}px, 0) translate(-50%, -50%)`,Date.now()-p>1200){f=!1;return}v(h)};i.style.setProperty("--x",`${s}px`),i.style.setProperty("--y",`${g}px`);let m=null;const y=()=>{m=null,a.style.transform=`translate3d(${s}px, ${g}px, 0) translate(-50%, -50%)`,i.style.setProperty("--x",`${s}px`),i.style.setProperty("--y",`${g}px`),f||(f=!0,v(h))},x=A=>{s=A.clientX,g=A.clientY,p=Date.now(),m||(m=v(y))};t.addEventListener("mousemove",x,{passive:!0});let E=o.getBoundingClientRect(),q=null,w=s,T=g;const b=()=>{E=o.getBoundingClientRect()},B=()=>{q=null,E||(E=o.getBoundingClientRect());const A=w-E.left,R=T-E.top;r.style.setProperty("--hero-x",`${A}px`),r.style.setProperty("--hero-y",`${R}px`)},k=A=>{w=A.clientX,T=A.clientY,q||(q=v(B))},C=()=>{r.style.setProperty("--hero-x","50%"),r.style.setProperty("--hero-y","50%")};o.addEventListener("mouseenter",b),o.addEventListener("mousemove",k,{passive:!0}),o.addEventListener("mouseleave",C),e.addEventListener("resize",b),b(),C()},H=()=>{const{doc:n}=L();if(!n)return;Array.from(n.querySelectorAll("[data-compare]")).forEach(c=>{const e=c.querySelector(".compare-range");if(!e)return;const t=()=>{c.style.setProperty("--compare",`${e.value}%`)};e.addEventListener("input",t),e.addEventListener("change",t),t()})},D=()=>{const{doc:n}=L();if(!n)return;Array.from(n.querySelectorAll("[data-service-tabs]")).forEach(c=>{const e=Array.from(c.querySelectorAll("[data-service-tab]")),t=Array.from(c.querySelectorAll("[data-service-panel]"));if(!e.length||!t.length)return;const a=(i,o=!1)=>{e.forEach(r=>{const s=r.dataset.serviceTab===i;r.classList.toggle("is-active",s),r.setAttribute("aria-selected",String(s)),s&&o&&r.focus()}),t.forEach(r=>{const s=r.dataset.servicePanel===i;r.classList.toggle("is-active",s),r.setAttribute("aria-hidden",String(!s))})},l=e.find(i=>i.classList.contains("is-active"))||e[0];l&&a(l.dataset.serviceTab),e.forEach((i,o)=>{i.addEventListener("click",()=>a(i.dataset.serviceTab)),i.addEventListener("keydown",r=>{if(r.key==="ArrowRight"||r.key==="ArrowDown"){r.preventDefault();const s=e[o+1]||e[0];a(s.dataset.serviceTab,!0)}if(r.key==="ArrowLeft"||r.key==="ArrowUp"){r.preventDefault();const s=e[o-1]||e[e.length-1];a(s.dataset.serviceTab,!0)}})})})},F=()=>{const{win:n,doc:u}=L();if(!u)return;const c=t=>n&&typeof n.requestAnimationFrame=="function"?n.requestAnimationFrame(t):setTimeout(t,16);Array.from(u.querySelectorAll("[data-accordion]")).forEach(t=>{const a=Array.from(t.querySelectorAll(".trust-accordion-item"));if(!a.length)return;const l=(i,o)=>{i&&(o?(i.style.height=`${i.scrollHeight}px`,setTimeout(()=>{i.style.height="auto"},260)):(i.style.height==="auto"&&(i.style.height=`${i.scrollHeight}px`),c(()=>{i.style.height="0px"})))};a.forEach(i=>{const o=i.querySelector(".trust-accordion-trigger"),r=i.querySelector(".trust-accordion-panel");if(!o||!r)return;const s=i.classList.contains("is-open");o.setAttribute("aria-expanded",String(s)),r.setAttribute("aria-hidden",String(!s)),l(r,s),o.addEventListener("click",()=>{const g=!i.classList.contains("is-open");a.forEach(S=>{const d=S.querySelector(".trust-accordion-trigger"),f=S.querySelector(".trust-accordion-panel"),p=S===i?g:!1;S.classList.toggle("is-open",p),d&&d.setAttribute("aria-expanded",String(p)),f&&(f.setAttribute("aria-hidden",String(!p)),l(f,p))})})})})},X=()=>{const{doc:n}=L();if(!n)return;Array.from(n.querySelectorAll("[data-scenario-carousel]")).forEach(c=>{const e=c.querySelector(".scenario-track"),t=c.querySelector(".scenario-prev"),a=c.querySelector(".scenario-next");if(!e)return;const l=i=>{const o=e.querySelector(".scenario-card"),r=o?o.getBoundingClientRect().width:260;e.scrollBy({left:i*(r+20),behavior:"smooth"})};t&&t.addEventListener("click",()=>l(-1)),a&&a.addEventListener("click",()=>l(1))})},Y=()=>{const{win:n,doc:u}=L();if(!u)return;const c=t=>n&&typeof n.requestAnimationFrame=="function"?n.requestAnimationFrame(t):setTimeout(t,16);Array.from(u.querySelectorAll("[data-cert-slider]")).forEach(t=>{const a=t.querySelector(".profile-certs-track"),l=t.closest(".profile-certs"),i=l?l.querySelector("[data-cert-prev]"):null,o=l?l.querySelector("[data-cert-next]"):null;if(!a||a.dataset.cloned==="true")return;const r=Array.from(a.children);if(r.length<2)return;r.forEach(m=>{const y=m.cloneNode(!0);y.setAttribute("aria-hidden","true"),y.classList.add("is-clone"),a.appendChild(y)}),a.dataset.cloned="true";let s=0,g=null,S=!1;const d=()=>{const m=a.scrollWidth;s=m>0?m/2:0},f=m=>{if(S)return;S=!0;const y=t.style.scrollSnapType,x=t.style.scrollBehavior;t.style.scrollSnapType="none",t.style.scrollBehavior="auto",t.scrollLeft=m,c(()=>{t.style.scrollSnapType=y,t.style.scrollBehavior=x,S=!1})},p=()=>{s&&(t.scrollLeft>=s?f(t.scrollLeft-s):t.scrollLeft<=0&&f(t.scrollLeft+s))},v=()=>{S||g||(g=c(()=>{p(),g=null}))},h=(m=1)=>{const y=a.querySelector(".profile-cert"),x=y?y.getBoundingClientRect().width:200,E=n&&typeof n.getComputedStyle=="function"?parseFloat(n.getComputedStyle(a).gap||"12"):12,q=x+E;s&&(m>0&&t.scrollLeft>=s-q&&f(t.scrollLeft-s),m<0&&t.scrollLeft<=q&&f(t.scrollLeft+s)),t.scrollBy({left:m*q,behavior:"smooth"}),setTimeout(p,360)};t.addEventListener("scroll",v,{passive:!0}),n&&(n.addEventListener("resize",d),n.addEventListener("load",d)),d(),t.scrollLeft<=0&&(t.scrollLeft=1),i&&i.addEventListener("click",()=>h(-1)),o&&o.addEventListener("click",()=>h(1))})},M=()=>{const{doc:n}=L();if(!n)return;Array.from(n.querySelectorAll("[data-expectation-switch]")).forEach(c=>{const e=Array.from(c.querySelectorAll("[data-expectation-tab]")),t=c.closest("section")||n,a=Array.from(t.querySelectorAll("[data-expectation-panel]"));if(!e.length||!a.length)return;const l=o=>{e.forEach(r=>{const s=r.dataset.expectationTab===o;r.classList.toggle("is-active",s),r.setAttribute("aria-selected",String(s))}),a.forEach(r=>{const s=r.dataset.expectationPanel===o;r.classList.toggle("is-active",s),r.setAttribute("aria-hidden",String(!s))})},i=e.find(o=>o.classList.contains("is-active"))||e[0];i&&l(i.dataset.expectationTab),e.forEach(o=>{o.addEventListener("click",()=>l(o.dataset.expectationTab))})})},W=({reducedEffects:n,isQaVisual:u})=>{const{win:c,doc:e}=L();if(!c||!e)return;const t=Array.from(e.querySelectorAll(".step-btn[data-step]")),a=Array.from(e.querySelectorAll('[id^="ritual-step-"]')),l=e.getElementById("ritual-progress"),i=e.getElementById("ritual-prev"),o=e.getElementById("ritual-next");let r=1;const s=(d,f=!1)=>{if(!t.length||!a.length)return;const p=t.length,v=Math.min(Math.max(d,1),p);r=v,t.forEach(h=>{const y=Number(h.dataset.step)===v;h.classList.toggle("active",y),h.setAttribute("aria-selected",String(y)),y&&f&&h.focus()}),a.forEach(h=>{const y=Number(h.id.replace("ritual-step-",""))===v;h.classList.toggle("is-active",y),h.setAttribute("aria-hidden",String(!y))}),l&&(l.style.width=`${v/p*100}%`)};if(!t.length)return;const g=t.find(d=>d.classList.contains("active")),S=g?Number(g.dataset.step):1;if(s(S),t.forEach(d=>{const f=Number(d.dataset.step);d.addEventListener("click",()=>s(f)),d.addEventListener("keydown",p=>{p.key==="ArrowRight"&&(p.preventDefault(),s(r+1,!0)),p.key==="ArrowLeft"&&(p.preventDefault(),s(r-1,!0))})}),i&&i.addEventListener("click",()=>s(r-1)),o&&o.addEventListener("click",()=>s(r+1)),!n&&!u){const d=e.getElementById("ritual");let f;const p=()=>{f||(f=c.setInterval(()=>{const h=r>=t.length?1:r+1;s(h)},5200))},v=()=>{c.clearInterval(f),f=null};d&&"IntersectionObserver"in c&&new c.IntersectionObserver(m=>{m.forEach(y=>{y.isIntersecting?p():v()})},{threshold:.4}).observe(d)}},N=({reducedEffects:n,hasFinePointer:u})=>{const{win:c,doc:e}=L();if(!e)return;const t=Array.from(e.querySelectorAll("[data-tilt-card]"));if(!t.length||n||!u)return;const a=o=>c&&typeof c.requestAnimationFrame=="function"?c.requestAnimationFrame(o):setTimeout(o,16),l=8,i=12;t.forEach(o=>{let r=null,s=null,g=0,S=0;const d=()=>{r=o.getBoundingClientRect()},f=()=>{s=null,r||d();const v=(g-r.left)/r.width-.5,h=(S-r.top)/r.height-.5,m=v*l,y=-h*l,x=v*i,E=h*i;o.style.transform=`translate3d(${x}px, ${E}px, 0) rotateX(${y}deg) rotateY(${m}deg)`},p=v=>{g=v.clientX,S=v.clientY,s||(s=a(f))};o.addEventListener("mouseenter",d),o.addEventListener("mousemove",p,{passive:!0}),o.addEventListener("mouseleave",()=>{o.style.transform=""})})},O=({reducedEffects:n,lowPowerEffects:u})=>{const{doc:c,nav:e}=L();c&&(c.querySelectorAll(".btn-vibrate").forEach(t=>{t.addEventListener("click",()=>{e&&e.vibrate&&e.vibrate(15)})}),c.addEventListener("click",t=>{if(n||u)return;const a=t.target.closest(".ripple-container");if(!a)return;const l=c.createElement("span"),i=Math.max(a.clientWidth,a.clientHeight),o=i/2,r=a.getBoundingClientRect();l.style.width=l.style.height=`${i}px`,l.style.left=`${t.clientX-r.left-o}px`,l.style.top=`${t.clientY-r.top-o}px`,l.classList.add("ripple");const s=a.querySelector(".ripple");s&&s.remove(),a.appendChild(l)}))},U=({reducedEffects:n=!1,lowPowerEffects:u=!1,hasFinePointer:c=!1,isQaVisual:e=!1}={})=>{$().then(()=>{P(),I({reducedEffects:n,lowPowerEffects:u,hasFinePointer:c}),H(),D(),F(),X(),Y(),M(),W({reducedEffects:n,isQaVisual:e}),N({reducedEffects:n,hasFinePointer:c}),O({reducedEffects:n,lowPowerEffects:u})}).catch(()=>{})};export{U as initDeferredUI};
