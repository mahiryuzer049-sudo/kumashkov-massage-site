(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const lt={head:{title:"Перегрузка головы",med:"Ментальное напряжение",image:"/assets/images/scanner/zone-head.jpg",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",image:"/assets/images/scanner/zone-neck.jpg",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",image:"/assets/images/scanner/zone-shoulders.jpg",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общее напряжение.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины",image:"/assets/images/scanner/zone-back.jpg",desc:"Зажим в спине влияет на осанку, сон и энергию. В протокол включим мягкую глубокую проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина, хочу подобрать индивидуальный сеанс."},lumbar:{title:"Поясница под нагрузкой",med:"Напряжение поясничной зоны",image:"/assets/images/scanner/zone-back.jpg",desc:"Поясница часто реагирует на сидячий режим, стресс и нехватку движения. Мягкая глубокая работа снимет спазм, вернет поддержку и ощущение устойчивости.",msg:"Здравствуйте! Беспокоит поясница, хочу подобрать сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",image:"/assets/images/scanner/zone-legs.jpg",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},ut={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",lumbar:"hips",legs:"legs"},dt="Здравствуйте! Хочу записаться на массаж.",ft=e=>String(e).replace(/\D/g,""),De=e=>String(e||"").trim().toLowerCase(),mt=e=>{const t=e.match(/\.(jpe?g|png)$/i);if(!t)return`url("${e}")`;const n=t[0],o=e.slice(0,-n.length),r=n.toLowerCase()===".png"?"image/png":"image/jpeg";return`image-set(url("${o}.avif") type("image/avif"), url("${o}.webp") type("image/webp"), url("${e}") type("${r}"))`},fe=(e,t)=>{if(!e)return"";if(e.dataset&&e.dataset[t])return e.dataset[t];const n=t.replace(/[A-Z]/g,o=>`-${o.toLowerCase()}`);return typeof e.getAttribute=="function"&&e.getAttribute(`data-${n}`)||""},Me=e=>fe(e,"point")||fe(e,"zoneShortcut"),pt=e=>Array.from(e.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(t=>!t.hasAttribute("disabled")),gt=e=>{const t=e.querySelector("#zone-popup"),n=e.querySelector("#zone-title"),o=e.querySelector("#zone-med"),r=e.querySelector("#zone-desc"),a=e.querySelector("#zone-cta"),c=e.querySelector("#zone-close"),s=e.querySelector("#scanner-container"),i=Array.from(e.querySelectorAll(".active-point")),f=Array.from(e.querySelectorAll("[data-zone-shortcut]"));return!t||!n||!o||!r||!s?null:{popup:t,title:n,med:o,desc:r,cta:a,close:c,container:s,points:i,shortcuts:f}},ht=(e={})=>{const t=e.root||document.getElementById("scanner")||document.getElementById("scanner-section");if(!t)return null;const n=e.zoneData||lt,o=e.protocolZoneMap||ut,r=typeof e.reducedEffects=="boolean"?e.reducedEffects:window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=e.phoneDigits||ft(document.body.dataset.phone||"79260899019"),c=e.whatsappLoadingText||"Переход в чат...",s=gt(t);if(!s)return null;const i={isOpen:!1,activeZone:null,lastTrigger:null,typeTimer:null,currentMsg:""};let f=!1;const p=l=>{s.points.forEach(u=>{const d=fe(u,"point")===l;u.classList.toggle("selected",d),u.setAttribute("aria-pressed",String(d))}),s.shortcuts.forEach(u=>{const d=fe(u,"zoneShortcut")===l;u.classList.toggle("is-active",d),u.setAttribute("aria-pressed",String(d))}),s.container.dataset.activeZone=l||""},h=l=>{if(clearTimeout(i.typeTimer),s.desc.innerText="",r){s.desc.innerText=l;return}let u=0;const d=()=>{s.desc.innerText+=l.charAt(u),u+=1,u<l.length&&(i.typeTimer=setTimeout(d,14))};d()},I=l=>{s.popup.dataset.open=l?"true":"false",s.popup.classList.toggle("open",l),s.popup.setAttribute("aria-hidden",l?"false":"true")},R=(l,u={})=>{const d=De(l),g=n[d];if(!g)return!1;const le=u.trigger||null,Ce=!!u.focus;navigator.vibrate&&navigator.vibrate(10),i.isOpen=!0,i.activeZone=d,i.lastTrigger=le||document.activeElement,i.currentMsg=g.msg||"",s.popup.dataset.active=d,s.title.innerText=g.title,s.med.innerText=g.med,h(g.desc),g.image?(s.popup.style.setProperty("--zone-image-fallback",`url("${g.image}")`),s.popup.style.setProperty("--zone-image",mt(g.image))):(s.popup.style.removeProperty("--zone-image-fallback"),s.popup.style.removeProperty("--zone-image")),I(!0),p(d),it(),Ce&&s.close&&typeof s.close.focus=="function"&&requestAnimationFrame(()=>{try{s.close.focus({preventScroll:!0})}catch{s.close.focus()}});const Be=o[d];if(Be){const Oe=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${Be}"]`);Oe&&Oe.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))}return!0},A=()=>{if(i.isOpen){if(clearTimeout(i.typeTimer),i.isOpen=!1,i.activeZone=null,i.currentMsg="",s.popup.dataset.active="",s.popup.style.removeProperty("--zone-image-fallback"),s.popup.style.removeProperty("--zone-image"),I(!1),p(""),Ie(),i.lastTrigger&&typeof i.lastTrigger.focus=="function")try{i.lastTrigger.focus({preventScroll:!0})}catch{i.lastTrigger.focus()}i.lastTrigger=null}},E=(l,u,d=!1)=>{const g=De(l);return i.isOpen&&i.activeZone===g?(A(),!1):R(g,{trigger:u,focus:d})},x=l=>{l.preventDefault(),l.stopPropagation();const u=l.currentTarget;if(!(u instanceof Element))return;const d=Me(u);d&&E(d,u,!1)},M=l=>{if(!(l.key==="Enter"||l.key===" "))return;l.preventDefault(),l.stopPropagation();const d=l.currentTarget;if(!(d instanceof Element))return;const g=Me(d);g&&E(g,d,!0)},ie=l=>{if(!i.isOpen)return;const u=l.target;if(s.popup.contains(u))return;const d=u.closest(".active-point,[data-zone-shortcut]");d&&t.contains(d)||A()},H=l=>{if(!i.isOpen)return;if(l.key==="Escape"){l.preventDefault(),A();return}if(l.key!=="Tab"||!s.popup.contains(document.activeElement))return;const u=pt(s.popup);if(!u.length)return;const d=u[0],g=u[u.length-1];l.shiftKey&&document.activeElement===d?(l.preventDefault(),g.focus()):!l.shiftKey&&document.activeElement===g&&(l.preventDefault(),d.focus())},it=()=>{f||(document.addEventListener("click",ie),document.addEventListener("keydown",H),f=!0)},Ie=()=>{f&&(document.removeEventListener("click",ie),document.removeEventListener("keydown",H),f=!1)},qe=()=>{var g;if(!s.cta)return;navigator.vibrate&&navigator.vibrate(18);const l=s.cta.innerText;s.cta.innerText=c;const u=i.currentMsg||((g=n[i.activeZone])==null?void 0:g.msg)||dt,d=encodeURIComponent(u);setTimeout(()=>{const le=`https://wa.me/${a}?text=${d}`;window.open(le,"_blank","noopener,noreferrer")||(window.location.href=le),setTimeout(()=>{s.cta.innerText=l},900)},550)};return s.points.forEach(l=>{l.setAttribute("aria-pressed","false"),l.setAttribute("aria-controls","zone-popup"),l.addEventListener("click",x),l.addEventListener("keydown",M)}),s.shortcuts.forEach(l=>{l.setAttribute("aria-pressed","false"),l.setAttribute("aria-controls","zone-popup"),l.addEventListener("click",x),l.addEventListener("keydown",M)}),s.popup.dataset.active="",I(!1),s.close&&s.close.addEventListener("click",A),s.cta&&s.cta.addEventListener("click",qe),{openZone:R,closeZone:A,destroy:()=>{Ie(),s.points.forEach(l=>{l.removeEventListener("click",x),l.removeEventListener("keydown",M)}),s.shortcuts.forEach(l=>{l.removeEventListener("click",x),l.removeEventListener("keydown",M)}),s.close&&s.close.removeEventListener("click",A),s.cta&&s.cta.removeEventListener("click",qe)},debug:()=>({popup:!!s.popup,title:!!s.title,med:!!s.med,desc:!!s.desc,cta:!!s.cta,points:s.points.length,shortcuts:s.shortcuts.length,popupOpen:!!s.popup.classList.contains("open"),active:s.popup.dataset.active||""})}},m=document.body,Je=(m.dataset.phone||"79260899019").replace(/\D/g,""),Qe="Переход в чат...",yt=window.matchMedia("(prefers-reduced-motion: reduce)"),vt=yt.matches,bt=!!(navigator.connection&&navigator.connection.saveData),Et=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,xt=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,O=Et||xt,w=vt||bt,Se=window.matchMedia("(pointer: fine)").matches;w&&m.classList.add("reduced-effects");O&&m.classList.add("low-power-effects");const b=document.getElementById("mobile-menu-toggle"),y=document.getElementById("mobile-menu"),T=document.getElementById("mobile-menu-overlay");let Y=null;const ee=document.getElementById("navbar"),z=document.querySelector("[data-nav-primary]"),te=z?z.querySelector(".nav-highlight"):null,xe=z?Array.from(z.querySelectorAll("[data-nav-section]")):[],ye=document.getElementById("nav-progress"),S=document.querySelector("[data-sticky-cta]"),j=document.getElementById("sticky-context"),$e=document.getElementById("mobile-active-section"),X=S?{text:S.textContent.trim(),href:S.getAttribute("href")||""}:null,Pe=j?j.textContent.trim():"",ze=Number(m.dataset.metrika||0),v=document.getElementById("nav-command"),G=document.getElementById("nav-command-input"),W=document.getElementById("nav-command-list"),Re=document.getElementById("nav-command-close"),he=Array.from(document.querySelectorAll("[data-command-trigger]"));let Z=null;const me=document.querySelector(".section-rail"),Fe=document.getElementById("rail-current"),Ne=document.getElementById("rail-next"),et=me?Array.from(me.querySelectorAll("[data-nav-section]")):[],At=()=>{Array.from(document.querySelectorAll('a.whatsapp-link, a[href*="wa.me/"], a[href*="t.me/"]')).forEach(t=>{t instanceof HTMLAnchorElement&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"))})};At();const ke=()=>{const e=window.innerWidth||document.documentElement.clientWidth||0;return e>=1280?"desktop":e>=768?"tablet":"mobile"},L={currentSectionId:"",scrollProgress:0,viewportMode:ke(),menuOpen:!1,contextIntent:"explore",reducedMotion:w};he.forEach(e=>{e.hasAttribute("aria-controls")||e.setAttribute("aria-controls","nav-command"),e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false")});const ce=e=>{Object.assign(L,e),L.currentSectionId&&(m.dataset.activeSection=L.currentSectionId),L.contextIntent&&(m.dataset.navIntent=L.contextIntent),Number.isFinite(L.scrollProgress)&&m.style.setProperty("--nav-scroll",L.scrollProgress.toFixed(4))};window.addEventListener("resize",()=>{const e=ke();ce({viewportMode:e}),e!=="mobile"&&B()});const D=(e,t={})=>{const n={name:e,...t,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("nav-event",{detail:n})),Array.isArray(window.dataLayer)&&window.dataLayer.push({event:e,...t}),ze&&typeof window.ym=="function"&&window.ym(ze,"reachGoal",e,t)},Lt=()=>v?Array.from(v.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],tt=()=>y?Array.from(y.querySelectorAll('a,button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[];let Ae=0;const wt=()=>{ke()==="mobile"&&(m.classList.contains("scroll-locked")||(Ae=window.scrollY||window.pageYOffset||0,m.style.position="fixed",m.style.top=`-${Ae}px`,m.style.left="0",m.style.right="0",m.style.width="100%",m.classList.add("scroll-locked"),document.documentElement.classList.add("scroll-locked")))},St=()=>{m.classList.contains("scroll-locked")&&(m.classList.remove("scroll-locked"),m.style.position="",m.style.top="",m.style.left="",m.style.right="",m.style.width="",document.documentElement.classList.remove("scroll-locked"),window.scrollTo(0,Ae))},B=()=>{if(!(!b||!y||!(b.getAttribute("aria-expanded")==="true"))){if(St(),b.setAttribute("aria-expanded","false"),y.classList.add("hidden"),y.setAttribute("aria-hidden","true"),y.dataset.open="false",m.classList.remove("menu-open"),ce({menuOpen:!1}),D("menu_close",{source:"mobile"}),T&&(T.classList.remove("is-open"),T.setAttribute("aria-hidden","true"),T.classList.add("hidden")),Y&&typeof Y.focus=="function")try{Y.focus({preventScroll:!0})}catch{Y.focus()}Y=null}},kt=()=>{if(!b||!y)return;Y=document.activeElement,b.setAttribute("aria-expanded","true"),y.classList.remove("hidden"),y.setAttribute("aria-hidden","false"),y.dataset.open="true",m.classList.add("menu-open"),wt(),ce({menuOpen:!0}),D("menu_open",{source:"mobile"}),T&&(T.classList.remove("hidden"),T.classList.add("is-open"),T.setAttribute("aria-hidden","false"));const e=tt();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})};if(b&&y){b.addEventListener("click",()=>{b.getAttribute("aria-expanded")==="true"?B():kt()}),y.querySelectorAll("a").forEach(r=>{r.addEventListener("click",B)}),document.addEventListener("click",r=>{if(!(b.getAttribute("aria-expanded")==="true"))return;const c=r.target.closest("#mobile-menu"),s=r.target.closest("#mobile-menu-toggle");!c&&!s&&B()}),T&&T.addEventListener("click",B);const e=r=>{b.getAttribute("aria-expanded")==="true"&&(y.contains(r.target)||r.preventDefault())};document.addEventListener("touchmove",e,{passive:!1});let t=0,n=0,o=!1;y.addEventListener("touchstart",r=>{if(!(b.getAttribute("aria-expanded")==="true"))return;const c=r.touches[0];c&&(t=c.clientY,n=c.clientX,o=!0)},{passive:!0}),y.addEventListener("touchmove",r=>{if(!o)return;const a=r.touches[0];if(!a)return;const c=a.clientY-t,s=a.clientX-n;Math.abs(c)<60||Math.abs(c)<Math.abs(s)||c>0&&y.scrollTop<=0&&(o=!1,B())},{passive:!0}),y.addEventListener("touchend",()=>{o=!1}),document.addEventListener("keydown",r=>{if(r.key==="Escape"&&B(),!(b.getAttribute("aria-expanded")==="true")||r.key!=="Tab")return;const c=tt();if(!c.length)return;const s=c[0],i=c[c.length-1],f=document.activeElement;r.shiftKey&&f===s?(r.preventDefault(),i.focus()):!r.shiftKey&&f===i&&(r.preventDefault(),s.focus())})}window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),Xt(),jt()});const _e=document.querySelector(".cursor-dot"),Le=document.querySelector(".cursor-circle"),ne=document.getElementById("spotlight"),ue=document.getElementById("home"),re=document.querySelector(".hero-reveal");let K=window.innerWidth/2,U=window.innerHeight/2,ve=K,be=U,pe=!1,nt=0;const rt=()=>{if(!pe)return;const e=.16;if(ve+=(K-ve)*e,be+=(U-be)*e,Le&&(Le.style.transform=`translate3d(${ve}px, ${be}px, 0) translate(-50%, -50%)`),Date.now()-nt>1200){pe=!1;return}requestAnimationFrame(rt)};!w&&!O&&Se&&_e&&Le&&ne&&(ne.style.setProperty("--x",`${K}px`),ne.style.setProperty("--y",`${U}px`),document.addEventListener("mousemove",e=>{K=e.clientX,U=e.clientY,nt=Date.now(),_e.style.transform=`translate3d(${K}px, ${U}px, 0) translate(-50%, -50%)`,ne.style.setProperty("--x",`${K}px`),ne.style.setProperty("--y",`${U}px`),pe||(pe=!0,requestAnimationFrame(rt))}));if(!w&&!O&&Se&&ue&&re){const e=n=>{const o=ue.getBoundingClientRect(),r=n.clientX-o.left,a=n.clientY-o.top;re.style.setProperty("--hero-x",`${r}px`),re.style.setProperty("--hero-y",`${a}px`)},t=()=>{re.style.setProperty("--hero-x","50%"),re.style.setProperty("--hero-y","50%")};ue.addEventListener("mousemove",e),ue.addEventListener("mouseleave",t),t()}document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>m.classList.add("hovering")),e.addEventListener("mouseleave",()=>m.classList.remove("hovering"))});const ae=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&n.target.classList.add("visible")})},{threshold:O?.06:.12});ae.forEach((t,n)=>{if(t.dataset.revealDelay&&!O)t.style.transitionDelay=t.dataset.revealDelay;else if(!O){const o=n%4;t.style.transitionDelay=`${o*60}ms`}e.observe(t)})}else ae.forEach(e=>e.classList.add("visible"));const Tt=()=>{if(!ae.length)return;const e=window.innerHeight||document.documentElement.clientHeight||0;ae.forEach(t=>{if(t.classList.contains("visible"))return;const n=t.getBoundingClientRect();n.bottom<=0||n.top>=e*1.2||t.classList.add("visible")})};if(ae.length){let e=null;const t=()=>{e&&window.clearTimeout(e),e=window.setTimeout(Tt,120)};window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),window.addEventListener("load",t),t()}const q=et.map(e=>e.dataset.navSection).filter(Boolean),He=new Map(et.map(e=>[e.dataset.navSection,e.dataset.label||e.getAttribute("aria-label")||(e.textContent||"").trim()||""])),ot=e=>{if(!Fe||!Ne||!q.length)return;const t=q.indexOf(e),n=t>=0?e:q[0],o=t>=0&&t<q.length-1?q[t+1]:q[q.length-1];Fe.textContent=He.get(n)||n,Ne.textContent=He.get(o)||"Финал"},It={home:"explore",trust:"explore",services:"compare",scanner:"explore","goal-routes":"compare",packages:"compare",results:"explore",blog:"explore","how-to-book":"book",booking:"book"},qt=e=>It[e]||"explore";let k=null,J=null;const Ct=()=>{k&&(J&&clearTimeout(J),J=setTimeout(()=>{k&&(D("nav_jump_miss",{id:k.id,source:k.source}),k=null)},2e3))},Bt=e=>{if(!e||typeof e.focus!="function")return;const t=e.hasAttribute("tabindex");t||e.setAttribute("tabindex","-1");try{e.focus({preventScroll:!0})}catch{e.focus()}t||setTimeout(()=>{e.removeAttribute("tabindex")},800)},Te=(e,t="nav")=>{if(!e||e==="#")return!1;let n;try{n=new URL(e,window.location.href)}catch{return!1}if(!n.hash||n.pathname!==window.location.pathname)return!1;const o=n.hash.replace("#","");if(!o)return!1;const r=document.getElementById(o);if(!r)return!1;k={id:o,source:t},Ct(),D("nav_click",{id:o,source:t,href:n.hash});const a=w?"auto":"smooth",c=()=>{r.scrollIntoView({behavior:a,block:"start"}),history.replaceState(null,"",`#${o}`),setTimeout(()=>Bt(r),w?0:240)};return b&&b.getAttribute("aria-expanded")==="true"?(B(),requestAnimationFrame(c)):c(),!0},Ot=e=>e.dataset.analytics||e.dataset.navSection||e.getAttribute("aria-label")||"anchor",Dt=Array.from(document.querySelectorAll('a[href*="#"]'));Dt.forEach(e=>{const t=e.getAttribute("href")||"";!t.includes("#")||t==="#"||e.addEventListener("click",n=>{const o=Ot(e),r=Te(t,o);r&&n.preventDefault(),r||D("nav_click",{href:t,source:o})})});const V=Array.from(document.querySelectorAll("[data-nav-section]")),Mt=()=>{const e=V.find(o=>(o.getAttribute("href")||"").includes("#"));if(!e)return"#";const t=e.getAttribute("href")||"#",n=t.indexOf("#");return t.slice(0,Math.max(n+1,1))},$t=Mt(),$=e=>`${$t}${e}`,Pt={trust:{text:"Выбрать формат",shortText:"Формат",href:$("trust"),context:"Формат визита"},services:{text:"Выбрать услугу",shortText:"Услуга",href:$("services"),context:"Список услуг"},scanner:{text:"Открыть сканер",shortText:"Сканер",href:$("scanner-anchor"),context:"Диагностика зон"},"goal-routes":{text:"Сценарии",shortText:"Маршрут",href:$("goal-routes"),context:"Маршруты запроса"},packages:{text:"Пакеты",shortText:"Пакеты",href:$("packages"),context:"Сценарии и пакеты"},results:{text:"Результат",shortText:"Результат",href:$("results"),context:"Ожидаемый эффект"},blog:{text:"Читать блог",shortText:"Блог",href:$("blog"),context:"Гайды и заметки"},"how-to-book":{text:"Как записаться",shortText:"Запись",href:$("how-to-book"),context:"Алгоритм записи"},booking:{text:"Записаться",shortText:"Запись",href:X?X.href:"",context:"Старт диалога"}},st=e=>{if(!S||!X)return;const t=Pt[e];if(!t){S.textContent=X.text,S.setAttribute("href",X.href),j&&(j.textContent=Pe);return}const n=L.viewportMode==="mobile";S.textContent=n&&t.shortText?t.shortText:t.text,S.setAttribute("href",t.href||X.href),j&&(j.textContent=t.context||Pe)};S&&S.addEventListener("click",()=>{D("cta_from_section",{id:L.currentSectionId||"",intent:L.contextIntent||"explore"})});window.addEventListener("resize",()=>{L.currentSectionId&&st(L.currentSectionId)});if(V.length&&"IntersectionObserver"in window){const e=new Map;V.forEach(o=>{const r=o.dataset.navSection||"";!r||!document.getElementById(r)||(e.has(r)||e.set(r,[]),e.get(r).push(o))});const t=Array.from(e.keys()).map(o=>document.getElementById(o)).filter(Boolean),n=o=>{if(V.forEach(r=>{const a=r.dataset.navSection===o;r.classList.toggle("is-active",a),r.setAttribute("aria-current",a?"true":"false")}),$e){const r=V.find(c=>c.dataset.navSection===o),a=r?(r.textContent||"").trim():"";a&&($e.textContent=a)}de(),st(o),ot(o),ce({currentSectionId:o,contextIntent:qt(o)}),k&&k.id===o&&(D("nav_jump_success",{id:o,source:k.source}),k=null,J&&(clearTimeout(J),J=null))};if(t.length){const o=new IntersectionObserver(r=>{r.forEach(a=>{if(!a.isIntersecting)return;const c=a.target.id;n(c)})},{rootMargin:"-35% 0px -55% 0px",threshold:.01});t.forEach(r=>o.observe(r))}}q.length&&ot(q[0]);const zt={home:["главная","начало","home"],trust:["формат","первый визит","ритуал"],services:["услуги","классика","релакс","лимфо","осанка"],scanner:["сканер","зоны","диагностика","точки"],"goal-routes":["маршруты","сценарии","цели"],packages:["пакеты","планы","форматы"],results:["результат","эффект","после"],blog:["блог","гайды","статьи"],"how-to-book":["запись","как записаться","инструкция"],booking:["контакт","записаться","диалог"]},Rt=(()=>{const e=new Map;return V.forEach(t=>{const n=t.dataset.navSection||"";if(!n)return;const o=(t.textContent||"").trim()||t.dataset.label||t.getAttribute("aria-label")||n,r=t.getAttribute("href")||"";if(!(!r||!o)&&!e.has(n)){const a=zt[n]||[],c=(t.dataset.search||"").trim(),s=[o,n,...a,c].join(" ").toLowerCase();e.set(n,{id:n,label:o,href:r,search:s})}}),Array.from(e.values())})();let P=[],C=0;const at=(e="")=>{if(!W)return;const t=e.trim().toLowerCase();if(W.innerHTML="",P=Rt.filter(n=>n.search.includes(t)),!P.length){const n=document.createElement("li");n.className="nav-command-empty",n.textContent="Ничего не найдено",W.appendChild(n);return}P.forEach((n,o)=>{const r=document.createElement("li"),a=document.createElement("button");a.type="button",a.className="nav-command-item",a.dataset.index=String(o),a.dataset.href=n.href,a.innerHTML=`${n.label}<span>${n.id}</span>`,a.addEventListener("click",()=>{Te(n.href,"command")||(window.location.href=n.href),Q()}),r.appendChild(a),W.appendChild(r)}),C=0,we(C)};function we(e){if(!W)return;Array.from(W.querySelectorAll(".nav-command-item")).forEach((n,o)=>{n.classList.toggle("is-active",o===e)})}function ct(){v&&(Z=document.activeElement,B(),v.classList.remove("hidden"),v.classList.add("is-open"),v.setAttribute("aria-hidden","false"),m.classList.add("command-open"),he.forEach(e=>e.setAttribute("aria-expanded","true")),D("menu_open",{source:"command"}),G&&(G.value="",at(""),requestAnimationFrame(()=>G.focus())))}function Q(){if(v&&v.classList.contains("is-open")){if(v.classList.remove("is-open"),v.classList.add("hidden"),v.setAttribute("aria-hidden","true"),m.classList.remove("command-open"),he.forEach(e=>e.setAttribute("aria-expanded","false")),D("menu_close",{source:"command"}),Z&&typeof Z.focus=="function")try{Z.focus({preventScroll:!0})}catch{Z.focus()}Z=null}}v&&v.addEventListener("click",e=>{e.target===v&&Q()});Re&&Re.addEventListener("click",Q);he.forEach(e=>e.addEventListener("click",ct));G&&(G.addEventListener("input",e=>{at(e.target.value||"")}),G.addEventListener("keydown",e=>{if(e.key==="Escape"){e.preventDefault(),Q();return}if(P.length&&(e.key==="ArrowDown"&&(e.preventDefault(),C=(C+1)%P.length,we(C)),e.key==="ArrowUp"&&(e.preventDefault(),C=(C-1+P.length)%P.length,we(C)),e.key==="Enter")){e.preventDefault();const t=P[C];t&&(Te(t.href,"command")||(window.location.href=t.href),Q())}}));document.addEventListener("keydown",e=>{const t=v&&v.classList.contains("is-open");if(t&&e.key==="Tab"){const n=Lt();if(!n.length)return;const o=n[0],r=n[n.length-1],a=document.activeElement;e.shiftKey&&a===o?(e.preventDefault(),r.focus()):!e.shiftKey&&a===r&&(e.preventDefault(),o.focus())}if(t&&e.key==="Escape"){e.preventDefault(),Q();return}(e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),ct())});function ge(e){if(!z||!te)return;if(!e){te.style.opacity="0";return}const t=e.getBoundingClientRect(),n=z.getBoundingClientRect(),o=Math.max(t.left-n.left,0);te.style.width=`${t.width}px`,te.style.transform=`translateX(${o}px)`,te.style.opacity="1"}function de(){if(!xe.length)return;const e=z.querySelector("[data-nav-section].is-active");if(!e){ge(null);return}ge(e)}xe.length&&(xe.forEach(e=>{e.addEventListener("mouseenter",()=>ge(e)),e.addEventListener("focus",()=>ge(e))}),z.addEventListener("mouseleave",de),window.addEventListener("resize",()=>requestAnimationFrame(de)),requestAnimationFrame(de));let Ye=0;if(ee||ye){let e=!1;const t=()=>{e||(e=!0,requestAnimationFrame(()=>{const n=window.scrollY||0;if(ee&&ee.classList.toggle("nav-compact",n>12),ye){const o=document.documentElement,r=o.scrollHeight-o.clientHeight,a=r>0?Math.min(n/r,1):0;ye.style.transform=`scaleX(${a})`,me&&me.style.setProperty("--rail-progress",a.toFixed(4)),ce({scrollProgress:a})}if(ee){const o=ee.getBoundingClientRect().height;Math.abs(o-Ye)>1&&(document.documentElement.style.setProperty("--anchor-offset",`${Math.round(o+12)}px`),Ye=o)}e=!1}))};window.addEventListener("scroll",t,{passive:!0}),t()}const oe=document.getElementById("scan-line"),Ze=document.getElementById("scanner")||document.getElementById("scanner-section");oe&&Ze&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(n=>{n.isIntersecting&&!w&&!O?oe.classList.add("animate-scan"):oe.classList.remove("animate-scan")})},{threshold:.22}).observe(Ze):oe&&!w&&!O&&oe.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(w||O)return;const t=e.target.closest(".ripple-container");if(!t)return;const n=document.createElement("span"),o=Math.max(t.clientWidth,t.clientHeight),r=o/2,a=t.getBoundingClientRect();n.style.width=n.style.height=`${o}px`,n.style.left=`${e.clientX-a.left-r}px`,n.style.top=`${e.clientY-a.top-r}px`,n.classList.add("ripple");const c=t.querySelector(".ripple");c&&c.remove(),t.appendChild(n)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;const n=t.getAttribute("href")||"";if(!/wa\.me/.test(n))return;e.preventDefault();const o=t.innerText,r=t.offsetWidth;t.style.width=`${r}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=Qe,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=o,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const je=document.getElementById("scanner")||document.getElementById("scanner-section"),Ee=je?ht({root:je,phoneDigits:Je,whatsappLoadingText:Qe,reducedEffects:w}):null;Ee&&(window.__openZone=e=>Ee.openZone(e),window.__scannerDebug=Ee.debug);const Ft=Array.from(document.querySelectorAll("[data-compare]"));Ft.forEach(e=>{const t=e.querySelector(".compare-range");if(!t)return;const n=()=>{e.style.setProperty("--compare",`${t.value}%`)};t.addEventListener("input",n),t.addEventListener("change",n),n()});const Nt=Array.from(document.querySelectorAll("[data-service-tabs]"));Nt.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-service-tab]")),n=Array.from(e.querySelectorAll("[data-service-panel]"));if(!t.length||!n.length)return;const o=(a,c=!1)=>{t.forEach(s=>{const i=s.dataset.serviceTab===a;s.classList.toggle("is-active",i),s.setAttribute("aria-selected",String(i)),i&&c&&s.focus()}),n.forEach(s=>{const i=s.dataset.servicePanel===a;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))})},r=t.find(a=>a.classList.contains("is-active"))||t[0];r&&o(r.dataset.serviceTab),t.forEach((a,c)=>{a.addEventListener("click",()=>o(a.dataset.serviceTab)),a.addEventListener("keydown",s=>{if(s.key==="ArrowRight"||s.key==="ArrowDown"){s.preventDefault();const i=t[c+1]||t[0];o(i.dataset.serviceTab,!0)}if(s.key==="ArrowLeft"||s.key==="ArrowUp"){s.preventDefault();const i=t[c-1]||t[t.length-1];o(i.dataset.serviceTab,!0)}})})});const _t=Array.from(document.querySelectorAll("[data-accordion]"));_t.forEach(e=>{const t=Array.from(e.querySelectorAll(".trust-accordion-item"));if(!t.length)return;const n=(o,r)=>{o&&(r?(o.style.height=`${o.scrollHeight}px`,setTimeout(()=>{o.style.height="auto"},260)):(o.style.height==="auto"&&(o.style.height=`${o.scrollHeight}px`),requestAnimationFrame(()=>{o.style.height="0px"})))};t.forEach(o=>{const r=o.querySelector(".trust-accordion-trigger"),a=o.querySelector(".trust-accordion-panel");if(!r||!a)return;const c=o.classList.contains("is-open");r.setAttribute("aria-expanded",String(c)),a.setAttribute("aria-hidden",String(!c)),n(a,c),r.addEventListener("click",()=>{const s=!o.classList.contains("is-open");t.forEach(i=>{const f=i.querySelector(".trust-accordion-trigger"),p=i.querySelector(".trust-accordion-panel"),h=i===o?s:!1;i.classList.toggle("is-open",h),f&&f.setAttribute("aria-expanded",String(h)),p&&(p.setAttribute("aria-hidden",String(!h)),n(p,h))})})})});const Ht=Array.from(document.querySelectorAll("[data-scenario-carousel]"));Ht.forEach(e=>{const t=e.querySelector(".scenario-track"),n=e.querySelector(".scenario-prev"),o=e.querySelector(".scenario-next");if(!t)return;const r=a=>{const c=t.querySelector(".scenario-card"),s=c?c.getBoundingClientRect().width:260;t.scrollBy({left:a*(s+20),behavior:"smooth"})};n&&n.addEventListener("click",()=>r(-1)),o&&o.addEventListener("click",()=>r(1))});const Yt=()=>{Array.from(document.querySelectorAll("[data-cert-slider]")).forEach(t=>{const n=t.querySelector(".profile-certs-track"),o=t.closest(".profile-certs"),r=o?o.querySelector("[data-cert-prev]"):null,a=o?o.querySelector("[data-cert-next]"):null;if(!n||n.dataset.cloned==="true")return;const c=Array.from(n.children);if(c.length<2)return;c.forEach(E=>{const x=E.cloneNode(!0);x.setAttribute("aria-hidden","true"),x.classList.add("is-clone"),n.appendChild(x)}),n.dataset.cloned="true";let s=0,i=null,f=!1;const p=()=>{const E=n.scrollWidth;s=E>0?E/2:0},h=E=>{if(f)return;f=!0;const x=t.style.scrollSnapType,M=t.style.scrollBehavior;t.style.scrollSnapType="none",t.style.scrollBehavior="auto",t.scrollLeft=E,requestAnimationFrame(()=>{t.style.scrollSnapType=x,t.style.scrollBehavior=M,f=!1})},I=()=>{s&&(t.scrollLeft>=s?h(t.scrollLeft-s):t.scrollLeft<=0&&h(t.scrollLeft+s))},R=()=>{f||i||(i=requestAnimationFrame(()=>{I(),i=null}))},A=(E=1)=>{const x=n.querySelector(".profile-cert"),M=x?x.getBoundingClientRect().width:200,ie=parseFloat(getComputedStyle(n).gap||"12"),H=M+ie;s&&(E>0&&t.scrollLeft>=s-H&&h(t.scrollLeft-s),E<0&&t.scrollLeft<=H&&h(t.scrollLeft+s)),t.scrollBy({left:E*H,behavior:"smooth"}),setTimeout(I,360)};t.addEventListener("scroll",R,{passive:!0}),window.addEventListener("resize",p),window.addEventListener("load",p),p(),t.scrollLeft<=0&&(t.scrollLeft=1),r&&r.addEventListener("click",()=>A(-1)),a&&a.addEventListener("click",()=>A(1))})};Yt();const Zt=Array.from(document.querySelectorAll("[data-expectation-switch]"));Zt.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-expectation-tab]")),n=e.closest("section")||document,o=Array.from(n.querySelectorAll("[data-expectation-panel]"));if(!t.length||!o.length)return;const r=c=>{t.forEach(s=>{const i=s.dataset.expectationTab===c;s.classList.toggle("is-active",i),s.setAttribute("aria-selected",String(i))}),o.forEach(s=>{const i=s.dataset.expectationPanel===c;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))})},a=t.find(c=>c.classList.contains("is-active"))||t[0];a&&r(a.dataset.expectationTab),t.forEach(c=>{c.addEventListener("click",()=>r(c.dataset.expectationTab))})});const _=Array.from(document.querySelectorAll(".step-btn[data-step]")),Xe=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),We=document.getElementById("ritual-progress"),Ke=document.getElementById("ritual-prev"),Ue=document.getElementById("ritual-next");let N=1;const F=(e,t=!1)=>{if(!_.length||!Xe.length)return;const n=_.length,o=Math.min(Math.max(e,1),n);N=o,_.forEach(r=>{const c=Number(r.dataset.step)===o;r.classList.toggle("active",c),r.setAttribute("aria-selected",String(c)),c&&t&&r.focus()}),Xe.forEach(r=>{const c=Number(r.id.replace("ritual-step-",""))===o;r.classList.toggle("is-active",c),r.setAttribute("aria-hidden",String(!c))}),We&&(We.style.width=`${o/n*100}%`)};if(_.length){const e=_.find(n=>n.classList.contains("active")),t=e?Number(e.dataset.step):1;if(F(t),_.forEach(n=>{const o=Number(n.dataset.step);n.addEventListener("click",()=>F(o)),n.addEventListener("keydown",r=>{r.key==="ArrowRight"&&(r.preventDefault(),F(N+1,!0)),r.key==="ArrowLeft"&&(r.preventDefault(),F(N-1,!0))})}),Ke&&Ke.addEventListener("click",()=>F(N-1)),Ue&&Ue.addEventListener("click",()=>F(N+1)),!w){const n=document.getElementById("ritual");let o;const r=()=>{o||(o=setInterval(()=>{const c=N>=_.length?1:N+1;F(c)},5200))},a=()=>{clearInterval(o),o=null};n&&"IntersectionObserver"in window&&new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting?r():a()})},{threshold:.4}).observe(n)}}const se={};let Ve=!1;function jt(){if(Ve)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),n=document.getElementById("protocol-note"),o=document.getElementById("protocol-cta");if(!e.length||!t||!n||!o)return;const r=(c,s)=>{const i=s.closest("[data-protocol-group]");i&&(i.querySelectorAll(".protocol-chip").forEach(f=>{const p=f===s;f.classList.toggle("is-active",p),f.setAttribute("aria-pressed",String(p))}),se[c]={value:s.dataset.value||"",label:s.dataset.label||s.innerText.trim()},a())},a=()=>{var h,I,R,A;const c=((h=se.goal)==null?void 0:h.label)||"Восстановление",s=((I=se.zone)==null?void 0:I.label)||"Спина и плечевой пояс",i=((R=se.tempo)==null?void 0:R.label)||"Мягкая интенсивность",f=((A=se.duration)==null?void 0:A.label)||"60 минут";t.innerText=`${c} · ${s} · ${i} · ${f}.`,n.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const p=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${c}, ${s}, интенсивность: ${i}, длительность: ${f}.`);o.href=`https://wa.me/${Je}?text=${p}`};e.forEach(c=>{const s=c.dataset.protocolGroup,i=Array.from(c.querySelectorAll(".protocol-chip"));i.forEach(p=>{p.setAttribute("aria-pressed","false"),p.addEventListener("click",()=>r(s,p)),p.addEventListener("keydown",h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),r(s,p))})});const f=i.find(p=>p.classList.contains("is-active"))||i[0];f&&r(s,f)}),Ve=!0}function Xt(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const n=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(o,2300+Math.random()*1200)},o=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&n()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});const Ge=Array.from(document.querySelectorAll("[data-tilt-card]"));Ge.length&&!w&&Se&&Ge.forEach(n=>{n.addEventListener("mousemove",o=>{const r=n.getBoundingClientRect(),a=(o.clientX-r.left)/r.width-.5,c=(o.clientY-r.top)/r.height-.5,s=a*8,i=-c*8,f=a*12,p=c*12;n.style.transform=`translate3d(${f}px, ${p}px, 0) rotateX(${i}deg) rotateY(${s}deg)`}),n.addEventListener("mouseleave",()=>{n.style.transform=""})});
