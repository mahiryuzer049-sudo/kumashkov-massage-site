(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const at={head:{title:"Перегрузка головы",med:"Ментальное напряжение",image:"/assets/images/scanner/zone-head.jpg",desc:"Если мысли не отпускают даже в тишине, телу нужен мягкий сброс нагрузки. Начнем с расслабления шейно-воротниковой зоны и мягкой стабилизации дыхания.",msg:"Здравствуйте! Беспокоит ментальная перегрузка и тяжесть в голове. Хочу подобрать сеанс."},neck:{title:"Напряжение шеи",med:"Мышечный зажим",image:"/assets/images/scanner/zone-neck.jpg",desc:"Скованность в шее часто накапливается из-за статической нагрузки и стресса. Поможет аккуратная проработка шеи и плечевого пояса с комфортным давлением.",msg:"Здравствуйте! Беспокоит шея и верх спины. Хочу записаться на сеанс."},shoulders:{title:"Плечевой щит",med:"Переутомление плечевого пояса",image:"/assets/images/scanner/zone-shoulders.jpg",desc:"Когда плечи постоянно «вверх», уходит свобода дыхания и появляется фоновая усталость. Сеанс вернет подвижность и снизит общее напряжение.",msg:"Здравствуйте! Чувствую сильный зажим в плечах. Хочу обсудить формат сеанса."},back:{title:"Спина просит разгрузку",med:"Переутомление спины",image:"/assets/images/scanner/zone-back.jpg",desc:"Зажим в спине влияет на осанку, сон и энергию. В протокол включим мягкую глубокую проработку с акцентом на комфорт и восстановление.",msg:"Здравствуйте! Беспокоит спина, хочу подобрать индивидуальный сеанс."},lumbar:{title:"Поясница под нагрузкой",med:"Напряжение поясничной зоны",image:"/assets/images/scanner/zone-back.jpg",desc:"Поясница часто реагирует на сидячий режим, стресс и нехватку движения. Мягкая глубокая работа снимет спазм, вернет поддержку и ощущение устойчивости.",msg:"Здравствуйте! Беспокоит поясница, хочу подобрать сеанс."},legs:{title:"Тяжесть в ногах",med:"Усталость и застой",image:"/assets/images/scanner/zone-legs.jpg",desc:"Если к вечеру появляется ощущение тяжести, хорошо работает дренажный и восстанавливающий формат. Помогу вернуть легкость движению.",msg:"Здравствуйте! Есть тяжесть в ногах, хочу записаться на восстанавливающий сеанс."}},ct={head:"head-neck",neck:"head-neck",shoulders:"back-shoulders",back:"back-shoulders",lumbar:"hips",legs:"legs"},it="Здравствуйте! Хочу записаться на массаж.",lt=e=>String(e).replace(/\D/g,""),Ie=e=>String(e||"").trim().toLowerCase(),ie=(e,t)=>{if(!e)return"";if(e.dataset&&e.dataset[t])return e.dataset[t];const r=t.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`);return typeof e.getAttribute=="function"&&e.getAttribute(`data-${r}`)||""},qe=e=>ie(e,"point")||ie(e,"zoneShortcut"),ut=e=>Array.from(e.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(t=>!t.hasAttribute("disabled")),dt=e=>{const t=e.querySelector("#zone-popup"),r=e.querySelector("#zone-title"),n=e.querySelector("#zone-med"),s=e.querySelector("#zone-desc"),a=e.querySelector("#zone-cta"),i=e.querySelector("#zone-close"),o=e.querySelector("#scanner-container"),c=Array.from(e.querySelectorAll(".active-point")),f=Array.from(e.querySelectorAll("[data-zone-shortcut]"));return!t||!r||!n||!s||!o?null:{popup:t,title:r,med:n,desc:s,cta:a,close:i,container:o,points:c,shortcuts:f}},ft=(e={})=>{const t=e.root||document.getElementById("scanner")||document.getElementById("scanner-section");if(!t)return null;const r=e.zoneData||at,n=e.protocolZoneMap||ct,s=typeof e.reducedEffects=="boolean"?e.reducedEffects:window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=e.phoneDigits||lt(document.body.dataset.phone||"79260899019"),i=e.whatsappLoadingText||"Переход в чат...",o=dt(t);if(!o)return null;const c={isOpen:!1,activeZone:null,lastTrigger:null,typeTimer:null,currentMsg:""};let f=!1;const m=l=>{o.points.forEach(u=>{const d=ie(u,"point")===l;u.classList.toggle("selected",d),u.setAttribute("aria-pressed",String(d))}),o.shortcuts.forEach(u=>{const d=ie(u,"zoneShortcut")===l;u.classList.toggle("is-active",d),u.setAttribute("aria-pressed",String(d))}),o.container.dataset.activeZone=l||""},v=l=>{if(clearTimeout(c.typeTimer),o.desc.innerText="",s){o.desc.innerText=l;return}let u=0;const d=()=>{o.desc.innerText+=l.charAt(u),u+=1,u<l.length&&(c.typeTimer=setTimeout(d,14))};d()},k=l=>{o.popup.dataset.open=l?"true":"false",o.popup.classList.toggle("open",l),o.popup.setAttribute("aria-hidden",l?"false":"true")},b=(l,u={})=>{const d=Ie(l),p=r[d];if(!p)return!1;const ot=u.trigger||null,st=!!u.focus;navigator.vibrate&&navigator.vibrate(10),c.isOpen=!0,c.activeZone=d,c.lastTrigger=ot||document.activeElement,c.currentMsg=p.msg||"",o.popup.dataset.active=d,o.title.innerText=p.title,o.med.innerText=p.med,v(p.desc),p.image?o.popup.style.setProperty("--zone-image",`url("${p.image}")`):o.popup.style.removeProperty("--zone-image"),k(!0),m(d),rt(),st&&o.close&&typeof o.close.focus=="function"&&requestAnimationFrame(()=>{try{o.close.focus({preventScroll:!0})}catch{o.close.focus()}});const ke=n[d];if(ke){const Te=document.querySelector(`[data-protocol-group="zone"] .protocol-chip[data-value="${ke}"]`);Te&&Te.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))}return!0},g=()=>{if(c.isOpen){if(clearTimeout(c.typeTimer),c.isOpen=!1,c.activeZone=null,c.currentMsg="",o.popup.dataset.active="",o.popup.style.removeProperty("--zone-image"),k(!1),m(""),we(),c.lastTrigger&&typeof c.lastTrigger.focus=="function")try{c.lastTrigger.focus({preventScroll:!0})}catch{c.lastTrigger.focus()}c.lastTrigger=null}},se=(l,u,d=!1)=>{const p=Ie(l);return c.isOpen&&c.activeZone===p?(g(),!1):b(p,{trigger:u,focus:d})},N=l=>{l.preventDefault(),l.stopPropagation();const u=l.currentTarget;if(!(u instanceof Element))return;const d=qe(u);d&&se(d,u,!1)},D=l=>{if(!(l.key==="Enter"||l.key===" "))return;l.preventDefault(),l.stopPropagation();const d=l.currentTarget;if(!(d instanceof Element))return;const p=qe(d);p&&se(p,d,!0)},xe=l=>{if(!c.isOpen)return;const u=l.target;if(o.popup.contains(u))return;const d=u.closest(".active-point,[data-zone-shortcut]");d&&t.contains(d)||g()},Le=l=>{if(!c.isOpen)return;if(l.key==="Escape"){l.preventDefault(),g();return}if(l.key!=="Tab"||!o.popup.contains(document.activeElement))return;const u=ut(o.popup);if(!u.length)return;const d=u[0],p=u[u.length-1];l.shiftKey&&document.activeElement===d?(l.preventDefault(),p.focus()):!l.shiftKey&&document.activeElement===p&&(l.preventDefault(),d.focus())},rt=()=>{f||(document.addEventListener("click",xe),document.addEventListener("keydown",Le),f=!0)},we=()=>{f&&(document.removeEventListener("click",xe),document.removeEventListener("keydown",Le),f=!1)},Se=()=>{var p;if(!o.cta)return;navigator.vibrate&&navigator.vibrate(18);const l=o.cta.innerText;o.cta.innerText=i;const u=c.currentMsg||((p=r[c.activeZone])==null?void 0:p.msg)||it,d=encodeURIComponent(u);setTimeout(()=>{window.location.href=`https://wa.me/${a}?text=${d}`,setTimeout(()=>{o.cta.innerText=l},900)},550)};return o.points.forEach(l=>{l.setAttribute("aria-pressed","false"),l.setAttribute("aria-controls","zone-popup"),l.addEventListener("click",N),l.addEventListener("keydown",D)}),o.shortcuts.forEach(l=>{l.setAttribute("aria-pressed","false"),l.setAttribute("aria-controls","zone-popup"),l.addEventListener("click",N),l.addEventListener("keydown",D)}),o.popup.dataset.active="",k(!1),o.close&&o.close.addEventListener("click",g),o.cta&&o.cta.addEventListener("click",Se),{openZone:b,closeZone:g,destroy:()=>{we(),o.points.forEach(l=>{l.removeEventListener("click",N),l.removeEventListener("keydown",D)}),o.shortcuts.forEach(l=>{l.removeEventListener("click",N),l.removeEventListener("keydown",D)}),o.close&&o.close.removeEventListener("click",g),o.cta&&o.cta.removeEventListener("click",Se)},debug:()=>({popup:!!o.popup,title:!!o.title,med:!!o.med,desc:!!o.desc,cta:!!o.cta,points:o.points.length,shortcuts:o.shortcuts.length,popupOpen:!!o.popup.classList.contains("open"),active:o.popup.dataset.active||""})}},E=document.body,We=(E.dataset.phone||"79260899019").replace(/\D/g,""),Ke="Переход в чат...",mt=window.matchMedia("(prefers-reduced-motion: reduce)"),pt=mt.matches,gt=!!(navigator.connection&&navigator.connection.saveData),ht=Number.isFinite(navigator.deviceMemory)&&navigator.deviceMemory<=4,yt=Number.isFinite(navigator.hardwareConcurrency)&&navigator.hardwareConcurrency<=4,C=ht||yt,A=pt||gt,Ee=window.matchMedia("(pointer: fine)").matches;A&&E.classList.add("reduced-effects");C&&E.classList.add("low-power-effects");const x=document.getElementById("mobile-menu-toggle"),h=document.getElementById("mobile-menu"),S=document.getElementById("mobile-menu-overlay");let _=null;const G=document.getElementById("navbar"),P=document.querySelector("[data-nav-primary]"),J=P?P.querySelector(".nav-highlight"):null,ye=P?Array.from(P.querySelectorAll("[data-nav-section]")):[],me=document.getElementById("nav-progress"),L=document.querySelector("[data-sticky-cta]"),H=document.getElementById("sticky-context"),Z=L?{text:L.textContent.trim(),href:L.getAttribute("href")||""}:null,Ce=H?H.textContent.trim():"",Be=Number(E.dataset.metrika||0),y=document.getElementById("nav-command"),K=document.getElementById("nav-command-input"),X=document.getElementById("nav-command-list"),De=document.getElementById("nav-command-close"),fe=Array.from(document.querySelectorAll("[data-command-trigger]"));let Y=null;const le=document.querySelector(".section-rail"),Me=document.getElementById("rail-current"),Oe=document.getElementById("rail-next"),Ue=le?Array.from(le.querySelectorAll("[data-nav-section]")):[],Ve=()=>{const e=window.innerWidth||document.documentElement.clientWidth||0;return e>=1280?"desktop":e>=768?"tablet":"mobile"},T={currentSectionId:"",scrollProgress:0,viewportMode:Ve(),menuOpen:!1,contextIntent:"explore",reducedMotion:A};fe.forEach(e=>{e.hasAttribute("aria-controls")||e.setAttribute("aria-controls","nav-command"),e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false")});const oe=e=>{Object.assign(T,e),T.currentSectionId&&(E.dataset.activeSection=T.currentSectionId),T.contextIntent&&(E.dataset.navIntent=T.contextIntent),Number.isFinite(T.scrollProgress)&&E.style.setProperty("--nav-scroll",T.scrollProgress.toFixed(4))};window.addEventListener("resize",()=>{oe({viewportMode:Ve()})});const B=(e,t={})=>{const r={name:e,...t,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("nav-event",{detail:r})),Array.isArray(window.dataLayer)&&window.dataLayer.push({event:e,...t}),Be&&typeof window.ym=="function"&&window.ym(Be,"reachGoal",e,t)},vt=()=>y?Array.from(y.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],Ge=()=>h?Array.from(h.querySelectorAll('a,button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")):[],O=()=>{if(!(!x||!h||!(x.getAttribute("aria-expanded")==="true"))){if(x.setAttribute("aria-expanded","false"),h.classList.add("hidden"),h.setAttribute("aria-hidden","true"),h.dataset.open="false",E.classList.remove("menu-open"),oe({menuOpen:!1}),B("menu_close",{source:"mobile"}),S&&(S.classList.remove("is-open"),S.setAttribute("aria-hidden","true"),S.classList.add("hidden")),_&&typeof _.focus=="function")try{_.focus({preventScroll:!0})}catch{_.focus()}_=null}},bt=()=>{if(!x||!h)return;_=document.activeElement,x.setAttribute("aria-expanded","true"),h.classList.remove("hidden"),h.setAttribute("aria-hidden","false"),h.dataset.open="true",E.classList.add("menu-open"),oe({menuOpen:!0}),B("menu_open",{source:"mobile"}),S&&(S.classList.remove("hidden"),S.classList.add("is-open"),S.setAttribute("aria-hidden","false"));const e=Ge();e.length&&requestAnimationFrame(()=>{try{e[0].focus({preventScroll:!0})}catch{e[0].focus()}})};if(x&&h){x.addEventListener("click",()=>{x.getAttribute("aria-expanded")==="true"?O():bt()}),h.querySelectorAll("a").forEach(n=>{n.addEventListener("click",O)}),document.addEventListener("click",n=>{if(!(x.getAttribute("aria-expanded")==="true"))return;const a=n.target.closest("#mobile-menu"),i=n.target.closest("#mobile-menu-toggle");!a&&!i&&O()}),S&&S.addEventListener("click",O);let e=0,t=0,r=!1;h.addEventListener("touchstart",n=>{if(!(x.getAttribute("aria-expanded")==="true"))return;const a=n.touches[0];a&&(e=a.clientY,t=a.clientX,r=!0)},{passive:!0}),h.addEventListener("touchmove",n=>{if(!r)return;const s=n.touches[0];if(!s)return;const a=s.clientY-e,i=s.clientX-t;Math.abs(a)<60||Math.abs(a)<Math.abs(i)||a>0&&h.scrollTop<=0&&(r=!1,O())},{passive:!0}),h.addEventListener("touchend",()=>{r=!1}),document.addEventListener("keydown",n=>{if(n.key==="Escape"&&O(),!(x.getAttribute("aria-expanded")==="true")||n.key!=="Tab")return;const a=Ge();if(!a.length)return;const i=a[0],o=a[a.length-1],c=document.activeElement;n.shiftKey&&c===i?(n.preventDefault(),o.focus()):!n.shiftKey&&c===o&&(n.preventDefault(),i.focus())})}window.addEventListener("load",()=>{const e=document.getElementById("loader-progress");e&&(e.style.width="100%");const t=document.getElementById("preloader");t&&setTimeout(()=>{t.style.opacity="0",t.style.visibility="hidden"},650),Ft(),Rt()});const $e=document.querySelector(".cursor-dot"),ve=document.querySelector(".cursor-circle"),Q=document.getElementById("spotlight"),ae=document.getElementById("home"),ee=document.querySelector(".hero-reveal");let j=window.innerWidth/2,W=window.innerHeight/2,pe=j,ge=W,ue=!1,Je=0;const Qe=()=>{if(!ue)return;const e=.16;if(pe+=(j-pe)*e,ge+=(W-ge)*e,ve&&(ve.style.transform=`translate3d(${pe}px, ${ge}px, 0) translate(-50%, -50%)`),Date.now()-Je>1200){ue=!1;return}requestAnimationFrame(Qe)};!A&&!C&&Ee&&$e&&ve&&Q&&(Q.style.setProperty("--x",`${j}px`),Q.style.setProperty("--y",`${W}px`),document.addEventListener("mousemove",e=>{j=e.clientX,W=e.clientY,Je=Date.now(),$e.style.transform=`translate3d(${j}px, ${W}px, 0) translate(-50%, -50%)`,Q.style.setProperty("--x",`${j}px`),Q.style.setProperty("--y",`${W}px`),ue||(ue=!0,requestAnimationFrame(Qe))}));if(!A&&!C&&Ee&&ae&&ee){const e=r=>{const n=ae.getBoundingClientRect(),s=r.clientX-n.left,a=r.clientY-n.top;ee.style.setProperty("--hero-x",`${s}px`),ee.style.setProperty("--hero-y",`${a}px`)},t=()=>{ee.style.setProperty("--hero-x","50%"),ee.style.setProperty("--hero-y","50%")};ae.addEventListener("mousemove",e),ae.addEventListener("mouseleave",t),t()}document.querySelectorAll(".interactive-el").forEach(e=>{e.addEventListener("mouseenter",()=>E.classList.add("hovering")),e.addEventListener("mouseleave",()=>E.classList.remove("hovering"))});const Pe=Array.from(document.querySelectorAll(".reveal-on-scroll"));if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&r.target.classList.add("visible")})},{threshold:C?.06:.12});Pe.forEach((t,r)=>{if(t.dataset.revealDelay&&!C)t.style.transitionDelay=t.dataset.revealDelay;else if(!C){const n=r%4;t.style.transitionDelay=`${n*60}ms`}e.observe(t)})}else Pe.forEach(e=>e.classList.add("visible"));const I=Ue.map(e=>e.dataset.navSection).filter(Boolean),ze=new Map(Ue.map(e=>[e.dataset.navSection,e.dataset.label||e.getAttribute("aria-label")||(e.textContent||"").trim()||""])),et=e=>{if(!Me||!Oe||!I.length)return;const t=I.indexOf(e),r=t>=0?e:I[0],n=t>=0&&t<I.length-1?I[t+1]:I[I.length-1];Me.textContent=ze.get(r)||r,Oe.textContent=ze.get(n)||"Финал"},Et={home:"explore",trust:"explore",services:"compare",scanner:"explore","goal-routes":"compare",packages:"compare",results:"explore",blog:"explore","how-to-book":"book",booking:"book"},At=e=>Et[e]||"explore";let w=null,U=null;const xt=()=>{w&&(U&&clearTimeout(U),U=setTimeout(()=>{w&&(B("nav_jump_miss",{id:w.id,source:w.source}),w=null)},2e3))},Lt=e=>{if(!e||typeof e.focus!="function")return;const t=e.hasAttribute("tabindex");t||e.setAttribute("tabindex","-1");try{e.focus({preventScroll:!0})}catch{e.focus()}t||setTimeout(()=>{e.removeAttribute("tabindex")},800)},Ae=(e,t="nav")=>{if(!e||e==="#")return!1;let r;try{r=new URL(e,window.location.href)}catch{return!1}if(!r.hash||r.pathname!==window.location.pathname)return!1;const n=r.hash.replace("#","");if(!n)return!1;const s=document.getElementById(n);if(!s)return!1;w={id:n,source:t},xt(),B("nav_click",{id:n,source:t,href:r.hash});const a=A?"auto":"smooth";return s.scrollIntoView({behavior:a,block:"start"}),O(),history.replaceState(null,"",`#${n}`),setTimeout(()=>Lt(s),A?0:240),!0},wt=e=>e.dataset.analytics||e.dataset.navSection||e.getAttribute("aria-label")||"anchor",St=Array.from(document.querySelectorAll('a[href*="#"]'));St.forEach(e=>{const t=e.getAttribute("href")||"";!t.includes("#")||t==="#"||e.addEventListener("click",r=>{const n=wt(e),s=Ae(t,n);s&&r.preventDefault(),s||B("nav_click",{href:t,source:n})})});const re=Array.from(document.querySelectorAll("[data-nav-section]")),kt=()=>{const e=re.find(n=>(n.getAttribute("href")||"").includes("#"));if(!e)return"#";const t=e.getAttribute("href")||"#",r=t.indexOf("#");return t.slice(0,Math.max(r+1,1))},Tt=kt(),M=e=>`${Tt}${e}`,It={trust:{text:"Выбрать формат",href:M("trust"),context:"Формат визита"},services:{text:"Выбрать услугу",href:M("services"),context:"Список услуг"},scanner:{text:"Открыть сканер",href:M("scanner-anchor"),context:"Диагностика зон"},"goal-routes":{text:"Сценарии",href:M("goal-routes"),context:"Маршруты запроса"},packages:{text:"Пакеты",href:M("packages"),context:"Сценарии и пакеты"},results:{text:"Результат",href:M("results"),context:"Ожидаемый эффект"},blog:{text:"Читать блог",href:M("blog"),context:"Гайды и заметки"},"how-to-book":{text:"Как записаться",href:M("how-to-book"),context:"Алгоритм записи"},booking:{text:"Записаться",href:Z?Z.href:"",context:"Старт диалога"}},qt=e=>{if(!L||!Z)return;const t=It[e];if(!t){L.textContent=Z.text,L.setAttribute("href",Z.href),H&&(H.textContent=Ce);return}L.textContent=t.text,L.setAttribute("href",t.href||Z.href),H&&(H.textContent=t.context||Ce)};L&&L.addEventListener("click",()=>{B("cta_from_section",{id:T.currentSectionId||"",intent:T.contextIntent||"explore"})});if(re.length&&"IntersectionObserver"in window){const e=new Map;re.forEach(n=>{const s=n.dataset.navSection||"";!s||!document.getElementById(s)||(e.has(s)||e.set(s,[]),e.get(s).push(n))});const t=Array.from(e.keys()).map(n=>document.getElementById(n)).filter(Boolean),r=n=>{re.forEach(s=>{const a=s.dataset.navSection===n;s.classList.toggle("is-active",a),s.setAttribute("aria-current",a?"true":"false")}),ce(),qt(n),et(n),oe({currentSectionId:n,contextIntent:At(n)}),w&&w.id===n&&(B("nav_jump_success",{id:n,source:w.source}),w=null,U&&(clearTimeout(U),U=null))};if(t.length){const n=new IntersectionObserver(s=>{s.forEach(a=>{if(!a.isIntersecting)return;const i=a.target.id;r(i)})},{rootMargin:"-35% 0px -55% 0px",threshold:.01});t.forEach(s=>n.observe(s))}}I.length&&et(I[0]);const Ct={home:["главная","начало","home"],trust:["формат","первый визит","ритуал"],services:["услуги","классика","релакс","лимфо","осанка"],scanner:["сканер","зоны","диагностика","точки"],"goal-routes":["маршруты","сценарии","цели"],packages:["пакеты","планы","форматы"],results:["результат","эффект","после"],blog:["блог","гайды","статьи"],"how-to-book":["запись","как записаться","инструкция"],booking:["контакт","записаться","диалог"]},Bt=(()=>{const e=new Map;return re.forEach(t=>{const r=t.dataset.navSection||"";if(!r)return;const n=(t.textContent||"").trim()||t.dataset.label||t.getAttribute("aria-label")||r,s=t.getAttribute("href")||"";if(!(!s||!n)&&!e.has(r)){const a=Ct[r]||[],i=(t.dataset.search||"").trim(),o=[n,r,...a,i].join(" ").toLowerCase();e.set(r,{id:r,label:n,href:s,search:o})}}),Array.from(e.values())})();let $=[],q=0;const tt=(e="")=>{if(!X)return;const t=e.trim().toLowerCase();if(X.innerHTML="",$=Bt.filter(r=>r.search.includes(t)),!$.length){const r=document.createElement("li");r.className="nav-command-empty",r.textContent="Ничего не найдено",X.appendChild(r);return}$.forEach((r,n)=>{const s=document.createElement("li"),a=document.createElement("button");a.type="button",a.className="nav-command-item",a.dataset.index=String(n),a.dataset.href=r.href,a.innerHTML=`${r.label}<span>${r.id}</span>`,a.addEventListener("click",()=>{Ae(r.href,"command")||(window.location.href=r.href),V()}),s.appendChild(a),X.appendChild(s)}),q=0,be(q)};function be(e){if(!X)return;Array.from(X.querySelectorAll(".nav-command-item")).forEach((r,n)=>{r.classList.toggle("is-active",n===e)})}function nt(){y&&(Y=document.activeElement,O(),y.classList.remove("hidden"),y.classList.add("is-open"),y.setAttribute("aria-hidden","false"),E.classList.add("command-open"),fe.forEach(e=>e.setAttribute("aria-expanded","true")),B("menu_open",{source:"command"}),K&&(K.value="",tt(""),requestAnimationFrame(()=>K.focus())))}function V(){if(y&&y.classList.contains("is-open")){if(y.classList.remove("is-open"),y.classList.add("hidden"),y.setAttribute("aria-hidden","true"),E.classList.remove("command-open"),fe.forEach(e=>e.setAttribute("aria-expanded","false")),B("menu_close",{source:"command"}),Y&&typeof Y.focus=="function")try{Y.focus({preventScroll:!0})}catch{Y.focus()}Y=null}}y&&y.addEventListener("click",e=>{e.target===y&&V()});De&&De.addEventListener("click",V);fe.forEach(e=>e.addEventListener("click",nt));K&&(K.addEventListener("input",e=>{tt(e.target.value||"")}),K.addEventListener("keydown",e=>{if(e.key==="Escape"){e.preventDefault(),V();return}if($.length&&(e.key==="ArrowDown"&&(e.preventDefault(),q=(q+1)%$.length,be(q)),e.key==="ArrowUp"&&(e.preventDefault(),q=(q-1+$.length)%$.length,be(q)),e.key==="Enter")){e.preventDefault();const t=$[q];t&&(Ae(t.href,"command")||(window.location.href=t.href),V())}}));document.addEventListener("keydown",e=>{const t=y&&y.classList.contains("is-open");if(t&&e.key==="Tab"){const r=vt();if(!r.length)return;const n=r[0],s=r[r.length-1],a=document.activeElement;e.shiftKey&&a===n?(e.preventDefault(),s.focus()):!e.shiftKey&&a===s&&(e.preventDefault(),n.focus())}if(t&&e.key==="Escape"){e.preventDefault(),V();return}(e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),nt())});function de(e){if(!P||!J)return;if(!e){J.style.opacity="0";return}const t=e.getBoundingClientRect(),r=P.getBoundingClientRect(),n=Math.max(t.left-r.left,0);J.style.width=`${t.width}px`,J.style.transform=`translateX(${n}px)`,J.style.opacity="1"}function ce(){if(!ye.length)return;const e=P.querySelector("[data-nav-section].is-active");if(!e){de(null);return}de(e)}ye.length&&(ye.forEach(e=>{e.addEventListener("mouseenter",()=>de(e)),e.addEventListener("focus",()=>de(e))}),P.addEventListener("mouseleave",ce),window.addEventListener("resize",()=>requestAnimationFrame(ce)),requestAnimationFrame(ce));let Re=0;if(G||me){let e=!1;const t=()=>{e||(e=!0,requestAnimationFrame(()=>{const r=window.scrollY||0;if(G&&G.classList.toggle("nav-compact",r>12),me){const n=document.documentElement,s=n.scrollHeight-n.clientHeight,a=s>0?Math.min(r/s,1):0;me.style.transform=`scaleX(${a})`,le&&le.style.setProperty("--rail-progress",a.toFixed(4)),oe({scrollProgress:a})}if(G){const n=G.getBoundingClientRect().height;Math.abs(n-Re)>1&&(document.documentElement.style.setProperty("--anchor-offset",`${Math.round(n+12)}px`),Re=n)}e=!1}))};window.addEventListener("scroll",t,{passive:!0}),t()}const te=document.getElementById("scan-line"),Fe=document.getElementById("scanner")||document.getElementById("scanner-section");te&&Fe&&"IntersectionObserver"in window?new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&!A&&!C?te.classList.add("animate-scan"):te.classList.remove("animate-scan")})},{threshold:.22}).observe(Fe):te&&!A&&!C&&te.classList.add("animate-scan");document.querySelectorAll(".btn-vibrate").forEach(e=>{e.addEventListener("click",()=>{navigator.vibrate&&navigator.vibrate(15)})});document.addEventListener("click",e=>{if(A||C)return;const t=e.target.closest(".ripple-container");if(!t)return;const r=document.createElement("span"),n=Math.max(t.clientWidth,t.clientHeight),s=n/2,a=t.getBoundingClientRect();r.style.width=r.style.height=`${n}px`,r.style.left=`${e.clientX-a.left-s}px`,r.style.top=`${e.clientY-a.top-s}px`,r.classList.add("ripple");const i=t.querySelector(".ripple");i&&i.remove(),t.appendChild(r)});document.addEventListener("click",e=>{const t=e.target.closest(".whatsapp-link");if(!t)return;const r=t.getAttribute("href")||"";if(!/wa\.me/.test(r))return;e.preventDefault();const n=t.innerText,s=t.offsetWidth;t.style.width=`${s}px`,t.style.justifyContent="center",t.style.textAlign="center",t.innerText=Ke,t.classList.add("animate-pulse"),setTimeout(()=>{window.location.href=t.href,setTimeout(()=>{t.innerText=n,t.style.width="",t.style.justifyContent="",t.style.textAlign="",t.classList.remove("animate-pulse")},900)},550)});const Ne=document.getElementById("scanner")||document.getElementById("scanner-section"),he=Ne?ft({root:Ne,phoneDigits:We,whatsappLoadingText:Ke,reducedEffects:A}):null;he&&(window.__openZone=e=>he.openZone(e),window.__scannerDebug=he.debug);const Dt=Array.from(document.querySelectorAll("[data-compare]"));Dt.forEach(e=>{const t=e.querySelector(".compare-range");if(!t)return;const r=()=>{e.style.setProperty("--compare",`${t.value}%`)};t.addEventListener("input",r),t.addEventListener("change",r),r()});const Mt=Array.from(document.querySelectorAll("[data-service-tabs]"));Mt.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-service-tab]")),r=Array.from(e.querySelectorAll("[data-service-panel]"));if(!t.length||!r.length)return;const n=(a,i=!1)=>{t.forEach(o=>{const c=o.dataset.serviceTab===a;o.classList.toggle("is-active",c),o.setAttribute("aria-selected",String(c)),c&&i&&o.focus()}),r.forEach(o=>{const c=o.dataset.servicePanel===a;o.classList.toggle("is-active",c),o.setAttribute("aria-hidden",String(!c))})},s=t.find(a=>a.classList.contains("is-active"))||t[0];s&&n(s.dataset.serviceTab),t.forEach((a,i)=>{a.addEventListener("click",()=>n(a.dataset.serviceTab)),a.addEventListener("keydown",o=>{if(o.key==="ArrowRight"||o.key==="ArrowDown"){o.preventDefault();const c=t[i+1]||t[0];n(c.dataset.serviceTab,!0)}if(o.key==="ArrowLeft"||o.key==="ArrowUp"){o.preventDefault();const c=t[i-1]||t[t.length-1];n(c.dataset.serviceTab,!0)}})})});const Ot=Array.from(document.querySelectorAll("[data-accordion]"));Ot.forEach(e=>{const t=Array.from(e.querySelectorAll(".trust-accordion-item"));if(!t.length)return;const r=(n,s)=>{n&&(s?(n.style.height=`${n.scrollHeight}px`,setTimeout(()=>{n.style.height="auto"},260)):(n.style.height==="auto"&&(n.style.height=`${n.scrollHeight}px`),requestAnimationFrame(()=>{n.style.height="0px"})))};t.forEach(n=>{const s=n.querySelector(".trust-accordion-trigger"),a=n.querySelector(".trust-accordion-panel");if(!s||!a)return;const i=n.classList.contains("is-open");s.setAttribute("aria-expanded",String(i)),a.setAttribute("aria-hidden",String(!i)),r(a,i),s.addEventListener("click",()=>{const o=!n.classList.contains("is-open");t.forEach(c=>{const f=c.querySelector(".trust-accordion-trigger"),m=c.querySelector(".trust-accordion-panel"),v=c===n?o:!1;c.classList.toggle("is-open",v),f&&f.setAttribute("aria-expanded",String(v)),m&&(m.setAttribute("aria-hidden",String(!v)),r(m,v))})})})});const $t=Array.from(document.querySelectorAll("[data-scenario-carousel]"));$t.forEach(e=>{const t=e.querySelector(".scenario-track"),r=e.querySelector(".scenario-prev"),n=e.querySelector(".scenario-next");if(!t)return;const s=a=>{const i=t.querySelector(".scenario-card"),o=i?i.getBoundingClientRect().width:260;t.scrollBy({left:a*(o+20),behavior:"smooth"})};r&&r.addEventListener("click",()=>s(-1)),n&&n.addEventListener("click",()=>s(1))});const Pt=()=>{Array.from(document.querySelectorAll("[data-cert-slider]")).forEach(t=>{const r=t.querySelector(".profile-certs-track"),n=t.closest(".profile-certs"),s=n?n.querySelector("[data-cert-prev]"):null,a=n?n.querySelector("[data-cert-next]"):null;if(!r||r.dataset.cloned==="true")return;const i=Array.from(r.children);if(i.length<2)return;i.forEach(b=>{const g=b.cloneNode(!0);g.setAttribute("aria-hidden","true"),g.classList.add("is-clone"),r.appendChild(g)}),r.dataset.cloned="true";let o=0,c=null;const f=()=>{const b=r.scrollWidth;o=b>0?b/2:0},m=()=>{o&&(t.scrollLeft>=o?t.scrollLeft-=o:t.scrollLeft<=0&&(t.scrollLeft+=o))},v=()=>{c||(c=requestAnimationFrame(()=>{m(),c=null}))},k=(b=1)=>{const g=r.querySelector(".profile-cert"),se=g?g.getBoundingClientRect().width:200,N=parseFloat(getComputedStyle(r).gap||"12"),D=se+N;o&&(b>0&&t.scrollLeft>=o-D&&(t.scrollLeft-=o),b<0&&t.scrollLeft<=D&&(t.scrollLeft+=o)),t.scrollBy({left:b*D,behavior:"smooth"}),setTimeout(m,360)};t.addEventListener("scroll",v,{passive:!0}),window.addEventListener("resize",f),window.addEventListener("load",f),f(),t.scrollLeft<=0&&(t.scrollLeft=1),s&&s.addEventListener("click",()=>k(-1)),a&&a.addEventListener("click",()=>k(1))})};Pt();const zt=Array.from(document.querySelectorAll("[data-expectation-switch]"));zt.forEach(e=>{const t=Array.from(e.querySelectorAll("[data-expectation-tab]")),r=e.closest("section")||document,n=Array.from(r.querySelectorAll("[data-expectation-panel]"));if(!t.length||!n.length)return;const s=i=>{t.forEach(o=>{const c=o.dataset.expectationTab===i;o.classList.toggle("is-active",c),o.setAttribute("aria-selected",String(c))}),n.forEach(o=>{const c=o.dataset.expectationPanel===i;o.classList.toggle("is-active",c),o.setAttribute("aria-hidden",String(!c))})},a=t.find(i=>i.classList.contains("is-active"))||t[0];a&&s(a.dataset.expectationTab),t.forEach(i=>{i.addEventListener("click",()=>s(i.dataset.expectationTab))})});const F=Array.from(document.querySelectorAll(".step-btn[data-step]")),_e=Array.from(document.querySelectorAll('[id^="ritual-step-"]')),Ye=document.getElementById("ritual-progress"),He=document.getElementById("ritual-prev"),Ze=document.getElementById("ritual-next");let R=1;const z=(e,t=!1)=>{if(!F.length||!_e.length)return;const r=F.length,n=Math.min(Math.max(e,1),r);R=n,F.forEach(s=>{const i=Number(s.dataset.step)===n;s.classList.toggle("active",i),s.setAttribute("aria-selected",String(i)),i&&t&&s.focus()}),_e.forEach(s=>{const i=Number(s.id.replace("ritual-step-",""))===n;s.classList.toggle("is-active",i),s.setAttribute("aria-hidden",String(!i))}),Ye&&(Ye.style.width=`${n/r*100}%`)};if(F.length){const e=F.find(r=>r.classList.contains("active")),t=e?Number(e.dataset.step):1;if(z(t),F.forEach(r=>{const n=Number(r.dataset.step);r.addEventListener("click",()=>z(n)),r.addEventListener("keydown",s=>{s.key==="ArrowRight"&&(s.preventDefault(),z(R+1,!0)),s.key==="ArrowLeft"&&(s.preventDefault(),z(R-1,!0))})}),He&&He.addEventListener("click",()=>z(R-1)),Ze&&Ze.addEventListener("click",()=>z(R+1)),!A){const r=document.getElementById("ritual");let n;const s=()=>{n||(n=setInterval(()=>{const i=R>=F.length?1:R+1;z(i)},5200))},a=()=>{clearInterval(n),n=null};r&&"IntersectionObserver"in window&&new IntersectionObserver(o=>{o.forEach(c=>{c.isIntersecting?s():a()})},{threshold:.4}).observe(r)}}const ne={};let Xe=!1;function Rt(){if(Xe)return;const e=Array.from(document.querySelectorAll("[data-protocol-group]")),t=document.getElementById("protocol-output"),r=document.getElementById("protocol-note"),n=document.getElementById("protocol-cta");if(!e.length||!t||!r||!n)return;const s=(i,o)=>{const c=o.closest("[data-protocol-group]");c&&(c.querySelectorAll(".protocol-chip").forEach(f=>{const m=f===o;f.classList.toggle("is-active",m),f.setAttribute("aria-pressed",String(m))}),ne[i]={value:o.dataset.value||"",label:o.dataset.label||o.innerText.trim()},a())},a=()=>{var v,k,b,g;const i=((v=ne.goal)==null?void 0:v.label)||"Восстановление",o=((k=ne.zone)==null?void 0:k.label)||"Спина и плечевой пояс",c=((b=ne.tempo)==null?void 0:b.label)||"Мягкая интенсивность",f=((g=ne.duration)==null?void 0:g.label)||"60 минут";t.innerText=`${i} · ${o} · ${c} · ${f}.`,r.innerText="Перед стартом уточним самочувствие, цели и пожелания. После подтверждаем финальный протокол.";const m=encodeURIComponent(`Здравствуйте! Хочу записаться.
Мой запрос: ${i}, ${o}, интенсивность: ${c}, длительность: ${f}.`);n.href=`https://wa.me/${We}?text=${m}`};e.forEach(i=>{const o=i.dataset.protocolGroup,c=Array.from(i.querySelectorAll(".protocol-chip"));c.forEach(m=>{m.setAttribute("aria-pressed","false"),m.addEventListener("click",()=>s(o,m)),m.addEventListener("keydown",v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),s(o,m))})});const f=c.find(m=>m.classList.contains("is-active"))||c[0];f&&s(o,f)}),Xe=!0}function Ft(){const e=document.getElementById("status-container"),t=document.getElementById("typing-container");if(!e||!t)return;const r=()=>{e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(-50%)"},200),setTimeout(n,2300+Math.random()*1200)},n=()=>{t.style.opacity="0",t.style.transform="translateY(10px) translateY(-50%)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},200)};setInterval(()=>{Math.random()>.35&&r()},9500)}document.querySelectorAll("[data-analytics]").forEach(e=>{e.addEventListener("click",()=>{})});const je=Array.from(document.querySelectorAll("[data-tilt-card]"));je.length&&!A&&Ee&&je.forEach(r=>{r.addEventListener("mousemove",n=>{const s=r.getBoundingClientRect(),a=(n.clientX-s.left)/s.width-.5,i=(n.clientY-s.top)/s.height-.5,o=a*8,c=-i*8,f=a*12,m=i*12;r.style.transform=`translate3d(${f}px, ${m}px, 0) rotateX(${c}deg) rotateY(${o}deg)`}),r.addEventListener("mouseleave",()=>{r.style.transform=""})});
