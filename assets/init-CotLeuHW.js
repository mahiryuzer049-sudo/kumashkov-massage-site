import{e as M}from"./emit-event-D_28Pgnv.js";import{g as w}from"./runtime-env-BTGPA9v1.js";import{g}from"./viewport-BO_p0Wfw.js";import{g as E,r as I}from"./index-BYDhyiYq.js";const T=k=>{const{metrikaId:x}=k,{win:c,doc:e}=w();if(!c||!e)return null;const r=e.querySelector("[data-sticky-cta]"),i=e.getElementById("sticky-context");if(!r)return null;const a={text:r.textContent.trim(),href:r.getAttribute("href")||""},l=i?i.textContent.trim():"",v=Array.from(e.querySelectorAll("[data-nav-section]")),m=(()=>{const t=v.find(S=>(S.getAttribute("href")||"").includes("#"));if(!t)return"#";const o=t.getAttribute("href")||"#",h=o.indexOf("#");return o.slice(0,Math.max(h+1,1))})(),s=t=>`${m}${t}`,{stickyCta:f}=E(I()),p=f&&f.sections?f.sections:{},n=t=>p[t]||{},C={trust:{...n("trust"),href:s("trust")},services:{...n("services"),href:s("services")},scanner:{...n("scanner"),href:s("scanner-anchor")},"goal-routes":{...n("goal-routes"),href:s("goal-routes")},packages:{...n("packages"),href:s("packages")},results:{...n("results"),href:s("results")},blog:{...n("blog"),href:s("blog")},"how-to-book":{...n("how-to-book"),href:s("how-to-book")},booking:{...n("booking"),href:a.href}};let u=g();const A=(t,o={})=>M(t,o,x),b=t=>{const o=C[t];if(!o){r.textContent=a.text,r.setAttribute("href",a.href),i&&(i.textContent=l);return}const h=u==="mobile";r.textContent=h&&o.shortText?o.shortText:o.text,r.setAttribute("href",o.href||a.href),i&&(i.textContent=o.context||l)},y=()=>e.body&&e.body.dataset?e.body.dataset.activeSection:"",d=()=>b(y());return r.addEventListener("click",()=>{const t=e.body&&e.body.dataset?e.body.dataset.navIntent:"";A("cta_from_section",{id:y()||"",intent:t||"explore"})}),e.body&&"MutationObserver"in c&&new c.MutationObserver(()=>{d()}).observe(e.body,{attributes:!0,attributeFilter:["data-active-section"]}),c.addEventListener("resize",()=>{const t=g();t!==u&&(u=t,d())}),d(),{updateStickyCta:b}};export{T as initStickyCta};
