const l=(o=120)=>{const e=getComputedStyle(document.documentElement).getPropertyValue("--anchor-offset"),t=Number.parseFloat(e);return Number.isFinite(t)&&t>0?t:o},u=(o=".section-shell")=>{const e=Array.from(document.querySelectorAll(o));e.length&&(e.forEach(t=>{t.style.contentVisibility="visible",t.style.containIntrinsicSize="auto"}),e.forEach(t=>{t.offsetHeight}),window.setTimeout(()=>{e.forEach(t=>{t.style.contentVisibility="",t.style.containIntrinsicSize=""})},2400))},f=o=>{if(!o||typeof o.focus!="function")return;const e=o.hasAttribute("tabindex");e||o.setAttribute("tabindex","-1");try{o.focus({preventScroll:!0})}catch{o.focus()}e||window.setTimeout(()=>{o.removeAttribute("tabindex")},800)},r=(o,e,t=10,n=120)=>{if(!o)return;let i=0;const s=()=>{const c=o.getBoundingClientRect().top-e;Math.abs(c)>6&&window.scrollTo({top:window.scrollY+c,behavior:"auto"}),i+=1,i<t&&window.setTimeout(s,n)};s()},E=(o,{reducedEffects:e=!1,updateHash:t=!0}={})=>{if(!o)return!1;u();const n=l(),i=o.getBoundingClientRect().top+window.scrollY-n;if(window.scrollTo({top:i,behavior:e?"auto":"smooth"}),t&&o.id)try{history.replaceState(null,"",`#${o.id}`)}catch{}const s=()=>{r(o,n),f(o),window.setTimeout(()=>r(o,n),140)};return window.setTimeout(s,e?0:240),!0};export{E as s};
